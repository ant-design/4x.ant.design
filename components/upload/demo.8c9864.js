(window.webpackJsonp=window.webpackJsonp||[]).push([[208],{3925:function(J,ln,y){J.exports={avatar:y(4791),basic:y(4792),"crop-image":y(4793),"customize-progress-bar":y(4799),defaultFileList:y(4800),directory:y(4801),"drag-sorting":y(4802),drag:y(4803),"file-type":y(4804),fileList:y(4805),"max-count":y(4806),"picture-card":y(4807),"picture-style":y(4808),"preview-file":y(4809),"transform-file":y(4810),"upload-custom-action-icon":y(4811),"upload-manually":y(4812),"upload-png-only":y(4813),"upload-with-aliyun-oss":y(4814)}},4074:function(J,ln,y){"use strict";(function(pn){Object.defineProperty(ln,"__esModule",{value:!0});function Z(a){return typeof a=="object"&&!("toString"in a)?Object.prototype.toString.call(a).slice(8,-1):a}var gn=typeof pn=="object"&&!0;function j(a,s){if(!a)throw gn?new Error("Invariant failed"):new Error(s())}ln.invariant=j;var A=Object.prototype.hasOwnProperty,L=Array.prototype.splice,S=Object.prototype.toString;function F(a){return S.call(a).slice(8,-1)}var G=Object.assign||function(a,s){return z(s).forEach(function(r){A.call(s,r)&&(a[r]=s[r])}),a},z=typeof Object.getOwnPropertySymbols=="function"?function(a){return Object.keys(a).concat(Object.getOwnPropertySymbols(a))}:function(a){return Object.keys(a)};function x(a){return Array.isArray(a)?G(a.constructor(a.length),a):F(a)==="Map"?new Map(a):F(a)==="Set"?new Set(a):a&&typeof a=="object"?G(Object.create(Object.getPrototypeOf(a)),a):a}var M=function(){function a(){this.commands=G({},H),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(s,r){return s===r},this.update.newContext=function(){return new a().update}}return Object.defineProperty(a.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(s){this.update.isEquals=s},enumerable:!0,configurable:!0}),a.prototype.extend=function(s,r){this.commands[s]=r},a.prototype.update=function(s,r){var l=this,g=typeof r=="function"?{$apply:r}:r;Array.isArray(s)&&Array.isArray(g)||j(!Array.isArray(g),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),j(typeof g=="object"&&g!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(l.commands).join(", ")+".")});var h=s;return z(g).forEach(function(v){if(A.call(l.commands,v)){var C=s===h;h=l.commands[v](g[v],h,g,s),C&&l.isEquals(h,s)&&(h=s)}else{var D=F(s)==="Map"?l.update(s.get(v),g[v]):l.update(s[v],g[v]),I=F(h)==="Map"?h.get(v):h[v];(!l.isEquals(D,I)||typeof D=="undefined"&&!A.call(s,v))&&(h===s&&(h=x(s)),F(h)==="Map"?h.set(v,D):h[v]=D)}}),h},a}();ln.Context=M;var H={$push:function(a,s,r){return yn(s,r,"$push"),a.length?s.concat(a):s},$unshift:function(a,s,r){return yn(s,r,"$unshift"),a.length?a.concat(s):s},$splice:function(a,s,r,l){return un(s,r),a.forEach(function(g){fn(g),s===l&&g.length&&(s=x(l)),L.apply(s,g)}),s},$set:function(a,s,r){return B(r),a},$toggle:function(a,s){Q(a,"$toggle");var r=a.length?x(s):s;return a.forEach(function(l){r[l]=!s[l]}),r},$unset:function(a,s,r,l){return Q(a,"$unset"),a.forEach(function(g){Object.hasOwnProperty.call(s,g)&&(s===l&&(s=x(l)),delete s[g])}),s},$add:function(a,s,r,l){return e(s,"$add"),Q(a,"$add"),F(s)==="Map"?a.forEach(function(g){var h=g[0],v=g[1];s===l&&s.get(h)!==v&&(s=x(l)),s.set(h,v)}):a.forEach(function(g){s===l&&!s.has(g)&&(s=x(l)),s.add(g)}),s},$remove:function(a,s,r,l){return e(s,"$remove"),Q(a,"$remove"),a.forEach(function(g){s===l&&s.has(g)&&(s=x(l)),s.delete(g)}),s},$merge:function(a,s,r,l){return $(s,a),z(a).forEach(function(g){a[g]!==s[g]&&(s===l&&(s=x(l)),s[g]=a[g])}),s},$apply:function(a,s){return mn(a),a(s)}},sn=new M;ln.isEquals=sn.update.isEquals,ln.extend=sn.extend,ln.default=sn.update,ln.default.default=J.exports=G(ln.default,ln);function yn(a,s,r){j(Array.isArray(a),function(){return"update(): expected target of "+Z(r)+" to be an array; got "+Z(a)+"."}),Q(s[r],r)}function Q(a,s){j(Array.isArray(a),function(){return"update(): expected spec of "+Z(s)+" to be an array; got "+Z(a)+". Did you forget to wrap your parameter in an array?"})}function un(a,s){j(Array.isArray(a),function(){return"Expected $splice target to be an array; got "+Z(a)}),fn(s.$splice)}function fn(a){j(Array.isArray(a),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Z(a)+". Did you forget to wrap your parameters in an array?"})}function mn(a){j(typeof a=="function",function(){return"update(): expected spec of $apply to be a function; got "+Z(a)+"."})}function B(a){j(Object.keys(a).length===1,function(){return"Cannot have more than one key in an object with $set"})}function $(a,s){j(s&&typeof s=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Z(s)}),j(a&&typeof a=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Z(a)})}function e(a,s){var r=F(a);j(r==="Map"||r==="Set",function(){return"update(): "+Z(s)+" expects a target of type Set or Map; got "+Z(r)})}}).call(this,y(497))},4791:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u70B9\u51FB\u4E0A\u4F20\u7528\u6237\u5934\u50CF\uFF0C\u5E76\u4F7F\u7528 ",["code","beforeUpload"]," \u9650\u5236\u7528\u6237\u4E0A\u4F20\u7684\u56FE\u7247\u683C\u5F0F\u548C\u5927\u5C0F\u3002"],["blockquote",["p",["code","beforeUpload"]," \u7684\u8FD4\u56DE\u503C\u53EF\u4EE5\u662F\u4E00\u4E2A Promise \u4EE5\u652F\u6301\u5F02\u6B65\u5904\u7406\uFF0C\u5982\u670D\u52A1\u7AEF\u6821\u9A8C\u7B49\uFF1A",["a",{title:null,href:"https://upload-react-component.vercel.app/demo/before-upload#beforeupload"},"\u793A\u4F8B"],"\u3002"]]],"en-US":[["p","Click to upload user's avatar, and validate size and format of picture with ",["code","beforeUpload"],"."],["blockquote",["p","The return value of function ",["code","beforeUpload"]," can be a Promise to check asynchronously. ",["a",{title:null,href:"https://upload-react-component.vercel.app/demo/before-upload#beforeupload"},"demo"]]]]},meta:{order:1,title:{"zh-CN":"\u7528\u6237\u5934\u50CF","en-US":"Avatar"},filename:"components/upload/demo/avatar.md",id:"components-upload-demo-avatar"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { LoadingOutlined<span class="token punctuation">,</span> PlusOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import { message<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadChangeParam } from <span class="token string">'antd/es/upload'</span><span class="token comment" spellcheck="true">;</span>
import type { RcFile<span class="token punctuation">,</span> UploadFile<span class="token punctuation">,</span> UploadProps } from <span class="token string">'antd/es/upload/interface'</span><span class="token comment" spellcheck="true">;</span>
import React<span class="token punctuation">,</span> { useState } from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> getBase64 <span class="token operator">=</span> <span class="token punctuation">(</span>img<span class="token punctuation">:</span> RcFile<span class="token punctuation">,</span> callback<span class="token punctuation">:</span> <span class="token punctuation">(</span>url<span class="token punctuation">:</span> string<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> void<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
  <span class="token keyword">const</span> reader <span class="token operator">=</span> new <span class="token function">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  reader<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">callback</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result as string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
}<span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> beforeUpload <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token punctuation">:</span> RcFile<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
  <span class="token keyword">const</span> isJpgOrPng <span class="token operator">=</span> file<span class="token punctuation">.</span>type <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'image/jpeg'</span> || file<span class="token punctuation">.</span>type <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'image/png'</span><span class="token comment" spellcheck="true">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>!isJpgOrPng<span class="token punctuation">)</span> {
    message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'You can only upload JPG/PNG file!'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }
  <span class="token keyword">const</span> isLt2M <span class="token operator">=</span> file<span class="token punctuation">.</span>size <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token comment" spellcheck="true">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>!isLt2M<span class="token punctuation">)</span> {
    message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Image must smaller than 2MB!'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }
  return isJpgOrPng <span class="token operator">&amp;</span><span class="token operator">&amp;</span> isLt2M<span class="token comment" spellcheck="true">;</span>
}<span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>imageUrl<span class="token punctuation">,</span> setImageUrl<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> handleChange<span class="token punctuation">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>info<span class="token punctuation">:</span> UploadChangeParam<span class="token operator">&lt;</span>UploadFile<span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> {
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
      return<span class="token comment" spellcheck="true">;</span>
    }
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'done'</span><span class="token punctuation">)</span> {
      <span class="token operator">/</span><span class="token operator">/</span> Get this url from response <span class="token keyword">in</span> real world<span class="token punctuation">.</span>
      <span class="token function">getBase64</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>originFileObj as RcFile<span class="token punctuation">,</span> url <span class="token operator">=</span><span class="token operator">></span> {
        <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        <span class="token function">setImageUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
      }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
  }<span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> uploadButton <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      {loading <span class="token operator">?</span> <span class="token operator">&lt;</span>LoadingOutlined <span class="token operator">/</span><span class="token operator">></span> <span class="token punctuation">:</span> <span class="token operator">&lt;</span>PlusOutlined <span class="token operator">/</span><span class="token operator">></span>}
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span>{{ marginTop<span class="token punctuation">:</span> <span class="token number">8</span> }}<span class="token operator">></span>Upload<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  return <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Upload
      name<span class="token operator">=</span><span class="token string">"avatar"</span>
      listType<span class="token operator">=</span><span class="token string">"picture-card"</span>
      className<span class="token operator">=</span><span class="token string">"avatar-uploader"</span>
      showUploadList<span class="token operator">=</span>{<span class="token boolean">false</span>}
      action<span class="token operator">=</span><span class="token string">"https://www.mocky.io/v2/5cc8019d300000980a055e76"</span>
      beforeUpload<span class="token operator">=</span>{beforeUpload}
      onChange<span class="token operator">=</span>{handleChange}
    <span class="token operator">></span>
      {imageUrl <span class="token operator">?</span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span>{imageUrl} alt<span class="token operator">=</span><span class="token string">"avatar"</span> style<span class="token operator">=</span>{{ width<span class="token punctuation">:</span> <span class="token string">'100%'</span> }} <span class="token operator">/</span><span class="token operator">></span> <span class="token punctuation">:</span> uploadButton}
    <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
}<span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> LoadingOutlined<span class="token punctuation">,</span> PlusOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadChangeParam <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd/es/upload'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> RcFile<span class="token punctuation">,</span> UploadFile<span class="token punctuation">,</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd/es/upload/interface'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">getBase64</span> <span class="token operator">=</span> <span class="token punctuation">(</span>img<span class="token operator">:</span> RcFile<span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>url<span class="token operator">:</span> string<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  reader<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">callback</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result <span class="token keyword">as</span> string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">beforeUpload</span> <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token operator">:</span> RcFile<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isJpgOrPng <span class="token operator">=</span> file<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'image/jpeg'</span> <span class="token operator">||</span> file<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'image/png'</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isJpgOrPng<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'You can only upload JPG/PNG file!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> isLt2M <span class="token operator">=</span> file<span class="token punctuation">.</span>size <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLt2M<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Image must smaller than 2MB!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> isJpgOrPng <span class="token operator">&amp;&amp;</span> isLt2M<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>imageUrl<span class="token punctuation">,</span> setImageUrl<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> handleChange<span class="token operator">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>info<span class="token operator">:</span> UploadChangeParam<span class="token operator">&lt;</span>UploadFile<span class="token operator">></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'done'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Get this url from response in real world.</span>
      <span class="token function">getBase64</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>originFileObj <span class="token keyword">as</span> RcFile<span class="token punctuation">,</span> url <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setImageUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> uploadButton <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
      <span class="token punctuation">{</span>loading <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoadingOutlined</span></span> <span class="token punctuation">/></span></span> <span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlusOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginTop<span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
      <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span>
      <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-card<span class="token punctuation">"</span></span>
      <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar-uploader<span class="token punctuation">"</span></span>
      <span class="token attr-name">showUploadList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span></span>
      <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
      <span class="token attr-name">beforeUpload</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>beforeUpload<span class="token punctuation">}</span></span>
      <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span></span>
    <span class="token punctuation">></span></span>
      <span class="token punctuation">{</span>imageUrl <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>imageUrl<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token string">'100%'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span> <span class="token operator">:</span> uploadButton<span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> LoadingOutlined<span class="token punctuation">,</span> PlusOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">getBase64</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">img<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  reader<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">callback</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">beforeUpload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isJpgOrPng <span class="token operator">=</span> file<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'image/jpeg'</span> <span class="token operator">||</span> file<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'image/png'</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isJpgOrPng<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'You can only upload JPG/PNG file!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> isLt2M <span class="token operator">=</span> file<span class="token punctuation">.</span>size <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLt2M<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Image must smaller than 2MB!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> isJpgOrPng <span class="token operator">&amp;&amp;</span> isLt2M<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>imageUrl<span class="token punctuation">,</span> setImageUrl<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'done'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Get this url from response in real world.</span>
      <span class="token function">getBase64</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>originFileObj<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setImageUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> uploadButton <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
      <span class="token punctuation">{</span>loading <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoadingOutlined</span></span> <span class="token punctuation">/></span></span> <span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlusOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span>
        Upload
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
      <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span>
      <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-card<span class="token punctuation">"</span></span>
      <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar-uploader<span class="token punctuation">"</span></span>
      <span class="token attr-name">showUploadList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span></span>
      <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
      <span class="token attr-name">beforeUpload</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>beforeUpload<span class="token punctuation">}</span></span>
      <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span></span>
    <span class="token punctuation">></span></span>
      <span class="token punctuation">{</span>imageUrl <span class="token operator">?</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
          <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>imageUrl<span class="token punctuation">}</span></span>
          <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span>
          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">/></span></span>
      <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
        uploadButton
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51);function j(B){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},j(B)}var A=y(61),L=y(12),S=G(y(0));function F(B){if(typeof WeakMap!="function")return null;var $=new WeakMap,e=new WeakMap;return(F=function(s){return s?e:$})(B)}function G(B,$){if(!$&&B&&B.__esModule)return B;if(B===null||j(B)!=="object"&&typeof B!="function")return{default:B};var e=F($);if(e&&e.has(B))return e.get(B);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in B)if(r!=="default"&&Object.prototype.hasOwnProperty.call(B,r)){var l=s?Object.getOwnPropertyDescriptor(B,r):null;l&&(l.get||l.set)?Object.defineProperty(a,r,l):a[r]=B[r]}return a.default=B,e&&e.set(B,a),a}function z(B,$){return yn(B)||sn(B,$)||M(B,$)||x()}function x(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M(B,$){if(!!B){if(typeof B=="string")return H(B,$);var e=Object.prototype.toString.call(B).slice(8,-1);if(e==="Object"&&B.constructor&&(e=B.constructor.name),e==="Map"||e==="Set")return Array.from(B);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return H(B,$)}}function H(B,$){($==null||$>B.length)&&($=B.length);for(var e=0,a=new Array($);e<$;e++)a[e]=B[e];return a}function sn(B,$){var e=B==null?null:typeof Symbol!="undefined"&&B[Symbol.iterator]||B["@@iterator"];if(e!=null){var a=[],s=!0,r=!1,l,g;try{for(e=e.call(B);!(s=(l=e.next()).done)&&(a.push(l.value),!($&&a.length===$));s=!0);}catch(h){r=!0,g=h}finally{try{!s&&e.return!=null&&e.return()}finally{if(r)throw g}}return a}}function yn(B){if(Array.isArray(B))return B}var Q=function($,e){var a=new FileReader;a.addEventListener("load",function(){return e(a.result)}),a.readAsDataURL($)},un=function($){var e=$.type==="image/jpeg"||$.type==="image/png";e||L.message.error("You can only upload JPG/PNG file!");var a=$.size/1024/1024<2;return a||L.message.error("Image must smaller than 2MB!"),e&&a},fn=function(){var $=(0,S.useState)(!1),e=z($,2),a=e[0],s=e[1],r=(0,S.useState)(),l=z(r,2),g=l[0],h=l[1],v=function(I){if(I.file.status==="uploading"){s(!0);return}I.file.status==="done"&&Q(I.file.originFileObj,function(T){s(!1),h(T)})},C=S.default.createElement("div",null,a?S.default.createElement(A.LoadingOutlined,null):S.default.createElement(A.PlusOutlined,null),S.default.createElement("div",{style:{marginTop:8}},"Upload"));return S.default.createElement(L.Upload,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",beforeUpload:un,onChange:v},g?S.default.createElement("img",{src:g,alt:"avatar",style:{width:"100%"}}):C)},mn=fn;return Z.createElement(mn)}}},4792:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u7ECF\u5178\u6B3E\u5F0F\uFF0C\u7528\u6237\u70B9\u51FB\u6309\u94AE\u5F39\u51FA\u6587\u4EF6\u9009\u62E9\u6846\u3002"]],"en-US":[["p","Classic mode. File selection dialog pops up when upload button is clicked."]]},meta:{order:0,title:{"zh-CN":"\u70B9\u51FB\u4E0A\u4F20","en-US":"Upload by clicking"},filename:"components/upload/demo/basic.md",id:"components-upload-demo-basic"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadProps } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import React from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> props<span class="token punctuation">:</span> UploadProps <span class="token operator">=</span> {
  name<span class="token punctuation">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
  action<span class="token punctuation">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  headers<span class="token punctuation">:</span> {
    authorization<span class="token punctuation">:</span> <span class="token string">'authorization-text'</span><span class="token punctuation">,</span>
  }<span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> {
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status !<span class="token operator">==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> {
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">,</span> info<span class="token punctuation">.</span>fileList<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'done'</span><span class="token punctuation">)</span> {
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>\`\${info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name} file uploaded successfully\`<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    } <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'error'</span><span class="token punctuation">)</span> {
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>\`\${info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name} file upload failed<span class="token punctuation">.</span>\`<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
  }<span class="token punctuation">,</span>
}<span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Upload {<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>props}<span class="token operator">></span>
    <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Click <span class="token keyword">to</span> Upload<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> props<span class="token operator">:</span> UploadProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
  action<span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  headers<span class="token operator">:</span> <span class="token punctuation">{</span>
    authorization<span class="token operator">:</span> <span class="token string">'authorization-text'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">,</span> info<span class="token punctuation">.</span>fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'done'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> file uploaded successfully</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'error'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> file upload failed.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Click to Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">authorization</span><span class="token operator">:</span> <span class="token string">'authorization-text'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">,</span> info<span class="token punctuation">.</span>fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'done'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> file uploaded successfully</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'error'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> file upload failed.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Click to Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51),j=y(61),A=y(12),L=S(y(0));function S(x){return x&&x.__esModule?x:{default:x}}var F={name:"file",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",headers:{authorization:"authorization-text"},onChange:function(M){M.file.status!=="uploading"&&console.log(M.file,M.fileList),M.file.status==="done"?A.message.success("".concat(M.file.name," file uploaded successfully")):M.file.status==="error"&&A.message.error("".concat(M.file.name," file upload failed."))}},G=function(){return L.default.createElement(A.Upload,F,L.default.createElement(A.Button,{icon:L.default.createElement(j.UploadOutlined,null)},"Click to Upload"))},z=G;return Z.createElement(z)}}},4793:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u914D\u5408 ",["a",{title:null,href:"https://github.com/nanxiaobei/antd-img-crop"},"antd-img-crop"]," \u5B9E\u73B0\u4E0A\u4F20\u524D\u88C1\u5207\u56FE\u7247\u3002"]],"en-US":[["p","Use ",["a",{title:null,href:"https://github.com/nanxiaobei/antd-img-crop"},"antd-img-crop"]," to crop image before uploading."]]},meta:{order:14,title:{"zh-CN":"\u4E0A\u4F20\u524D\u88C1\u5207\u56FE\u7247","en-US":"Crop image before uploading"},filename:"components/upload/demo/crop-image.md",id:"components-upload-demo-crop-image"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import ImgCrop from <span class="token string">'antd-img-crop'</span><span class="token comment" spellcheck="true">;</span>
import type { RcFile<span class="token punctuation">,</span> UploadFile<span class="token punctuation">,</span> UploadProps } from <span class="token string">'antd/es/upload/interface'</span><span class="token comment" spellcheck="true">;</span>
import React<span class="token punctuation">,</span> { useState } from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> onChange<span class="token punctuation">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>{ fileList<span class="token punctuation">:</span> newFileList }<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> onPreview <span class="token operator">=</span> async <span class="token punctuation">(</span>file<span class="token punctuation">:</span> UploadFile<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    let src <span class="token operator">=</span> file<span class="token punctuation">.</span>url as string<span class="token comment" spellcheck="true">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>!src<span class="token punctuation">)</span> {
      src <span class="token operator">=</span> await new <span class="token function">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=</span><span class="token operator">></span> {
        <span class="token keyword">const</span> reader <span class="token operator">=</span> new <span class="token function">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>originFileObj as RcFile<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        reader<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">resolve</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result as string<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
      }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
    <span class="token keyword">const</span> image <span class="token operator">=</span> new <span class="token function">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    image<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token comment" spellcheck="true">;</span>
    <span class="token keyword">const</span> imgWindow <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    imgWindow<span class="token operator">?</span><span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token comment" spellcheck="true">;</span>

  return <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ImgCrop rotate<span class="token operator">></span>
      <span class="token operator">&lt;</span>Upload
        action<span class="token operator">=</span><span class="token string">"https://www.mocky.io/v2/5cc8019d300000980a055e76"</span>
        listType<span class="token operator">=</span><span class="token string">"picture-card"</span>
        fileList<span class="token operator">=</span>{fileList}
        onChange<span class="token operator">=</span>{onChange}
        onPreview<span class="token operator">=</span>{onPreview}
      <span class="token operator">></span>
        {fileList<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token operator">&amp;</span><span class="token operator">&amp;</span> <span class="token string">'+ Upload'</span>}
      <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ImgCrop<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
}<span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ImgCrop <span class="token keyword">from</span> <span class="token string">'antd-img-crop'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> RcFile<span class="token punctuation">,</span> UploadFile<span class="token punctuation">,</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd/es/upload/interface'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> onChange<span class="token operator">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> fileList<span class="token operator">:</span> newFileList <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onPreview</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>file<span class="token operator">:</span> UploadFile<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> src <span class="token operator">=</span> file<span class="token punctuation">.</span>url <span class="token keyword">as</span> string<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>src<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      src <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>originFileObj <span class="token keyword">as</span> RcFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
        reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result <span class="token keyword">as</span> string<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    image<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
    <span class="token keyword">const</span> imgWindow <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
    imgWindow<span class="token operator">?.</span>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ImgCrop</span></span> <span class="token attr-name">rotate</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
        <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
        <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-card<span class="token punctuation">"</span></span>
        <span class="token attr-name">fileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileList<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span></span>
        <span class="token attr-name">onPreview</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onPreview<span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span>
        <span class="token punctuation">{</span>fileList<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> <span class="token string">'+ Upload'</span><span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ImgCrop</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ImgCrop <span class="token keyword">from</span> <span class="token string">'antd-img-crop'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">fileList</span><span class="token operator">:</span> newFileList <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onPreview</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> src <span class="token operator">=</span> file<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>src<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      src <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>originFileObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    image<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
    <span class="token keyword">const</span> imgWindow <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
    imgWindow<span class="token operator">?.</span>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ImgCrop</span></span> <span class="token attr-name">rotate</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
        <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
        <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-card<span class="token punctuation">"</span></span>
        <span class="token attr-name">fileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileList<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span></span>
        <span class="token attr-name">onPreview</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onPreview<span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span>
        <span class="token punctuation">{</span>fileList<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> <span class="token string">'+ Upload'</span><span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ImgCrop</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51);function j(e){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},j(e)}var A=y(12),L=z(y(4861)),S=G(y(0));function F(e){if(typeof WeakMap!="function")return null;var a=new WeakMap,s=new WeakMap;return(F=function(l){return l?s:a})(e)}function G(e,a){if(!a&&e&&e.__esModule)return e;if(e===null||j(e)!=="object"&&typeof e!="function")return{default:e};var s=F(a);if(s&&s.has(e))return s.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in e)if(g!=="default"&&Object.prototype.hasOwnProperty.call(e,g)){var h=l?Object.getOwnPropertyDescriptor(e,g):null;h&&(h.get||h.set)?Object.defineProperty(r,g,h):r[g]=e[g]}return r.default=e,s&&s.set(e,r),r}function z(e){return e&&e.__esModule?e:{default:e}}function x(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */x=function(){return e};var e={},a=Object.prototype,s=a.hasOwnProperty,r=Object.defineProperty||function(d,o,u){d[o]=u.value},l=typeof Symbol=="function"?Symbol:{},g=l.iterator||"@@iterator",h=l.asyncIterator||"@@asyncIterator",v=l.toStringTag||"@@toStringTag";function C(d,o,u){return Object.defineProperty(d,o,{value:u,enumerable:!0,configurable:!0,writable:!0}),d[o]}try{C({},"")}catch(d){C=function(u,w,m){return u[w]=m}}function D(d,o,u,w){var m=o&&o.prototype instanceof V?o:V,k=Object.create(m.prototype),b=new Un(w||[]);return r(k,"_invoke",{value:en(d,u,b)}),k}function I(d,o,u){try{return{type:"normal",arg:d.call(o,u)}}catch(w){return{type:"throw",arg:w}}}e.wrap=D;var T={};function V(){}function cn(){}function K(){}var kn={};C(kn,g,function(){return this});var wn=Object.getPrototypeOf,hn=wn&&wn(wn(bn([])));hn&&hn!==a&&s.call(hn,g)&&(kn=hn);var an=K.prototype=V.prototype=Object.create(kn);function rn(d){["next","throw","return"].forEach(function(o){C(d,o,function(u){return this._invoke(o,u)})})}function Y(d,o){function u(m,k,b,R){var E=I(d[m],d,k);if(E.type!=="throw"){var W=E.arg,X=W.value;return X&&j(X)=="object"&&s.call(X,"__await")?o.resolve(X.__await).then(function(on){u("next",on,b,R)},function(on){u("throw",on,b,R)}):o.resolve(X).then(function(on){W.value=on,b(W)},function(on){return u("throw",on,b,R)})}R(E.arg)}var w;r(this,"_invoke",{value:function(k,b){function R(){return new o(function(E,W){u(k,b,E,W)})}return w=w?w.then(R,R):R()}})}function en(d,o,u){var w="suspendedStart";return function(m,k){if(w==="executing")throw new Error("Generator is already running");if(w==="completed"){if(m==="throw")throw k;return jn()}for(u.method=m,u.arg=k;;){var b=u.delegate;if(b){var R=tn(b,u);if(R){if(R===T)continue;return R}}if(u.method==="next")u.sent=u._sent=u.arg;else if(u.method==="throw"){if(w==="suspendedStart")throw w="completed",u.arg;u.dispatchException(u.arg)}else u.method==="return"&&u.abrupt("return",u.arg);w="executing";var E=I(d,o,u);if(E.type==="normal"){if(w=u.done?"completed":"suspendedYield",E.arg===T)continue;return{value:E.arg,done:u.done}}E.type==="throw"&&(w="completed",u.method="throw",u.arg=E.arg)}}}function tn(d,o){var u=d.iterator[o.method];if(u===void 0){if(o.delegate=null,o.method==="throw"){if(d.iterator.return&&(o.method="return",o.arg=void 0,tn(d,o),o.method==="throw"))return T;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var w=I(u,d.iterator,o.arg);if(w.type==="throw")return o.method="throw",o.arg=w.arg,o.delegate=null,T;var m=w.arg;return m?m.done?(o[d.resultName]=m.value,o.next=d.nextLoc,o.method!=="return"&&(o.method="next",o.arg=void 0),o.delegate=null,T):m:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,T)}function nn(d){var o={tryLoc:d[0]};1 in d&&(o.catchLoc=d[1]),2 in d&&(o.finallyLoc=d[2],o.afterLoc=d[3]),this.tryEntries.push(o)}function Cn(d){var o=d.completion||{};o.type="normal",delete o.arg,d.completion=o}function Un(d){this.tryEntries=[{tryLoc:"root"}],d.forEach(nn,this),this.reset(!0)}function bn(d){if(d){var o=d[g];if(o)return o.call(d);if(typeof d.next=="function")return d;if(!isNaN(d.length)){var u=-1,w=function m(){for(;++u<d.length;)if(s.call(d,u))return m.value=d[u],m.done=!1,m;return m.value=void 0,m.done=!0,m};return w.next=w}}return{next:jn}}function jn(){return{value:void 0,done:!0}}return cn.prototype=K,r(an,"constructor",{value:K,configurable:!0}),r(K,"constructor",{value:cn,configurable:!0}),cn.displayName=C(K,v,"GeneratorFunction"),e.isGeneratorFunction=function(d){var o=typeof d=="function"&&d.constructor;return!!o&&(o===cn||(o.displayName||o.name)==="GeneratorFunction")},e.mark=function(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,K):(d.__proto__=K,C(d,v,"GeneratorFunction")),d.prototype=Object.create(an),d},e.awrap=function(d){return{__await:d}},rn(Y.prototype),C(Y.prototype,h,function(){return this}),e.AsyncIterator=Y,e.async=function(d,o,u,w,m){m===void 0&&(m=Promise);var k=new Y(D(d,o,u,w),m);return e.isGeneratorFunction(o)?k:k.next().then(function(b){return b.done?b.value:k.next()})},rn(an),C(an,v,"Generator"),C(an,g,function(){return this}),C(an,"toString",function(){return"[object Generator]"}),e.keys=function(d){var o=Object(d),u=[];for(var w in o)u.push(w);return u.reverse(),function m(){for(;u.length;){var k=u.pop();if(k in o)return m.value=k,m.done=!1,m}return m.done=!0,m}},e.values=bn,Un.prototype={constructor:Un,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Cn),!o)for(var u in this)u.charAt(0)==="t"&&s.call(this,u)&&!isNaN(+u.slice(1))&&(this[u]=void 0)},stop:function(){this.done=!0;var o=this.tryEntries[0].completion;if(o.type==="throw")throw o.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var u=this;function w(W,X){return b.type="throw",b.arg=o,u.next=W,X&&(u.method="next",u.arg=void 0),!!X}for(var m=this.tryEntries.length-1;m>=0;--m){var k=this.tryEntries[m],b=k.completion;if(k.tryLoc==="root")return w("end");if(k.tryLoc<=this.prev){var R=s.call(k,"catchLoc"),E=s.call(k,"finallyLoc");if(R&&E){if(this.prev<k.catchLoc)return w(k.catchLoc,!0);if(this.prev<k.finallyLoc)return w(k.finallyLoc)}else if(R){if(this.prev<k.catchLoc)return w(k.catchLoc,!0)}else{if(!E)throw new Error("try statement without catch or finally");if(this.prev<k.finallyLoc)return w(k.finallyLoc)}}}},abrupt:function(o,u){for(var w=this.tryEntries.length-1;w>=0;--w){var m=this.tryEntries[w];if(m.tryLoc<=this.prev&&s.call(m,"finallyLoc")&&this.prev<m.finallyLoc){var k=m;break}}k&&(o==="break"||o==="continue")&&k.tryLoc<=u&&u<=k.finallyLoc&&(k=null);var b=k?k.completion:{};return b.type=o,b.arg=u,k?(this.method="next",this.next=k.finallyLoc,T):this.complete(b)},complete:function(o,u){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&u&&(this.next=u),T},finish:function(o){for(var u=this.tryEntries.length-1;u>=0;--u){var w=this.tryEntries[u];if(w.finallyLoc===o)return this.complete(w.completion,w.afterLoc),Cn(w),T}},catch:function(o){for(var u=this.tryEntries.length-1;u>=0;--u){var w=this.tryEntries[u];if(w.tryLoc===o){var m=w.completion;if(m.type==="throw"){var k=m.arg;Cn(w)}return k}}throw new Error("illegal catch attempt")},delegateYield:function(o,u,w){return this.delegate={iterator:bn(o),resultName:u,nextLoc:w},this.method==="next"&&(this.arg=void 0),T}},e}function M(e,a,s,r,l,g,h){try{var v=e[g](h),C=v.value}catch(D){s(D);return}v.done?a(C):Promise.resolve(C).then(r,l)}function H(e){return function(){var a=this,s=arguments;return new Promise(function(r,l){var g=e.apply(a,s);function h(C){M(g,r,l,h,v,"next",C)}function v(C){M(g,r,l,h,v,"throw",C)}h(void 0)})}}function sn(e,a){return mn(e)||fn(e,a)||Q(e,a)||yn()}function yn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q(e,a){if(!!e){if(typeof e=="string")return un(e,a);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return un(e,a)}}function un(e,a){(a==null||a>e.length)&&(a=e.length);for(var s=0,r=new Array(a);s<a;s++)r[s]=e[s];return r}function fn(e,a){var s=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var r=[],l=!0,g=!1,h,v;try{for(s=s.call(e);!(l=(h=s.next()).done)&&(r.push(h.value),!(a&&r.length===a));l=!0);}catch(C){g=!0,v=C}finally{try{!l&&s.return!=null&&s.return()}finally{if(g)throw v}}return r}}function mn(e){if(Array.isArray(e))return e}var B=function(){var a=(0,S.useState)([{uid:"-1",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}]),s=sn(a,2),r=s[0],l=s[1],g=function(C){var D=C.fileList;l(D)},h=function(){var v=H(x().mark(function C(D){var I,T,V;return x().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(I=D.url,I){K.next=5;break}return K.next=4,new Promise(function(kn){var wn=new FileReader;wn.readAsDataURL(D.originFileObj),wn.onload=function(){return kn(wn.result)}});case 4:I=K.sent;case 5:T=new Image,T.src=I,V=window.open(I),V==null||V.document.write(T.outerHTML);case 9:case"end":return K.stop()}},C)}));return function(D){return v.apply(this,arguments)}}();return S.default.createElement(L.default,{rotate:!0},S.default.createElement(A.Upload,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",fileList:r,onChange:g,onPreview:h},r.length<5&&"+ Upload"))},$=B;return Z.createElement($)}}},4794:function(J,ln,y){J.exports=y(4795)},4795:function(J,ln,y){"use strict";var pn=y(4796),Z=y(4797),gn=10,j=40,A=800;function L(S){var F=0,G=0,z=0,x=0;return"detail"in S&&(G=S.detail),"wheelDelta"in S&&(G=-S.wheelDelta/120),"wheelDeltaY"in S&&(G=-S.wheelDeltaY/120),"wheelDeltaX"in S&&(F=-S.wheelDeltaX/120),"axis"in S&&S.axis===S.HORIZONTAL_AXIS&&(F=G,G=0),z=F*gn,x=G*gn,"deltaY"in S&&(x=S.deltaY),"deltaX"in S&&(z=S.deltaX),(z||x)&&S.deltaMode&&(S.deltaMode==1?(z*=j,x*=j):(z*=A,x*=A)),z&&!F&&(F=z<1?-1:1),x&&!G&&(G=x<1?-1:1),{spinX:F,spinY:G,pixelX:z,pixelY:x}}L.getEventType=function(){return pn.firefox()?"DOMMouseScroll":Z("wheel")?"wheel":"mousewheel"},J.exports=L},4796:function(J,ln){var y=!1,pn,Z,gn,j,A,L,S,F,G,z,x,M,H,sn,yn;function Q(){if(!y){y=!0;var fn=navigator.userAgent,mn=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(fn),B=/(Mac OS X)|(Windows)|(Linux)/.exec(fn);if(M=/\b(iPhone|iP[ao]d)/.exec(fn),H=/\b(iP[ao]d)/.exec(fn),z=/Android/i.exec(fn),sn=/FBAN\/\w+;/i.exec(fn),yn=/Mobile/i.exec(fn),x=!!/Win64/.exec(fn),mn){pn=mn[1]?parseFloat(mn[1]):mn[5]?parseFloat(mn[5]):NaN,pn&&document&&document.documentMode&&(pn=document.documentMode);var $=/(?:Trident\/(\d+.\d+))/.exec(fn);L=$?parseFloat($[1])+4:pn,Z=mn[2]?parseFloat(mn[2]):NaN,gn=mn[3]?parseFloat(mn[3]):NaN,j=mn[4]?parseFloat(mn[4]):NaN,j?(mn=/(?:Chrome\/(\d+\.\d+))/.exec(fn),A=mn&&mn[1]?parseFloat(mn[1]):NaN):A=NaN}else pn=Z=gn=A=j=NaN;if(B){if(B[1]){var e=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(fn);S=e?parseFloat(e[1].replace("_",".")):!0}else S=!1;F=!!B[2],G=!!B[3]}else S=F=G=!1}}var un={ie:function(){return Q()||pn},ieCompatibilityMode:function(){return Q()||L>pn},ie64:function(){return un.ie()&&x},firefox:function(){return Q()||Z},opera:function(){return Q()||gn},webkit:function(){return Q()||j},safari:function(){return un.webkit()},chrome:function(){return Q()||A},windows:function(){return Q()||F},osx:function(){return Q()||S},linux:function(){return Q()||G},iphone:function(){return Q()||M},mobile:function(){return Q()||M||H||z||yn},nativeApp:function(){return Q()||sn},android:function(){return Q()||z},ipad:function(){return Q()||H}};J.exports=un},4797:function(J,ln,y){"use strict";var pn=y(4798),Z;pn.canUseDOM&&(Z=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function gn(j,A){if(!pn.canUseDOM||A&&!("addEventListener"in document))return!1;var L="on"+j,S=L in document;if(!S){var F=document.createElement("div");F.setAttribute(L,"return;"),S=typeof F[L]=="function"}return!S&&Z&&j==="wheel"&&(S=document.implementation.hasFeature("Events.wheel","3.0")),S}J.exports=gn},4798:function(J,ln,y){"use strict";var pn=!!(typeof window!="undefined"&&window.document&&window.document.createElement),Z={canUseDOM:pn,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:pn&&!!(window.addEventListener||window.attachEvent),canUseViewport:pn&&!!window.screen,isInWorker:!pn};J.exports=Z},4799:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u4F7F\u7528 ",["code","progress"]," \u5C5E\u6027\u81EA\u5B9A\u4E49\u8FDB\u5EA6\u6761\u6837\u5F0F\u3002"]],"en-US":[["p","Use ",["code","progress"]," for customize progress bar."]]},meta:{order:15,title:{"zh-CN":"\u81EA\u5B9A\u4E49\u8FDB\u5EA6\u6761\u6837\u5F0F","en-US":"Customize Progress Bar"},filename:"components/upload/demo/customize-progress-bar.md",id:"components-upload-demo-customize-progress-bar"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadProps } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import React from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> props<span class="token punctuation">:</span> UploadProps <span class="token operator">=</span> {
  name<span class="token punctuation">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
  action<span class="token punctuation">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  headers<span class="token punctuation">:</span> {
    authorization<span class="token punctuation">:</span> <span class="token string">'authorization-text'</span><span class="token punctuation">,</span>
  }<span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> {
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status !<span class="token operator">==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> {
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">,</span> info<span class="token punctuation">.</span>fileList<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'done'</span><span class="token punctuation">)</span> {
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>\`\${info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name} file uploaded successfully\`<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    } <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'error'</span><span class="token punctuation">)</span> {
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>\`\${info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name} file upload failed<span class="token punctuation">.</span>\`<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
  }<span class="token punctuation">,</span>
  progress<span class="token punctuation">:</span> {
    strokeColor<span class="token punctuation">:</span> {
      <span class="token string">'0%'</span><span class="token punctuation">:</span> <span class="token string">'#108ee9'</span><span class="token punctuation">,</span>
      <span class="token string">'100%'</span><span class="token punctuation">:</span> <span class="token string">'#87d068'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    strokeWidth<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    format<span class="token punctuation">:</span> percent <span class="token operator">=</span><span class="token operator">></span> percent <span class="token operator">&amp;</span><span class="token operator">&amp;</span> \`\${<span class="token function">parseFloat</span><span class="token punctuation">(</span>percent<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>}%\`<span class="token punctuation">,</span>
  }<span class="token punctuation">,</span>
}<span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Upload {<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>props}<span class="token operator">></span>
    <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Click <span class="token keyword">to</span> Upload<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> props<span class="token operator">:</span> UploadProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
  action<span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  headers<span class="token operator">:</span> <span class="token punctuation">{</span>
    authorization<span class="token operator">:</span> <span class="token string">'authorization-text'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">,</span> info<span class="token punctuation">.</span>fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'done'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> file uploaded successfully</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'error'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> file upload failed.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  progress<span class="token operator">:</span> <span class="token punctuation">{</span>
    strokeColor<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'0%'</span><span class="token operator">:</span> <span class="token string">'#108ee9'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'100%'</span><span class="token operator">:</span> <span class="token string">'#87d068'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    strokeWidth<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token function-variable function">format</span><span class="token operator">:</span> percent <span class="token operator">=></span> percent <span class="token operator">&amp;&amp;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>percent<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Click to Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">authorization</span><span class="token operator">:</span> <span class="token string">'authorization-text'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">,</span> info<span class="token punctuation">.</span>fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'done'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> file uploaded successfully</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'error'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> file upload failed.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">progress</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">strokeColor</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'0%'</span><span class="token operator">:</span> <span class="token string">'#108ee9'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'100%'</span><span class="token operator">:</span> <span class="token string">'#87d068'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">strokeWidth</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token function-variable function">format</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">percent</span><span class="token punctuation">)</span> <span class="token operator">=></span> percent <span class="token operator">&amp;&amp;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>percent<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Click to Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51),j=y(61),A=y(12),L=S(y(0));function S(x){return x&&x.__esModule?x:{default:x}}var F={name:"file",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",headers:{authorization:"authorization-text"},onChange:function(M){M.file.status!=="uploading"&&console.log(M.file,M.fileList),M.file.status==="done"?A.message.success("".concat(M.file.name," file uploaded successfully")):M.file.status==="error"&&A.message.error("".concat(M.file.name," file upload failed."))},progress:{strokeColor:{"0%":"#108ee9","100%":"#87d068"},strokeWidth:3,format:function(M){return M&&"".concat(parseFloat(M.toFixed(2)),"%")}}},G=function(){return L.default.createElement(A.Upload,F,L.default.createElement(A.Button,{icon:L.default.createElement(j.UploadOutlined,null)},"Click to Upload"))},z=G;return Z.createElement(z)}}},4800:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u4F7F\u7528 ",["code","defaultFileList"]," \u8BBE\u7F6E\u5DF2\u4E0A\u4F20\u7684\u5185\u5BB9\u3002"]],"en-US":[["p","Use ",["code","defaultFileList"]," for uploaded files when page init."]]},meta:{order:2,title:{"zh-CN":"\u5DF2\u4E0A\u4F20\u7684\u6587\u4EF6\u5217\u8868","en-US":"Default Files"},filename:"components/upload/demo/defaultFileList.md",id:"components-upload-demo-defaultFileList"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadProps } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import React from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> props<span class="token punctuation">:</span> UploadProps <span class="token operator">=</span> {
  action<span class="token punctuation">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span>{ file<span class="token punctuation">,</span> fileList }<span class="token punctuation">)</span> {
    <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>status !<span class="token operator">==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> {
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> fileList<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
  }<span class="token punctuation">,</span>
  defaultFileList<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'xxx.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      response<span class="token punctuation">:</span> <span class="token string">'Server Error 500'</span><span class="token punctuation">,</span> <span class="token operator">/</span><span class="token operator">/</span> custom error message <span class="token keyword">to</span> show
      url<span class="token punctuation">:</span> <span class="token string">'http://www.baidu.com/xxx.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'yyy.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'http://www.baidu.com/yyy.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'3'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'zzz.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
      response<span class="token punctuation">:</span> <span class="token string">'Server Error 500'</span><span class="token punctuation">,</span> <span class="token operator">/</span><span class="token operator">/</span> custom error message <span class="token keyword">to</span> show
      url<span class="token punctuation">:</span> <span class="token string">'http://www.baidu.com/zzz.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
}<span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Upload {<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>props}<span class="token operator">></span>
    <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Upload<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> props<span class="token operator">:</span> UploadProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  action<span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">{</span> file<span class="token punctuation">,</span> fileList <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  defaultFileList<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'xxx.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      response<span class="token operator">:</span> <span class="token string">'Server Error 500'</span><span class="token punctuation">,</span> <span class="token comment">// custom error message to show</span>
      url<span class="token operator">:</span> <span class="token string">'http://www.baidu.com/xxx.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'yyy.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'http://www.baidu.com/yyy.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'3'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'zzz.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
      response<span class="token operator">:</span> <span class="token string">'Server Error 500'</span><span class="token punctuation">,</span> <span class="token comment">// custom error message to show</span>
      url<span class="token operator">:</span> <span class="token string">'http://www.baidu.com/zzz.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> file<span class="token punctuation">,</span> fileList <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">defaultFileList</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'xxx.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">response</span><span class="token operator">:</span> <span class="token string">'Server Error 500'</span><span class="token punctuation">,</span>
      <span class="token comment">// custom error message to show</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://www.baidu.com/xxx.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'yyy.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://www.baidu.com/yyy.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'3'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zzz.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">response</span><span class="token operator">:</span> <span class="token string">'Server Error 500'</span><span class="token punctuation">,</span>
      <span class="token comment">// custom error message to show</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://www.baidu.com/zzz.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51),j=y(61),A=y(12),L=S(y(0));function S(x){return x&&x.__esModule?x:{default:x}}var F={action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",onChange:function(M){var H=M.file,sn=M.fileList;H.status!=="uploading"&&console.log(H,sn)},defaultFileList:[{uid:"1",name:"xxx.png",status:"done",response:"Server Error 500",url:"http://www.baidu.com/xxx.png"},{uid:"2",name:"yyy.png",status:"done",url:"http://www.baidu.com/yyy.png"},{uid:"3",name:"zzz.png",status:"error",response:"Server Error 500",url:"http://www.baidu.com/zzz.png"}]},G=function(){return L.default.createElement(A.Upload,F,L.default.createElement(A.Button,{icon:L.default.createElement(j.UploadOutlined,null)},"Upload"))},z=G;return Z.createElement(z)}}},4801:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u652F\u6301\u4E0A\u4F20\u4E00\u4E2A\u6587\u4EF6\u5939\u91CC\u7684\u6240\u6709\u6587\u4EF6\u3002"]],"en-US":[["p","You can select and upload a whole directory."]]},meta:{order:6,title:{"zh-CN":"\u6587\u4EF6\u5939\u4E0A\u4F20","en-US":"Upload directory"},filename:"components/upload/demo/directory.md",id:"components-upload-demo-directory"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import React from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Upload action<span class="token operator">=</span><span class="token string">"https://www.mocky.io/v2/5cc8019d300000980a055e76"</span> directory<span class="token operator">></span>
    <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Upload Directory<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span> <span class="token attr-name">directory</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload Directory<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span> <span class="token attr-name">directory</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload Directory<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51),j=y(61),A=y(12),L=S(y(0));function S(z){return z&&z.__esModule?z:{default:z}}var F=function(){return L.default.createElement(A.Upload,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",directory:!0},L.default.createElement(A.Button,{icon:L.default.createElement(j.UploadOutlined,null)},"Upload Directory"))},G=F;return Z.createElement(G)}}},4802:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u4F7F\u7528 ",["code","itemRender"]," \uFF0C\u6211\u4EEC\u53EF\u4EE5\u96C6\u6210 react-dnd \u6765\u5B9E\u73B0\u5BF9\u4E0A\u4F20\u5217\u8868\u62D6\u62FD\u6392\u5E8F\u3002"]],"en-US":[["p","By using ",["code","itemRender"],", we can integrate upload with react-dnd to implement drag sorting of uploadList."]]},meta:{order:13,title:{"zh-CN":"\u4E0A\u4F20\u5217\u8868\u62D6\u62FD\u6392\u5E8F","en-US":"Drag sorting of uploadList"},filename:"components/upload/demo/drag-sorting.md",id:"components-upload-demo-drag-sorting"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> Tooltip<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadFile<span class="token punctuation">,</span> UploadProps } from <span class="token string">'antd/es/upload/interface'</span><span class="token comment" spellcheck="true">;</span>
import update from <span class="token string">'immutability-helper'</span><span class="token comment" spellcheck="true">;</span>
import React<span class="token punctuation">,</span> { useCallback<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useState } from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>
import { DndProvider<span class="token punctuation">,</span> useDrag<span class="token punctuation">,</span> useDrop } from <span class="token string">'react-dnd'</span><span class="token comment" spellcheck="true">;</span>
import { HTML5Backend } from <span class="token string">'react-dnd-html5-backend'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token string">'DragableUploadList'</span><span class="token comment" spellcheck="true">;</span>

interface DragableUploadListItemProps {
  originNode<span class="token punctuation">:</span> React<span class="token punctuation">.</span>ReactElement<span class="token operator">&lt;</span>any<span class="token punctuation">,</span> string | React<span class="token punctuation">.</span>JSXElementConstructor<span class="token operator">&lt;</span>any<span class="token operator">></span><span class="token operator">></span><span class="token comment" spellcheck="true">;</span>
  file<span class="token punctuation">:</span> UploadFile<span class="token comment" spellcheck="true">;</span>
  fileList<span class="token punctuation">:</span> UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">;</span>
  moveRow<span class="token punctuation">:</span> <span class="token punctuation">(</span>dragIndex<span class="token punctuation">:</span> any<span class="token punctuation">,</span> hoverIndex<span class="token punctuation">:</span> any<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> void<span class="token comment" spellcheck="true">;</span>
}

<span class="token keyword">const</span> DragableUploadListItem <span class="token operator">=</span> <span class="token punctuation">(</span>{
  originNode<span class="token punctuation">,</span>
  moveRow<span class="token punctuation">,</span>
  file<span class="token punctuation">,</span>
  fileList<span class="token punctuation">,</span>
}<span class="token punctuation">:</span> DragableUploadListItemProps<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
  <span class="token keyword">const</span> ref <span class="token operator">=</span> useRef<span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  <span class="token keyword">const</span> index <span class="token operator">=</span> fileList<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>{ isOver<span class="token punctuation">,</span> dropClassName }<span class="token punctuation">,</span> drop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDrop</span><span class="token punctuation">(</span>{
    accept<span class="token punctuation">:</span> type<span class="token punctuation">,</span>
    collect<span class="token punctuation">:</span> monitor <span class="token operator">=</span><span class="token operator">></span> {
      <span class="token keyword">const</span> { index<span class="token punctuation">:</span> dragIndex } <span class="token operator">=</span> monitor<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> || {}<span class="token comment" spellcheck="true">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>dragIndex <span class="token operator">==</span><span class="token operator">=</span> index<span class="token punctuation">)</span> {
        return {}<span class="token comment" spellcheck="true">;</span>
      }
      return {
        isOver<span class="token punctuation">:</span> monitor<span class="token punctuation">.</span><span class="token function">isOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        dropClassName<span class="token punctuation">:</span> dragIndex <span class="token operator">&lt;</span> index <span class="token operator">?</span> <span class="token string">' drop-over-downward'</span> <span class="token punctuation">:</span> <span class="token string">' drop-over-upward'</span><span class="token punctuation">,</span>
      }<span class="token comment" spellcheck="true">;</span>
    }<span class="token punctuation">,</span>
    drop<span class="token punctuation">:</span> <span class="token punctuation">(</span>item<span class="token punctuation">:</span> any<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
      <span class="token function">moveRow</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>index<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }<span class="token punctuation">,</span>
  }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> drag<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDrag</span><span class="token punctuation">(</span>{
    type<span class="token punctuation">,</span>
    item<span class="token punctuation">:</span> { index }<span class="token punctuation">,</span>
    collect<span class="token punctuation">:</span> monitor <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>{
      isDragging<span class="token punctuation">:</span> monitor<span class="token punctuation">.</span><span class="token function">isDragging</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    }<span class="token punctuation">)</span><span class="token punctuation">,</span>
  }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  <span class="token function">drop</span><span class="token punctuation">(</span><span class="token function">drag</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  <span class="token keyword">const</span> errorNode <span class="token operator">=</span> <span class="token operator">&lt;</span>Tooltip title<span class="token operator">=</span><span class="token string">"Upload Error"</span><span class="token operator">></span>{originNode<span class="token punctuation">.</span>props<span class="token punctuation">.</span>children}<span class="token operator">&lt;</span><span class="token operator">/</span>Tooltip<span class="token operator">></span><span class="token comment" spellcheck="true">;</span>
  return <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div
      ref<span class="token operator">=</span>{ref}
      className<span class="token operator">=</span>{\`ant<span class="token operator">-</span>upload<span class="token operator">-</span>draggable<span class="token operator">-</span>list<span class="token operator">-</span>item \${isOver <span class="token operator">?</span> dropClassName <span class="token punctuation">:</span> <span class="token string">''</span>}\`}
      style<span class="token operator">=</span>{{ cursor<span class="token punctuation">:</span> <span class="token string">'move'</span> }}
    <span class="token operator">></span>
      {file<span class="token punctuation">.</span>status <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'error'</span> <span class="token operator">?</span> errorNode <span class="token punctuation">:</span> originNode}
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
}<span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'image1.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-2'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'image2.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-3'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'image3.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-4'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'image4.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-5'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> moveRow <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>dragIndex<span class="token punctuation">:</span> number<span class="token punctuation">,</span> hoverIndex<span class="token punctuation">:</span> number<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
      <span class="token keyword">const</span> dragRow <span class="token operator">=</span> fileList<span class="token punctuation">[</span>dragIndex<span class="token punctuation">]</span><span class="token comment" spellcheck="true">;</span>
      <span class="token function">setFileList</span><span class="token punctuation">(</span>
        <span class="token function">update</span><span class="token punctuation">(</span>fileList<span class="token punctuation">,</span> {
          <span class="token variable">$splice</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span>dragIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span>hoverIndex<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> dragRow<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        }<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }<span class="token punctuation">,</span>
    <span class="token punctuation">[</span>fileList<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> onChange<span class="token punctuation">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>{ fileList<span class="token punctuation">:</span> newFileList }<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token comment" spellcheck="true">;</span>

  return <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>DndProvider backend<span class="token operator">=</span>{HTML5Backend}<span class="token operator">></span>
      <span class="token operator">&lt;</span>Upload
        action<span class="token operator">=</span><span class="token string">"https://www.mocky.io/v2/5cc8019d300000980a055e76"</span>
        fileList<span class="token operator">=</span>{fileList}
        onChange<span class="token operator">=</span>{onChange}
        itemRender<span class="token operator">=</span>{<span class="token punctuation">(</span>originNode<span class="token punctuation">,</span> file<span class="token punctuation">,</span> currFileList<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>DragableUploadListItem
            originNode<span class="token operator">=</span>{originNode}
            file<span class="token operator">=</span>{file}
            fileList<span class="token operator">=</span>{currFileList}
            moveRow<span class="token operator">=</span>{moveRow}
          <span class="token operator">/</span><span class="token operator">></span>
        <span class="token punctuation">)</span>}
      <span class="token operator">></span>
        <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Click <span class="token keyword">to</span> Upload<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>DndProvider<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
}<span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Tooltip<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadFile<span class="token punctuation">,</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd/es/upload/interface'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> update <span class="token keyword">from</span> <span class="token string">'immutability-helper'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useCallback<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DndProvider<span class="token punctuation">,</span> useDrag<span class="token punctuation">,</span> useDrop <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dnd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> HTML5Backend <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dnd-html5-backend'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token string">'DragableUploadList'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">DragableUploadListItemProps</span> <span class="token punctuation">{</span>
  originNode<span class="token operator">:</span> React<span class="token punctuation">.</span>ReactElement<span class="token operator">&lt;</span>any<span class="token punctuation">,</span> string <span class="token operator">|</span> React<span class="token punctuation">.</span>JSXElementConstructor<span class="token operator">&lt;</span>any<span class="token operator">>></span><span class="token punctuation">;</span>
  file<span class="token operator">:</span> UploadFile<span class="token punctuation">;</span>
  fileList<span class="token operator">:</span> UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function-variable function">moveRow</span><span class="token operator">:</span> <span class="token punctuation">(</span>dragIndex<span class="token operator">:</span> any<span class="token punctuation">,</span> hoverIndex<span class="token operator">:</span> any<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">DragableUploadListItem</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  originNode<span class="token punctuation">,</span>
  moveRow<span class="token punctuation">,</span>
  file<span class="token punctuation">,</span>
  fileList<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token operator">:</span> DragableUploadListItemProps<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> useRef<span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> index <span class="token operator">=</span> fileList<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> isOver<span class="token punctuation">,</span> dropClassName <span class="token punctuation">}</span><span class="token punctuation">,</span> drop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDrop</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    accept<span class="token operator">:</span> type<span class="token punctuation">,</span>
    <span class="token function-variable function">collect</span><span class="token operator">:</span> monitor <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> index<span class="token operator">:</span> dragIndex <span class="token punctuation">}</span> <span class="token operator">=</span> monitor<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>dragIndex <span class="token operator">===</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        isOver<span class="token operator">:</span> monitor<span class="token punctuation">.</span><span class="token function">isOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        dropClassName<span class="token operator">:</span> dragIndex <span class="token operator">&lt;</span> index <span class="token operator">?</span> <span class="token string">' drop-over-downward'</span> <span class="token operator">:</span> <span class="token string">' drop-over-upward'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">drop</span><span class="token operator">:</span> <span class="token punctuation">(</span>item<span class="token operator">:</span> any<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">moveRow</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>index<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> drag<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDrag</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token punctuation">,</span>
    item<span class="token operator">:</span> <span class="token punctuation">{</span> index <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">collect</span><span class="token operator">:</span> monitor <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      isDragging<span class="token operator">:</span> monitor<span class="token punctuation">.</span><span class="token function">isDragging</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">drop</span><span class="token punctuation">(</span><span class="token function">drag</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> errorNode <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tooltip</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Upload Error<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>originNode<span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Tooltip</span></span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
      <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span>
      <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">ant-upload-draggable-list-item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>isOver <span class="token operator">?</span> dropClassName <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">}</span></span>
      <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> cursor<span class="token operator">:</span> <span class="token string">'move'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
    <span class="token punctuation">></span></span>
      <span class="token punctuation">{</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'error'</span> <span class="token operator">?</span> errorNode <span class="token operator">:</span> originNode<span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'image1.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-2'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'image2.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-3'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'image3.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-4'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'image4.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-5'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> moveRow <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>dragIndex<span class="token operator">:</span> number<span class="token punctuation">,</span> hoverIndex<span class="token operator">:</span> number<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> dragRow <span class="token operator">=</span> fileList<span class="token punctuation">[</span>dragIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token function">setFileList</span><span class="token punctuation">(</span>
        <span class="token function">update</span><span class="token punctuation">(</span>fileList<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          $splice<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span>dragIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span>hoverIndex<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> dragRow<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>fileList<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> onChange<span class="token operator">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> fileList<span class="token operator">:</span> newFileList <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DndProvider</span></span> <span class="token attr-name">backend</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>HTML5Backend<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
        <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
        <span class="token attr-name">fileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileList<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span></span>
        <span class="token attr-name">itemRender</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>originNode<span class="token punctuation">,</span> file<span class="token punctuation">,</span> currFileList<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DragableUploadListItem</span></span>
            <span class="token attr-name">originNode</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>originNode<span class="token punctuation">}</span></span>
            <span class="token attr-name">file</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>file<span class="token punctuation">}</span></span>
            <span class="token attr-name">fileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>currFileList<span class="token punctuation">}</span></span>
            <span class="token attr-name">moveRow</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>moveRow<span class="token punctuation">}</span></span>
          <span class="token punctuation">/></span></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Click to Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">DndProvider</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Tooltip<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> update <span class="token keyword">from</span> <span class="token string">'immutability-helper'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useCallback<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DndProvider<span class="token punctuation">,</span> useDrag<span class="token punctuation">,</span> useDrop <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dnd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> HTML5Backend <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dnd-html5-backend'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token string">'DragableUploadList'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">DragableUploadListItem</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> originNode<span class="token punctuation">,</span> moveRow<span class="token punctuation">,</span> file<span class="token punctuation">,</span> fileList <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> index <span class="token operator">=</span> fileList<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> isOver<span class="token punctuation">,</span> dropClassName <span class="token punctuation">}</span><span class="token punctuation">,</span> drop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDrop</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">accept</span><span class="token operator">:</span> type<span class="token punctuation">,</span>
    <span class="token function-variable function">collect</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">monitor</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">index</span><span class="token operator">:</span> dragIndex <span class="token punctuation">}</span> <span class="token operator">=</span> monitor<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>dragIndex <span class="token operator">===</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">isOver</span><span class="token operator">:</span> monitor<span class="token punctuation">.</span><span class="token function">isOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">dropClassName</span><span class="token operator">:</span> dragIndex <span class="token operator">&lt;</span> index <span class="token operator">?</span> <span class="token string">' drop-over-downward'</span> <span class="token operator">:</span> <span class="token string">' drop-over-upward'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">drop</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">moveRow</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>index<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> drag<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDrag</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token punctuation">,</span>
    <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      index<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">collect</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">monitor</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">isDragging</span><span class="token operator">:</span> monitor<span class="token punctuation">.</span><span class="token function">isDragging</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">drop</span><span class="token punctuation">(</span><span class="token function">drag</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> errorNode <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tooltip</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Upload Error<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>originNode<span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Tooltip</span></span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
      <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span>
      <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">ant-upload-draggable-list-item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>isOver <span class="token operator">?</span> dropClassName <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">}</span></span>
      <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
        <span class="token literal-property property">cursor</span><span class="token operator">:</span> <span class="token string">'move'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
    <span class="token punctuation">></span></span>
      <span class="token punctuation">{</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'error'</span> <span class="token operator">?</span> errorNode <span class="token operator">:</span> originNode<span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'image1.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-2'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'image2.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-3'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'image3.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-4'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'image4.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-5'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> moveRow <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">dragIndex<span class="token punctuation">,</span> hoverIndex</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> dragRow <span class="token operator">=</span> fileList<span class="token punctuation">[</span>dragIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token function">setFileList</span><span class="token punctuation">(</span>
        <span class="token function">update</span><span class="token punctuation">(</span>fileList<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">$splice</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span>dragIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span>hoverIndex<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> dragRow<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>fileList<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">fileList</span><span class="token operator">:</span> newFileList <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DndProvider</span></span> <span class="token attr-name">backend</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>HTML5Backend<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
        <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
        <span class="token attr-name">fileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileList<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span></span>
        <span class="token attr-name">itemRender</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">originNode<span class="token punctuation">,</span> file<span class="token punctuation">,</span> currFileList</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DragableUploadListItem</span></span>
            <span class="token attr-name">originNode</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>originNode<span class="token punctuation">}</span></span>
            <span class="token attr-name">file</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>file<span class="token punctuation">}</span></span>
            <span class="token attr-name">fileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>currFileList<span class="token punctuation">}</span></span>
            <span class="token attr-name">moveRow</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>moveRow<span class="token punctuation">}</span></span>
          <span class="token punctuation">/></span></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Click to Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">DndProvider</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51);function j(s){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},j(s)}var A=y(61),L=y(12),S=H(y(4074)),F=M(y(0)),G=y(4078),z=y(4079);function x(s){if(typeof WeakMap!="function")return null;var r=new WeakMap,l=new WeakMap;return(x=function(h){return h?l:r})(s)}function M(s,r){if(!r&&s&&s.__esModule)return s;if(s===null||j(s)!=="object"&&typeof s!="function")return{default:s};var l=x(r);if(l&&l.has(s))return l.get(s);var g={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in s)if(v!=="default"&&Object.prototype.hasOwnProperty.call(s,v)){var C=h?Object.getOwnPropertyDescriptor(s,v):null;C&&(C.get||C.set)?Object.defineProperty(g,v,C):g[v]=s[v]}return g.default=s,l&&l.set(s,g),g}function H(s){return s&&s.__esModule?s:{default:s}}function sn(s,r){return mn(s)||fn(s,r)||Q(s,r)||yn()}function yn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q(s,r){if(!!s){if(typeof s=="string")return un(s,r);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return un(s,r)}}function un(s,r){(r==null||r>s.length)&&(r=s.length);for(var l=0,g=new Array(r);l<r;l++)g[l]=s[l];return g}function fn(s,r){var l=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(l!=null){var g=[],h=!0,v=!1,C,D;try{for(l=l.call(s);!(h=(C=l.next()).done)&&(g.push(C.value),!(r&&g.length===r));h=!0);}catch(I){v=!0,D=I}finally{try{!h&&l.return!=null&&l.return()}finally{if(v)throw D}}return g}}function mn(s){if(Array.isArray(s))return s}var B="DragableUploadList",$=function(r){var l=r.originNode,g=r.moveRow,h=r.file,v=r.fileList,C=(0,F.useRef)(null),D=v.indexOf(h),I=(0,G.useDrop)({accept:B,collect:function(en){var tn=en.getItem()||{},nn=tn.index;return nn===D?{}:{isOver:en.isOver(),dropClassName:nn<D?" drop-over-downward":" drop-over-upward"}},drop:function(en){g(en.index,D)}}),T=sn(I,2),V=T[0],cn=V.isOver,K=V.dropClassName,kn=T[1],wn=(0,G.useDrag)({type:B,item:{index:D},collect:function(en){return{isDragging:en.isDragging()}}}),hn=sn(wn,2),an=hn[1];kn(an(C));var rn=F.default.createElement(L.Tooltip,{title:"Upload Error"},l.props.children);return F.default.createElement("div",{ref:C,className:"ant-upload-draggable-list-item ".concat(cn?K:""),style:{cursor:"move"}},h.status==="error"?rn:l)},e=function(){var r=(0,F.useState)([{uid:"-1",name:"image1.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-2",name:"image2.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-3",name:"image3.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-4",name:"image4.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-5",name:"image.png",status:"error"}]),l=sn(r,2),g=l[0],h=l[1],v=(0,F.useCallback)(function(D,I){var T=g[D];h((0,S.default)(g,{$splice:[[D,1],[I,0,T]]}))},[g]),C=function(I){var T=I.fileList;h(T)};return F.default.createElement(G.DndProvider,{backend:z.HTML5Backend},F.default.createElement(L.Upload,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",fileList:g,onChange:C,itemRender:function(I,T,V){return F.default.createElement($,{originNode:I,file:T,fileList:V,moveRow:v})}},F.default.createElement(L.Button,{icon:F.default.createElement(A.UploadOutlined,null)},"Click to Upload")))},a=e;return Z.createElement(a)},style:`#components-upload-demo-drag-sorting .ant-upload-draggable-list-item {
  border-top: 2px dashed rgba(0, 0, 0, 0);
  border-bottom: 2px dashed rgba(0, 0, 0, 0);
}
#components-upload-demo-drag-sorting .ant-upload-draggable-list-item.drop-over-downward {
  border-bottom-color: #1890ff;
}
#components-upload-demo-drag-sorting .ant-upload-draggable-list-item.drop-over-upward {
  border-top-color: #1890ff;
}`,highlightedStyle:`<span class="token selector"><span class="token id">#components-upload-demo-drag-sorting</span> <span class="token class">.ant-upload-draggable-list-item</span> </span><span class="token punctuation">{</span>
  <span class="token property">border-top</span><span class="token punctuation">:</span> <span class="token number">2</span>px dashed <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-bottom</span><span class="token punctuation">:</span> <span class="token number">2</span>px dashed <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token id">#components-upload-demo-drag-sorting</span> <span class="token class">.ant-upload-draggable-list-item.drop-over-downward</span> </span><span class="token punctuation">{</span>
  <span class="token property">border-bottom-color</span><span class="token punctuation">:</span> <span class="token hexcode">#1890ff</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token id">#components-upload-demo-drag-sorting</span> <span class="token class">.ant-upload-draggable-list-item.drop-over-upward</span> </span><span class="token punctuation">{</span>
  <span class="token property">border-top-color</span><span class="token punctuation">:</span> <span class="token hexcode">#1890ff</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>`}},4803:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u628A\u6587\u4EF6\u62D6\u5165\u6307\u5B9A\u533A\u57DF\uFF0C\u5B8C\u6210\u4E0A\u4F20\uFF0C\u540C\u6837\u652F\u6301\u70B9\u51FB\u4E0A\u4F20\u3002"],["p","\u8BBE\u7F6E ",["code","multiple"]," \u540E\uFF0C\u5728 ",["code","IE10+"]," \u53EF\u4EE5\u4E00\u6B21\u4E0A\u4F20\u591A\u4E2A\u6587\u4EF6\u3002"]],"en-US":[["p","You can drag files to a specific area, to upload. Alternatively, you can also upload by selecting."],["p","We can upload serveral files at once in modern browsers by giving the input the ",["code","multiple"]," attribute."]]},meta:{order:5,title:{"zh-CN":"\u62D6\u62FD\u4E0A\u4F20","en-US":"Drag and Drop"},filename:"components/upload/demo/drag.md",id:"components-upload-demo-drag"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { InboxOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadProps } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import { message<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import React from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> { Dragger } <span class="token operator">=</span> Upload<span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> props<span class="token punctuation">:</span> UploadProps <span class="token operator">=</span> {
  name<span class="token punctuation">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
  multiple<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  action<span class="token punctuation">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> {
    <span class="token keyword">const</span> { status } <span class="token operator">=</span> info<span class="token punctuation">.</span>file<span class="token comment" spellcheck="true">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>status !<span class="token operator">==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> {
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">,</span> info<span class="token punctuation">.</span>fileList<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
    <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'done'</span><span class="token punctuation">)</span> {
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>\`\${info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name} file uploaded successfully<span class="token punctuation">.</span>\`<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    } <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'error'</span><span class="token punctuation">)</span> {
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>\`\${info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name} file upload failed<span class="token punctuation">.</span>\`<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
  }<span class="token punctuation">,</span>
  <span class="token function">onDrop</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> {
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Dropped files'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token punctuation">,</span>
}<span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Dragger {<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>props}<span class="token operator">></span>
    <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"ant-upload-drag-icon"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>InboxOutlined <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"ant-upload-text"</span><span class="token operator">></span>Click <span class="token operator">or</span> drag file <span class="token keyword">to</span> this area <span class="token keyword">to</span> upload<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"ant-upload-hint"</span><span class="token operator">></span>
      Support <span class="token keyword">for</span> a single <span class="token operator">or</span> bulk upload<span class="token punctuation">.</span> Strictly prohibit from uploading company data <span class="token operator">or</span> other
      band files
    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Dragger<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> InboxOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> Dragger <span class="token punctuation">}</span> <span class="token operator">=</span> Upload<span class="token punctuation">;</span>

<span class="token keyword">const</span> props<span class="token operator">:</span> UploadProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
  multiple<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  action<span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> status <span class="token punctuation">}</span> <span class="token operator">=</span> info<span class="token punctuation">.</span>file<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">!==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">,</span> info<span class="token punctuation">.</span>fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token string">'done'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> file uploaded successfully.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token string">'error'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> file upload failed.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onDrop</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Dropped files'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Dragger</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ant-upload-drag-icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">InboxOutlined</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ant-upload-text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Click or drag file to <span class="token keyword">this</span> area to upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ant-upload-hint<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      Support <span class="token keyword">for</span> a single or bulk upload<span class="token punctuation">.</span> Strictly prohibit from uploading company data or other
      band files
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Dragger</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> InboxOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Dragger <span class="token punctuation">}</span> <span class="token operator">=</span> Upload<span class="token punctuation">;</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">multiple</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> status <span class="token punctuation">}</span> <span class="token operator">=</span> info<span class="token punctuation">.</span>file<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">!==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">,</span> info<span class="token punctuation">.</span>fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token string">'done'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> file uploaded successfully.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token string">'error'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> file upload failed.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onDrop</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Dropped files'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Dragger</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ant-upload-drag-icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">InboxOutlined</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ant-upload-text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Click or drag file to <span class="token keyword">this</span> area to upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ant-upload-hint<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      Support <span class="token keyword">for</span> a single or bulk upload<span class="token punctuation">.</span> Strictly prohibit from uploading company data or other
      band files
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Dragger</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51),j=y(61),A=y(12),L=S(y(0));function S(M){return M&&M.__esModule?M:{default:M}}var F=A.Upload.Dragger,G={name:"file",multiple:!0,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",onChange:function(H){var sn=H.file.status;sn!=="uploading"&&console.log(H.file,H.fileList),sn==="done"?A.message.success("".concat(H.file.name," file uploaded successfully.")):sn==="error"&&A.message.error("".concat(H.file.name," file upload failed."))},onDrop:function(H){console.log("Dropped files",H.dataTransfer.files)}},z=function(){return L.default.createElement(F,G,L.default.createElement("p",{className:"ant-upload-drag-icon"},L.default.createElement(j.InboxOutlined,null)),L.default.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),L.default.createElement("p",{className:"ant-upload-hint"},"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"))},x=z;return Z.createElement(x)}}},4804:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u6839\u636E\u7C7B\u578B\u9ED8\u8BA4\u663E\u793A\u5BF9\u5E94 icon"]],"en-US":[["p","Displays the corresponding by default by type icon"]]},meta:{order:12,debug:!0,title:{"zh-CN":"\u81EA\u5B9A\u4E49\u663E\u793A icon","en-US":"custom show icon"},filename:"components/upload/demo/file-type.md",id:"components-upload-demo-file-type"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import {
  FileExcelTwoTone<span class="token punctuation">,</span>
  FilePdfTwoTone<span class="token punctuation">,</span>
  FileWordTwoTone<span class="token punctuation">,</span>
  LoadingOutlined<span class="token punctuation">,</span>
  PaperClipOutlined<span class="token punctuation">,</span>
  PictureTwoTone<span class="token punctuation">,</span>
  PlusOutlined<span class="token punctuation">,</span>
} from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import { Modal<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import type { RcFile<span class="token punctuation">,</span> UploadFile<span class="token punctuation">,</span> UploadProps } from <span class="token string">'antd/es/upload/interface'</span><span class="token comment" spellcheck="true">;</span>
import React<span class="token punctuation">,</span> { useState } from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> getBase64 <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token punctuation">:</span> RcFile<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token operator">=</span><span class="token operator">></span>
  new <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    <span class="token keyword">const</span> reader <span class="token operator">=</span> new <span class="token function">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    reader<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">resolve</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result as string<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    reader<span class="token punctuation">.</span>onerror <span class="token operator">=</span> error <span class="token operator">=</span><span class="token operator">></span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewOpen<span class="token punctuation">,</span> setPreviewOpen<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewImage<span class="token punctuation">,</span> setPreviewImage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-2'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'pdf.pdf'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'http://cdn07.foxitsoftware.cn/pub/foxit/cpdf/FoxitCompanyProfile.pdf'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-3'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'doc.doc'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.doc'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-4'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-5'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'pdf.pdf'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-6'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'doc.doc'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> handleCancel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">setPreviewOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> handlePreview <span class="token operator">=</span> async <span class="token punctuation">(</span>file<span class="token punctuation">:</span> UploadFile<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    <span class="token keyword">if</span> <span class="token punctuation">(</span>!file<span class="token punctuation">.</span>url <span class="token operator">&amp;</span><span class="token operator">&amp;</span> !file<span class="token punctuation">.</span>preview<span class="token punctuation">)</span> {
      file<span class="token punctuation">.</span>preview <span class="token operator">=</span> await <span class="token function">getBase64</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>originFileObj as RcFile<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }

    <span class="token function">setPreviewOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    <span class="token function">setPreviewImage</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>url || <span class="token punctuation">(</span>file<span class="token punctuation">.</span>preview as string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> handleChange<span class="token punctuation">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>{ fileList<span class="token punctuation">:</span> newFileList }<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
    <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> handleIconRender<span class="token punctuation">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'iconRender'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token punctuation">,</span> listType<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    <span class="token keyword">const</span> fileSufIconList <span class="token operator">=</span> <span class="token punctuation">[</span>
      { type<span class="token punctuation">:</span> <span class="token operator">&lt;</span>FilePdfTwoTone <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> suf<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.pdf'</span><span class="token punctuation">]</span> }<span class="token punctuation">,</span>
      { type<span class="token punctuation">:</span> <span class="token operator">&lt;</span>FileExcelTwoTone <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> suf<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.xlsx'</span><span class="token punctuation">,</span> <span class="token string">'.xls'</span><span class="token punctuation">,</span> <span class="token string">'.csv'</span><span class="token punctuation">]</span> }<span class="token punctuation">,</span>
      { type<span class="token punctuation">:</span> <span class="token operator">&lt;</span>FileWordTwoTone <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> suf<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.doc'</span><span class="token punctuation">,</span> <span class="token string">'.docx'</span><span class="token punctuation">]</span> }<span class="token punctuation">,</span>
      {
        type<span class="token punctuation">:</span> <span class="token operator">&lt;</span>PictureTwoTone <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>
        suf<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.webp'</span><span class="token punctuation">,</span> <span class="token string">'.svg'</span><span class="token punctuation">,</span> <span class="token string">'.png'</span><span class="token punctuation">,</span> <span class="token string">'.gif'</span><span class="token punctuation">,</span> <span class="token string">'.jpg'</span><span class="token punctuation">,</span> <span class="token string">'.jpeg'</span><span class="token punctuation">,</span> <span class="token string">'.jfif'</span><span class="token punctuation">,</span> <span class="token string">'.bmp'</span><span class="token punctuation">,</span> <span class="token string">'.dpg'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      }<span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token comment" spellcheck="true">;</span>
    <span class="token operator">/</span><span class="token operator">/</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> file<span class="token punctuation">,</span> listType<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    let icon <span class="token operator">=</span> file<span class="token punctuation">.</span>status <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'uploading'</span> <span class="token operator">?</span> <span class="token operator">&lt;</span>LoadingOutlined <span class="token operator">/</span><span class="token operator">></span> <span class="token punctuation">:</span> <span class="token operator">&lt;</span>PaperClipOutlined <span class="token operator">/</span><span class="token operator">></span><span class="token comment" spellcheck="true">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>listType <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'picture'</span> || listType <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'picture-card'</span><span class="token punctuation">)</span> {
      <span class="token keyword">if</span> <span class="token punctuation">(</span>listType <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'picture-card'</span> <span class="token operator">&amp;</span><span class="token operator">&amp;</span> file<span class="token punctuation">.</span>status <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> {
        icon <span class="token operator">=</span> <span class="token operator">&lt;</span>LoadingOutlined <span class="token operator">/</span><span class="token operator">></span><span class="token comment" spellcheck="true">; // or icon = 'uploading...';</span>
      } <span class="token keyword">else</span> {
        fileSufIconList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">></span> {
          <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>suf<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> {
            icon <span class="token operator">=</span> item<span class="token punctuation">.</span>type<span class="token comment" spellcheck="true">;</span>
          }
        }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
      }
    }
    return icon<span class="token comment" spellcheck="true">;</span>
  }<span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> uploadButton <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>PlusOutlined <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span>{{ marginTop<span class="token punctuation">:</span> <span class="token number">8</span> }}<span class="token operator">></span>Upload<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  return <span class="token punctuation">(</span>
    <span class="token operator">&lt;></span>
      <span class="token operator">&lt;</span>Upload
        action<span class="token operator">=</span><span class="token string">"https://www.mocky.io/v2/5cc8019d300000980a055e76"</span>
        listType<span class="token operator">=</span><span class="token string">"picture-card"</span>
        fileList<span class="token operator">=</span>{fileList}
        onPreview<span class="token operator">=</span>{handlePreview}
        onChange<span class="token operator">=</span>{handleChange}
        iconRender<span class="token operator">=</span>{handleIconRender}
      <span class="token operator">></span>
        {fileList<span class="token punctuation">.</span>length <span class="token operator">>=</span> <span class="token number">8</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token punctuation">:</span> uploadButton}
      <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
      <span class="token operator">&lt;</span>Modal open<span class="token operator">=</span>{previewOpen} footer<span class="token operator">=</span>{<span class="token keyword">null</span>} onCancel<span class="token operator">=</span>{handleCancel}<span class="token operator">></span>
        <span class="token operator">&lt;</span>img alt<span class="token operator">=</span><span class="token string">"example"</span> style<span class="token operator">=</span>{{ width<span class="token punctuation">:</span> <span class="token string">'100%'</span> }} src<span class="token operator">=</span>{previewImage} <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Modal<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
}<span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span>
  FileExcelTwoTone<span class="token punctuation">,</span>
  FilePdfTwoTone<span class="token punctuation">,</span>
  FileWordTwoTone<span class="token punctuation">,</span>
  LoadingOutlined<span class="token punctuation">,</span>
  PaperClipOutlined<span class="token punctuation">,</span>
  PictureTwoTone<span class="token punctuation">,</span>
  PlusOutlined<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Modal<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> RcFile<span class="token punctuation">,</span> UploadFile<span class="token punctuation">,</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd/es/upload/interface'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> getBase64 <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token operator">:</span> RcFile<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token operator">=></span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result <span class="token keyword">as</span> string<span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> error <span class="token operator">=></span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewOpen<span class="token punctuation">,</span> setPreviewOpen<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewImage<span class="token punctuation">,</span> setPreviewImage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-2'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'pdf.pdf'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'http://cdn07.foxitsoftware.cn/pub/foxit/cpdf/FoxitCompanyProfile.pdf'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-3'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'doc.doc'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.doc'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-4'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-5'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'pdf.pdf'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-6'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'doc.doc'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleCancel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setPreviewOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handlePreview</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>file<span class="token operator">:</span> UploadFile<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span>url <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>file<span class="token punctuation">.</span>preview<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      file<span class="token punctuation">.</span>preview <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getBase64</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>originFileObj <span class="token keyword">as</span> RcFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">setPreviewOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setPreviewImage</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>url <span class="token operator">||</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>preview <span class="token keyword">as</span> string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> handleChange<span class="token operator">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> fileList<span class="token operator">:</span> newFileList <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> handleIconRender<span class="token operator">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'iconRender'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token punctuation">,</span> listType<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fileSufIconList <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FilePdfTwoTone</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span> suf<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.pdf'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FileExcelTwoTone</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span> suf<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.xlsx'</span><span class="token punctuation">,</span> <span class="token string">'.xls'</span><span class="token punctuation">,</span> <span class="token string">'.csv'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FileWordTwoTone</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span> suf<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.doc'</span><span class="token punctuation">,</span> <span class="token string">'.docx'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PictureTwoTone</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span>
        suf<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.webp'</span><span class="token punctuation">,</span> <span class="token string">'.svg'</span><span class="token punctuation">,</span> <span class="token string">'.png'</span><span class="token punctuation">,</span> <span class="token string">'.gif'</span><span class="token punctuation">,</span> <span class="token string">'.jpg'</span><span class="token punctuation">,</span> <span class="token string">'.jpeg'</span><span class="token punctuation">,</span> <span class="token string">'.jfif'</span><span class="token punctuation">,</span> <span class="token string">'.bmp'</span><span class="token punctuation">,</span> <span class="token string">'.dpg'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(1, file, listType);</span>
    <span class="token keyword">let</span> icon <span class="token operator">=</span> file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'uploading'</span> <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoadingOutlined</span></span> <span class="token punctuation">/></span></span> <span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PaperClipOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>listType <span class="token operator">===</span> <span class="token string">'picture'</span> <span class="token operator">||</span> listType <span class="token operator">===</span> <span class="token string">'picture-card'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>listType <span class="token operator">===</span> <span class="token string">'picture-card'</span> <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        icon <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoadingOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span> <span class="token comment">// or icon = 'uploading...';</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fileSufIconList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>suf<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            icon <span class="token operator">=</span> item<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> icon<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> uploadButton <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlusOutlined</span></span> <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginTop<span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
        <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
        <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-card<span class="token punctuation">"</span></span>
        <span class="token attr-name">fileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileList<span class="token punctuation">}</span></span>
        <span class="token attr-name">onPreview</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handlePreview<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span></span>
        <span class="token attr-name">iconRender</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleIconRender<span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span>
        <span class="token punctuation">{</span>fileList<span class="token punctuation">.</span>length <span class="token operator">>=</span> <span class="token number">8</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> uploadButton<span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span> <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>previewOpen<span class="token punctuation">}</span></span> <span class="token attr-name">footer</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">null</span><span class="token punctuation">}</span></span> <span class="token attr-name">onCancel</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleCancel<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>example<span class="token punctuation">"</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token string">'100%'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>previewImage<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Modal</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span>
  FileExcelTwoTone<span class="token punctuation">,</span>
  FilePdfTwoTone<span class="token punctuation">,</span>
  FileWordTwoTone<span class="token punctuation">,</span>
  LoadingOutlined<span class="token punctuation">,</span>
  PaperClipOutlined<span class="token punctuation">,</span>
  PictureTwoTone<span class="token punctuation">,</span>
  PlusOutlined<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Modal<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">getBase64</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewOpen<span class="token punctuation">,</span> setPreviewOpen<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewImage<span class="token punctuation">,</span> setPreviewImage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-2'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'pdf.pdf'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://cdn07.foxitsoftware.cn/pub/foxit/cpdf/FoxitCompanyProfile.pdf'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-3'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'doc.doc'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.doc'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-4'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-5'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'pdf.pdf'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-6'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'doc.doc'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleCancel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setPreviewOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handlePreview</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span>url <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>file<span class="token punctuation">.</span>preview<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      file<span class="token punctuation">.</span>preview <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getBase64</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>originFileObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setPreviewOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setPreviewImage</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>url <span class="token operator">||</span> file<span class="token punctuation">.</span>preview<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">fileList</span><span class="token operator">:</span> newFileList <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleIconRender</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> listType</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fileSufIconList <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FilePdfTwoTone</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">suf</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.pdf'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FileExcelTwoTone</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">suf</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.xlsx'</span><span class="token punctuation">,</span> <span class="token string">'.xls'</span><span class="token punctuation">,</span> <span class="token string">'.csv'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FileWordTwoTone</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">suf</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.doc'</span><span class="token punctuation">,</span> <span class="token string">'.docx'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PictureTwoTone</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">suf</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.webp'</span><span class="token punctuation">,</span> <span class="token string">'.svg'</span><span class="token punctuation">,</span> <span class="token string">'.png'</span><span class="token punctuation">,</span> <span class="token string">'.gif'</span><span class="token punctuation">,</span> <span class="token string">'.jpg'</span><span class="token punctuation">,</span> <span class="token string">'.jpeg'</span><span class="token punctuation">,</span> <span class="token string">'.jfif'</span><span class="token punctuation">,</span> <span class="token string">'.bmp'</span><span class="token punctuation">,</span> <span class="token string">'.dpg'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(1, file, listType);</span>
    <span class="token keyword">let</span> icon <span class="token operator">=</span> file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'uploading'</span> <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoadingOutlined</span></span> <span class="token punctuation">/></span></span> <span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PaperClipOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>listType <span class="token operator">===</span> <span class="token string">'picture'</span> <span class="token operator">||</span> listType <span class="token operator">===</span> <span class="token string">'picture-card'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>listType <span class="token operator">===</span> <span class="token string">'picture-card'</span> <span class="token operator">&amp;&amp;</span> file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        icon <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoadingOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span> <span class="token comment">// or icon = 'uploading...';</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fileSufIconList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>suf<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            icon <span class="token operator">=</span> item<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> icon<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> uploadButton <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlusOutlined</span></span> <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span>
        Upload
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
        <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
        <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-card<span class="token punctuation">"</span></span>
        <span class="token attr-name">fileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileList<span class="token punctuation">}</span></span>
        <span class="token attr-name">onPreview</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handlePreview<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span></span>
        <span class="token attr-name">iconRender</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleIconRender<span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span>
        <span class="token punctuation">{</span>fileList<span class="token punctuation">.</span>length <span class="token operator">>=</span> <span class="token number">8</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> uploadButton<span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span> <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>previewOpen<span class="token punctuation">}</span></span> <span class="token attr-name">footer</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">null</span><span class="token punctuation">}</span></span> <span class="token attr-name">onCancel</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleCancel<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
          <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>example<span class="token punctuation">"</span></span>
          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>previewImage<span class="token punctuation">}</span></span>
        <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Modal</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51);function j(e){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},j(e)}var A=y(61),L=y(12),S=G(y(0));function F(e){if(typeof WeakMap!="function")return null;var a=new WeakMap,s=new WeakMap;return(F=function(l){return l?s:a})(e)}function G(e,a){if(!a&&e&&e.__esModule)return e;if(e===null||j(e)!=="object"&&typeof e!="function")return{default:e};var s=F(a);if(s&&s.has(e))return s.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in e)if(g!=="default"&&Object.prototype.hasOwnProperty.call(e,g)){var h=l?Object.getOwnPropertyDescriptor(e,g):null;h&&(h.get||h.set)?Object.defineProperty(r,g,h):r[g]=e[g]}return r.default=e,s&&s.set(e,r),r}function z(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */z=function(){return e};var e={},a=Object.prototype,s=a.hasOwnProperty,r=Object.defineProperty||function(d,o,u){d[o]=u.value},l=typeof Symbol=="function"?Symbol:{},g=l.iterator||"@@iterator",h=l.asyncIterator||"@@asyncIterator",v=l.toStringTag||"@@toStringTag";function C(d,o,u){return Object.defineProperty(d,o,{value:u,enumerable:!0,configurable:!0,writable:!0}),d[o]}try{C({},"")}catch(d){C=function(u,w,m){return u[w]=m}}function D(d,o,u,w){var m=o&&o.prototype instanceof V?o:V,k=Object.create(m.prototype),b=new Un(w||[]);return r(k,"_invoke",{value:en(d,u,b)}),k}function I(d,o,u){try{return{type:"normal",arg:d.call(o,u)}}catch(w){return{type:"throw",arg:w}}}e.wrap=D;var T={};function V(){}function cn(){}function K(){}var kn={};C(kn,g,function(){return this});var wn=Object.getPrototypeOf,hn=wn&&wn(wn(bn([])));hn&&hn!==a&&s.call(hn,g)&&(kn=hn);var an=K.prototype=V.prototype=Object.create(kn);function rn(d){["next","throw","return"].forEach(function(o){C(d,o,function(u){return this._invoke(o,u)})})}function Y(d,o){function u(m,k,b,R){var E=I(d[m],d,k);if(E.type!=="throw"){var W=E.arg,X=W.value;return X&&j(X)=="object"&&s.call(X,"__await")?o.resolve(X.__await).then(function(on){u("next",on,b,R)},function(on){u("throw",on,b,R)}):o.resolve(X).then(function(on){W.value=on,b(W)},function(on){return u("throw",on,b,R)})}R(E.arg)}var w;r(this,"_invoke",{value:function(k,b){function R(){return new o(function(E,W){u(k,b,E,W)})}return w=w?w.then(R,R):R()}})}function en(d,o,u){var w="suspendedStart";return function(m,k){if(w==="executing")throw new Error("Generator is already running");if(w==="completed"){if(m==="throw")throw k;return jn()}for(u.method=m,u.arg=k;;){var b=u.delegate;if(b){var R=tn(b,u);if(R){if(R===T)continue;return R}}if(u.method==="next")u.sent=u._sent=u.arg;else if(u.method==="throw"){if(w==="suspendedStart")throw w="completed",u.arg;u.dispatchException(u.arg)}else u.method==="return"&&u.abrupt("return",u.arg);w="executing";var E=I(d,o,u);if(E.type==="normal"){if(w=u.done?"completed":"suspendedYield",E.arg===T)continue;return{value:E.arg,done:u.done}}E.type==="throw"&&(w="completed",u.method="throw",u.arg=E.arg)}}}function tn(d,o){var u=d.iterator[o.method];if(u===void 0){if(o.delegate=null,o.method==="throw"){if(d.iterator.return&&(o.method="return",o.arg=void 0,tn(d,o),o.method==="throw"))return T;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var w=I(u,d.iterator,o.arg);if(w.type==="throw")return o.method="throw",o.arg=w.arg,o.delegate=null,T;var m=w.arg;return m?m.done?(o[d.resultName]=m.value,o.next=d.nextLoc,o.method!=="return"&&(o.method="next",o.arg=void 0),o.delegate=null,T):m:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,T)}function nn(d){var o={tryLoc:d[0]};1 in d&&(o.catchLoc=d[1]),2 in d&&(o.finallyLoc=d[2],o.afterLoc=d[3]),this.tryEntries.push(o)}function Cn(d){var o=d.completion||{};o.type="normal",delete o.arg,d.completion=o}function Un(d){this.tryEntries=[{tryLoc:"root"}],d.forEach(nn,this),this.reset(!0)}function bn(d){if(d){var o=d[g];if(o)return o.call(d);if(typeof d.next=="function")return d;if(!isNaN(d.length)){var u=-1,w=function m(){for(;++u<d.length;)if(s.call(d,u))return m.value=d[u],m.done=!1,m;return m.value=void 0,m.done=!0,m};return w.next=w}}return{next:jn}}function jn(){return{value:void 0,done:!0}}return cn.prototype=K,r(an,"constructor",{value:K,configurable:!0}),r(K,"constructor",{value:cn,configurable:!0}),cn.displayName=C(K,v,"GeneratorFunction"),e.isGeneratorFunction=function(d){var o=typeof d=="function"&&d.constructor;return!!o&&(o===cn||(o.displayName||o.name)==="GeneratorFunction")},e.mark=function(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,K):(d.__proto__=K,C(d,v,"GeneratorFunction")),d.prototype=Object.create(an),d},e.awrap=function(d){return{__await:d}},rn(Y.prototype),C(Y.prototype,h,function(){return this}),e.AsyncIterator=Y,e.async=function(d,o,u,w,m){m===void 0&&(m=Promise);var k=new Y(D(d,o,u,w),m);return e.isGeneratorFunction(o)?k:k.next().then(function(b){return b.done?b.value:k.next()})},rn(an),C(an,v,"Generator"),C(an,g,function(){return this}),C(an,"toString",function(){return"[object Generator]"}),e.keys=function(d){var o=Object(d),u=[];for(var w in o)u.push(w);return u.reverse(),function m(){for(;u.length;){var k=u.pop();if(k in o)return m.value=k,m.done=!1,m}return m.done=!0,m}},e.values=bn,Un.prototype={constructor:Un,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Cn),!o)for(var u in this)u.charAt(0)==="t"&&s.call(this,u)&&!isNaN(+u.slice(1))&&(this[u]=void 0)},stop:function(){this.done=!0;var o=this.tryEntries[0].completion;if(o.type==="throw")throw o.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var u=this;function w(W,X){return b.type="throw",b.arg=o,u.next=W,X&&(u.method="next",u.arg=void 0),!!X}for(var m=this.tryEntries.length-1;m>=0;--m){var k=this.tryEntries[m],b=k.completion;if(k.tryLoc==="root")return w("end");if(k.tryLoc<=this.prev){var R=s.call(k,"catchLoc"),E=s.call(k,"finallyLoc");if(R&&E){if(this.prev<k.catchLoc)return w(k.catchLoc,!0);if(this.prev<k.finallyLoc)return w(k.finallyLoc)}else if(R){if(this.prev<k.catchLoc)return w(k.catchLoc,!0)}else{if(!E)throw new Error("try statement without catch or finally");if(this.prev<k.finallyLoc)return w(k.finallyLoc)}}}},abrupt:function(o,u){for(var w=this.tryEntries.length-1;w>=0;--w){var m=this.tryEntries[w];if(m.tryLoc<=this.prev&&s.call(m,"finallyLoc")&&this.prev<m.finallyLoc){var k=m;break}}k&&(o==="break"||o==="continue")&&k.tryLoc<=u&&u<=k.finallyLoc&&(k=null);var b=k?k.completion:{};return b.type=o,b.arg=u,k?(this.method="next",this.next=k.finallyLoc,T):this.complete(b)},complete:function(o,u){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&u&&(this.next=u),T},finish:function(o){for(var u=this.tryEntries.length-1;u>=0;--u){var w=this.tryEntries[u];if(w.finallyLoc===o)return this.complete(w.completion,w.afterLoc),Cn(w),T}},catch:function(o){for(var u=this.tryEntries.length-1;u>=0;--u){var w=this.tryEntries[u];if(w.tryLoc===o){var m=w.completion;if(m.type==="throw"){var k=m.arg;Cn(w)}return k}}throw new Error("illegal catch attempt")},delegateYield:function(o,u,w){return this.delegate={iterator:bn(o),resultName:u,nextLoc:w},this.method==="next"&&(this.arg=void 0),T}},e}function x(e,a,s,r,l,g,h){try{var v=e[g](h),C=v.value}catch(D){s(D);return}v.done?a(C):Promise.resolve(C).then(r,l)}function M(e){return function(){var a=this,s=arguments;return new Promise(function(r,l){var g=e.apply(a,s);function h(C){x(g,r,l,h,v,"next",C)}function v(C){x(g,r,l,h,v,"throw",C)}h(void 0)})}}function H(e,a){return fn(e)||un(e,a)||yn(e,a)||sn()}function sn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yn(e,a){if(!!e){if(typeof e=="string")return Q(e,a);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Q(e,a)}}function Q(e,a){(a==null||a>e.length)&&(a=e.length);for(var s=0,r=new Array(a);s<a;s++)r[s]=e[s];return r}function un(e,a){var s=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var r=[],l=!0,g=!1,h,v;try{for(s=s.call(e);!(l=(h=s.next()).done)&&(r.push(h.value),!(a&&r.length===a));l=!0);}catch(C){g=!0,v=C}finally{try{!l&&s.return!=null&&s.return()}finally{if(g)throw v}}return r}}function fn(e){if(Array.isArray(e))return e}var mn=function(a){return new Promise(function(s,r){var l=new FileReader;l.readAsDataURL(a),l.onload=function(){return s(l.result)},l.onerror=function(g){return r(g)}})},B=function(){var a=(0,S.useState)(!1),s=H(a,2),r=s[0],l=s[1],g=(0,S.useState)(""),h=H(g,2),v=h[0],C=h[1],D=(0,S.useState)([{uid:"-2",name:"pdf.pdf",status:"done",url:"http://cdn07.foxitsoftware.cn/pub/foxit/cpdf/FoxitCompanyProfile.pdf"},{uid:"-3",name:"doc.doc",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.doc"},{uid:"-4",name:"image.png",status:"error"},{uid:"-5",name:"pdf.pdf",status:"error"},{uid:"-6",name:"doc.doc",status:"error"}]),I=H(D,2),T=I[0],V=I[1],cn=function(){return l(!1)},K=function(){var an=M(z().mark(function rn(Y){return z().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:if(!(!Y.url&&!Y.preview)){tn.next=4;break}return tn.next=3,mn(Y.originFileObj);case 3:Y.preview=tn.sent;case 4:l(!0),C(Y.url||Y.preview);case 6:case"end":return tn.stop()}},rn)}));return function(Y){return an.apply(this,arguments)}}(),kn=function(rn){var Y=rn.fileList;return V(Y)},wn=function(rn,Y){var en=[{type:S.default.createElement(A.FilePdfTwoTone,null),suf:[".pdf"]},{type:S.default.createElement(A.FileExcelTwoTone,null),suf:[".xlsx",".xls",".csv"]},{type:S.default.createElement(A.FileWordTwoTone,null),suf:[".doc",".docx"]},{type:S.default.createElement(A.PictureTwoTone,null),suf:[".webp",".svg",".png",".gif",".jpg",".jpeg",".jfif",".bmp",".dpg"]}],tn=rn.status==="uploading"?S.default.createElement(A.LoadingOutlined,null):S.default.createElement(A.PaperClipOutlined,null);return(Y==="picture"||Y==="picture-card")&&(Y==="picture-card"&&rn.status==="uploading"?tn=S.default.createElement(A.LoadingOutlined,null):en.forEach(function(nn){nn.suf.includes(rn.name.slice(rn.name.lastIndexOf(".")))&&(tn=nn.type)})),tn},hn=S.default.createElement("div",null,S.default.createElement(A.PlusOutlined,null),S.default.createElement("div",{style:{marginTop:8}},"Upload"));return S.default.createElement(S.default.Fragment,null,S.default.createElement(L.Upload,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",fileList:T,onPreview:K,onChange:kn,iconRender:wn},T.length>=8?null:hn),S.default.createElement(L.Modal,{open:r,footer:null,onCancel:cn},S.default.createElement("img",{alt:"example",style:{width:"100%"},src:v})))},$=B;return Z.createElement($)}}},4805:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u4F7F\u7528 ",["code","fileList"]," \u5BF9\u5217\u8868\u8FDB\u884C\u5B8C\u5168\u63A7\u5236\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u5404\u79CD\u81EA\u5B9A\u4E49\u529F\u80FD\uFF0C\u4EE5\u4E0B\u6F14\u793A\u4E8C\u79CD\u60C5\u51B5\uFF1A"],["ol",["li",["p","\u4E0A\u4F20\u5217\u8868\u6570\u91CF\u7684\u9650\u5236\u3002"]],["li",["p","\u8BFB\u53D6\u8FDC\u7A0B\u8DEF\u5F84\u5E76\u663E\u793A\u94FE\u63A5\u3002"]]]],"en-US":[["p","You can gain full control over filelist by configuring ",["code","fileList"],". You can accomplish all kinds of customed functions. The following shows two circumstances:"],["ol",["li",["p","limit the number of uploaded files."]],["li",["p","read from response and show file link."]]]]},meta:{order:4,title:{"zh-CN":"\u5B8C\u5168\u63A7\u5236\u7684\u4E0A\u4F20\u5217\u8868","en-US":"Complete control over file list"},filename:"components/upload/demo/fileList.md",id:"components-upload-demo-fileList"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadProps } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadFile } from <span class="token string">'antd/es/upload/interface'</span><span class="token comment" spellcheck="true">;</span>
import React<span class="token punctuation">,</span> { useState } from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'xxx.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'http://www.baidu.com/xxx.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> handleChange<span class="token punctuation">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> info <span class="token operator">=</span><span class="token operator">></span> {
    let newFileList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>info<span class="token punctuation">.</span>fileList<span class="token punctuation">]</span><span class="token comment" spellcheck="true">;</span>

    <span class="token operator">/</span><span class="token operator">/</span> <span class="token number">1</span><span class="token punctuation">.</span> Limit the number of uploaded files
    <span class="token operator">/</span><span class="token operator">/</span> Only <span class="token keyword">to</span> show two recent uploaded files<span class="token punctuation">,</span> <span class="token operator">and</span> old ones will be replaced by the new
    newFileList <span class="token operator">=</span> newFileList<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

    <span class="token operator">/</span><span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">.</span> Read from response <span class="token operator">and</span> show file link
    newFileList <span class="token operator">=</span> newFileList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>file <span class="token operator">=</span><span class="token operator">></span> {
      <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>response<span class="token punctuation">)</span> {
        <span class="token operator">/</span><span class="token operator">/</span> Component will show file<span class="token punctuation">.</span>url as link
        file<span class="token punctuation">.</span>url <span class="token operator">=</span> file<span class="token punctuation">.</span>response<span class="token punctuation">.</span>url<span class="token comment" spellcheck="true">;</span>
      }
      return file<span class="token comment" spellcheck="true">;</span>
    }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

    <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> props <span class="token operator">=</span> {
    action<span class="token punctuation">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
    onChange<span class="token punctuation">:</span> handleChange<span class="token punctuation">,</span>
    multiple<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  }<span class="token comment" spellcheck="true">;</span>
  return <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Upload {<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>props} fileList<span class="token operator">=</span>{fileList}<span class="token operator">></span>
      <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Upload<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
}<span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd/es/upload/interface'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'xxx.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'http://www.baidu.com/xxx.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> handleChange<span class="token operator">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> info <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> newFileList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>info<span class="token punctuation">.</span>fileList<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 1. Limit the number of uploaded files</span>
    <span class="token comment">// Only to show two recent uploaded files, and old ones will be replaced by the new</span>
    newFileList <span class="token operator">=</span> newFileList<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2. Read from response and show file link</span>
    newFileList <span class="token operator">=</span> newFileList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>file <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Component will show file.url as link</span>
        file<span class="token punctuation">.</span>url <span class="token operator">=</span> file<span class="token punctuation">.</span>response<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> file<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
    action<span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
    onChange<span class="token operator">:</span> handleChange<span class="token punctuation">,</span>
    multiple<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token attr-name">fileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileList<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'xxx.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://www.baidu.com/xxx.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> newFileList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>info<span class="token punctuation">.</span>fileList<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// 1. Limit the number of uploaded files</span>
    <span class="token comment">// Only to show two recent uploaded files, and old ones will be replaced by the new</span>
    newFileList <span class="token operator">=</span> newFileList<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2. Read from response and show file link</span>
    newFileList <span class="token operator">=</span> newFileList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Component will show file.url as link</span>
        file<span class="token punctuation">.</span>url <span class="token operator">=</span> file<span class="token punctuation">.</span>response<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> file<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">onChange</span><span class="token operator">:</span> handleChange<span class="token punctuation">,</span>
    <span class="token literal-property property">multiple</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token attr-name">fileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileList<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51);function j(a){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},j(a)}var A=y(61),L=y(12),S=G(y(0));function F(a){if(typeof WeakMap!="function")return null;var s=new WeakMap,r=new WeakMap;return(F=function(g){return g?r:s})(a)}function G(a,s){if(!s&&a&&a.__esModule)return a;if(a===null||j(a)!=="object"&&typeof a!="function")return{default:a};var r=F(s);if(r&&r.has(a))return r.get(a);var l={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in a)if(h!=="default"&&Object.prototype.hasOwnProperty.call(a,h)){var v=g?Object.getOwnPropertyDescriptor(a,h):null;v&&(v.get||v.set)?Object.defineProperty(l,h,v):l[h]=a[h]}return l.default=a,r&&r.set(a,l),l}function z(){return z=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(a[l]=r[l])}return a},z.apply(this,arguments)}function x(a){return sn(a)||H(a)||un(a)||M()}function M(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H(a){if(typeof Symbol!="undefined"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function sn(a){if(Array.isArray(a))return fn(a)}function yn(a,s){return B(a)||mn(a,s)||un(a,s)||Q()}function Q(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function un(a,s){if(!!a){if(typeof a=="string")return fn(a,s);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fn(a,s)}}function fn(a,s){(s==null||s>a.length)&&(s=a.length);for(var r=0,l=new Array(s);r<s;r++)l[r]=a[r];return l}function mn(a,s){var r=a==null?null:typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var l=[],g=!0,h=!1,v,C;try{for(r=r.call(a);!(g=(v=r.next()).done)&&(l.push(v.value),!(s&&l.length===s));g=!0);}catch(D){h=!0,C=D}finally{try{!g&&r.return!=null&&r.return()}finally{if(h)throw C}}return l}}function B(a){if(Array.isArray(a))return a}var $=function(){var s=(0,S.useState)([{uid:"-1",name:"xxx.png",status:"done",url:"http://www.baidu.com/xxx.png"}]),r=yn(s,2),l=r[0],g=r[1],h=function(D){var I=x(D.fileList);I=I.slice(-2),I=I.map(function(T){return T.response&&(T.url=T.response.url),T}),g(I)},v={action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",onChange:h,multiple:!0};return S.default.createElement(L.Upload,z({},v,{fileList:l}),S.default.createElement(L.Button,{icon:S.default.createElement(A.UploadOutlined,null)},"Upload"))},e=$;return Z.createElement(e)}}},4806:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u901A\u8FC7 ",["code","maxCount"]," \u9650\u5236\u4E0A\u4F20\u6570\u91CF\u3002\u5F53\u4E3A ",["code","1"]," \u65F6\uFF0C\u59CB\u7EC8\u7528\u6700\u65B0\u4E0A\u4F20\u7684\u4EE3\u66FF\u5F53\u524D\u3002"]],"en-US":[["p","Limit files with ",["code","maxCount"],". Will replace current one when ",["code","maxCount"]," is ",["code","1"],"."]]},meta:{order:10,title:{"zh-CN":"\u9650\u5236\u6570\u91CF","en-US":"Max Count"},filename:"components/upload/demo/max-count.md",id:"components-upload-demo-max-count"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> Space<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import React from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Space direction<span class="token operator">=</span><span class="token string">"vertical"</span> style<span class="token operator">=</span>{{ width<span class="token punctuation">:</span> <span class="token string">'100%'</span> }} size<span class="token operator">=</span><span class="token string">"large"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>Upload
      action<span class="token operator">=</span><span class="token string">"https://www.mocky.io/v2/5cc8019d300000980a055e76"</span>
      listType<span class="token operator">=</span><span class="token string">"picture"</span>
      maxCount<span class="token operator">=</span>{<span class="token number">1</span>}
    <span class="token operator">></span>
      <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Upload <span class="token punctuation">(</span>Max<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
    <span class="token operator">&lt;</span>Upload
      action<span class="token operator">=</span><span class="token string">"https://www.mocky.io/v2/5cc8019d300000980a055e76"</span>
      listType<span class="token operator">=</span><span class="token string">"picture"</span>
      maxCount<span class="token operator">=</span>{<span class="token number">3</span>}
      multiple
    <span class="token operator">></span>
      <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Upload <span class="token punctuation">(</span>Max<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Space<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Space<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Space</span></span> <span class="token attr-name">direction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token string">'100%'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>large<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
      <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
      <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span>
      <span class="token attr-name">maxCount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span></span>
    <span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token function">Upload</span> <span class="token punctuation">(</span>Max<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
      <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
      <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span>
      <span class="token attr-name">maxCount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span></span>
      <span class="token attr-name">multiple</span>
    <span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token function">Upload</span> <span class="token punctuation">(</span>Max<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Space</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Space<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Space</span></span>
    <span class="token attr-name">direction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>
    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
    <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>large<span class="token punctuation">"</span></span>
  <span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
      <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
      <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span>
      <span class="token attr-name">maxCount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span></span>
    <span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token function">Upload</span> <span class="token punctuation">(</span>Max<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
      <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
      <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span>
      <span class="token attr-name">maxCount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span></span>
      <span class="token attr-name">multiple</span>
    <span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token function">Upload</span> <span class="token punctuation">(</span>Max<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Space</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51),j=y(61),A=y(12),L=S(y(0));function S(z){return z&&z.__esModule?z:{default:z}}var F=function(){return L.default.createElement(A.Space,{direction:"vertical",style:{width:"100%"},size:"large"},L.default.createElement(A.Upload,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",maxCount:1},L.default.createElement(A.Button,{icon:L.default.createElement(j.UploadOutlined,null)},"Upload (Max: 1)")),L.default.createElement(A.Upload,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",maxCount:3,multiple:!0},L.default.createElement(A.Button,{icon:L.default.createElement(j.UploadOutlined,null)},"Upload (Max: 3)")))},G=F;return Z.createElement(G)}}},4807:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u7528\u6237\u53EF\u4EE5\u4E0A\u4F20\u56FE\u7247\u5E76\u5728\u5217\u8868\u4E2D\u663E\u793A\u7F29\u7565\u56FE\u3002\u5F53\u4E0A\u4F20\u7167\u7247\u6570\u5230\u8FBE\u9650\u5236\u540E\uFF0C\u4E0A\u4F20\u6309\u94AE\u6D88\u5931\u3002"]],"en-US":[["p","After users upload picture, the thumbnail will be shown in list. The upload button will disappear when count meets limitation."]]},meta:{order:3,title:{"zh-CN":"\u7167\u7247\u5899","en-US":"Pictures Wall"},filename:"components/upload/demo/picture-card.md",id:"components-upload-demo-picture-card"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { PlusOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import { Modal<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import type { RcFile<span class="token punctuation">,</span> UploadProps } from <span class="token string">'antd/es/upload'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadFile } from <span class="token string">'antd/es/upload/interface'</span><span class="token comment" spellcheck="true">;</span>
import React<span class="token punctuation">,</span> { useState } from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> getBase64 <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token punctuation">:</span> RcFile<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token operator">=</span><span class="token operator">></span>
  new <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    <span class="token keyword">const</span> reader <span class="token operator">=</span> new <span class="token function">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    reader<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">resolve</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result as string<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    reader<span class="token punctuation">.</span>onerror <span class="token operator">=</span> error <span class="token operator">=</span><span class="token operator">></span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewOpen<span class="token punctuation">,</span> setPreviewOpen<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewImage<span class="token punctuation">,</span> setPreviewImage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewTitle<span class="token punctuation">,</span> setPreviewTitle<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-2'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-3'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-4'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-xxx'</span><span class="token punctuation">,</span>
      percent<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'uploading'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'-5'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> handleCancel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">setPreviewOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> handlePreview <span class="token operator">=</span> async <span class="token punctuation">(</span>file<span class="token punctuation">:</span> UploadFile<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    <span class="token keyword">if</span> <span class="token punctuation">(</span>!file<span class="token punctuation">.</span>url <span class="token operator">&amp;</span><span class="token operator">&amp;</span> !file<span class="token punctuation">.</span>preview<span class="token punctuation">)</span> {
      file<span class="token punctuation">.</span>preview <span class="token operator">=</span> await <span class="token function">getBase64</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>originFileObj as RcFile<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }

    <span class="token function">setPreviewImage</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>url || <span class="token punctuation">(</span>file<span class="token punctuation">.</span>preview as string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    <span class="token function">setPreviewOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    <span class="token function">setPreviewTitle</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name || file<span class="token punctuation">.</span>url!<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>url!<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> handleChange<span class="token punctuation">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>{ fileList<span class="token punctuation">:</span> newFileList }<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
    <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> uploadButton <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>PlusOutlined <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span>{{ marginTop<span class="token punctuation">:</span> <span class="token number">8</span> }}<span class="token operator">></span>Upload<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  return <span class="token punctuation">(</span>
    <span class="token operator">&lt;></span>
      <span class="token operator">&lt;</span>Upload
        action<span class="token operator">=</span><span class="token string">"https://www.mocky.io/v2/5cc8019d300000980a055e76"</span>
        listType<span class="token operator">=</span><span class="token string">"picture-card"</span>
        fileList<span class="token operator">=</span>{fileList}
        onPreview<span class="token operator">=</span>{handlePreview}
        onChange<span class="token operator">=</span>{handleChange}
      <span class="token operator">></span>
        {fileList<span class="token punctuation">.</span>length <span class="token operator">>=</span> <span class="token number">8</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token punctuation">:</span> uploadButton}
      <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
      <span class="token operator">&lt;</span>Modal open<span class="token operator">=</span>{previewOpen} title<span class="token operator">=</span>{previewTitle} footer<span class="token operator">=</span>{<span class="token keyword">null</span>} onCancel<span class="token operator">=</span>{handleCancel}<span class="token operator">></span>
        <span class="token operator">&lt;</span>img alt<span class="token operator">=</span><span class="token string">"example"</span> style<span class="token operator">=</span>{{ width<span class="token punctuation">:</span> <span class="token string">'100%'</span> }} src<span class="token operator">=</span>{previewImage} <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Modal<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
}<span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> PlusOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Modal<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> RcFile<span class="token punctuation">,</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd/es/upload'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd/es/upload/interface'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> getBase64 <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token operator">:</span> RcFile<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token operator">=></span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result <span class="token keyword">as</span> string<span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> error <span class="token operator">=></span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewOpen<span class="token punctuation">,</span> setPreviewOpen<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewImage<span class="token punctuation">,</span> setPreviewImage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewTitle<span class="token punctuation">,</span> setPreviewTitle<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-2'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-3'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-4'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-xxx'</span><span class="token punctuation">,</span>
      percent<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'uploading'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'-5'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleCancel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setPreviewOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handlePreview</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>file<span class="token operator">:</span> UploadFile<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span>url <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>file<span class="token punctuation">.</span>preview<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      file<span class="token punctuation">.</span>preview <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getBase64</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>originFileObj <span class="token keyword">as</span> RcFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">setPreviewImage</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>url <span class="token operator">||</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>preview <span class="token keyword">as</span> string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setPreviewOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setPreviewTitle</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name <span class="token operator">||</span> file<span class="token punctuation">.</span>url<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>url<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> handleChange<span class="token operator">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> fileList<span class="token operator">:</span> newFileList <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> uploadButton <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlusOutlined</span></span> <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginTop<span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
        <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
        <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-card<span class="token punctuation">"</span></span>
        <span class="token attr-name">fileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileList<span class="token punctuation">}</span></span>
        <span class="token attr-name">onPreview</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handlePreview<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span>
        <span class="token punctuation">{</span>fileList<span class="token punctuation">.</span>length <span class="token operator">>=</span> <span class="token number">8</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> uploadButton<span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span> <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>previewOpen<span class="token punctuation">}</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>previewTitle<span class="token punctuation">}</span></span> <span class="token attr-name">footer</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">null</span><span class="token punctuation">}</span></span> <span class="token attr-name">onCancel</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleCancel<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>example<span class="token punctuation">"</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token string">'100%'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>previewImage<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Modal</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> PlusOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Modal<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">getBase64</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>reader<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewOpen<span class="token punctuation">,</span> setPreviewOpen<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewImage<span class="token punctuation">,</span> setPreviewImage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>previewTitle<span class="token punctuation">,</span> setPreviewTitle<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-2'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-3'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-4'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-xxx'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">percent</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'uploading'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-5'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'image.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleCancel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setPreviewOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handlePreview</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span>url <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>file<span class="token punctuation">.</span>preview<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      file<span class="token punctuation">.</span>preview <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getBase64</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>originFileObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setPreviewImage</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>url <span class="token operator">||</span> file<span class="token punctuation">.</span>preview<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setPreviewOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setPreviewTitle</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name <span class="token operator">||</span> file<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">fileList</span><span class="token operator">:</span> newFileList <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> uploadButton <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlusOutlined</span></span> <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span>
        Upload
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
        <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
        <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture-card<span class="token punctuation">"</span></span>
        <span class="token attr-name">fileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileList<span class="token punctuation">}</span></span>
        <span class="token attr-name">onPreview</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handlePreview<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span>
        <span class="token punctuation">{</span>fileList<span class="token punctuation">.</span>length <span class="token operator">>=</span> <span class="token number">8</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> uploadButton<span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span> <span class="token attr-name">open</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>previewOpen<span class="token punctuation">}</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>previewTitle<span class="token punctuation">}</span></span> <span class="token attr-name">footer</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">null</span><span class="token punctuation">}</span></span> <span class="token attr-name">onCancel</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleCancel<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
          <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>example<span class="token punctuation">"</span></span>
          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>previewImage<span class="token punctuation">}</span></span>
        <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Modal</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51);function j(e){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},j(e)}var A=y(61),L=y(12),S=G(y(0));function F(e){if(typeof WeakMap!="function")return null;var a=new WeakMap,s=new WeakMap;return(F=function(l){return l?s:a})(e)}function G(e,a){if(!a&&e&&e.__esModule)return e;if(e===null||j(e)!=="object"&&typeof e!="function")return{default:e};var s=F(a);if(s&&s.has(e))return s.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in e)if(g!=="default"&&Object.prototype.hasOwnProperty.call(e,g)){var h=l?Object.getOwnPropertyDescriptor(e,g):null;h&&(h.get||h.set)?Object.defineProperty(r,g,h):r[g]=e[g]}return r.default=e,s&&s.set(e,r),r}function z(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */z=function(){return e};var e={},a=Object.prototype,s=a.hasOwnProperty,r=Object.defineProperty||function(d,o,u){d[o]=u.value},l=typeof Symbol=="function"?Symbol:{},g=l.iterator||"@@iterator",h=l.asyncIterator||"@@asyncIterator",v=l.toStringTag||"@@toStringTag";function C(d,o,u){return Object.defineProperty(d,o,{value:u,enumerable:!0,configurable:!0,writable:!0}),d[o]}try{C({},"")}catch(d){C=function(u,w,m){return u[w]=m}}function D(d,o,u,w){var m=o&&o.prototype instanceof V?o:V,k=Object.create(m.prototype),b=new Un(w||[]);return r(k,"_invoke",{value:en(d,u,b)}),k}function I(d,o,u){try{return{type:"normal",arg:d.call(o,u)}}catch(w){return{type:"throw",arg:w}}}e.wrap=D;var T={};function V(){}function cn(){}function K(){}var kn={};C(kn,g,function(){return this});var wn=Object.getPrototypeOf,hn=wn&&wn(wn(bn([])));hn&&hn!==a&&s.call(hn,g)&&(kn=hn);var an=K.prototype=V.prototype=Object.create(kn);function rn(d){["next","throw","return"].forEach(function(o){C(d,o,function(u){return this._invoke(o,u)})})}function Y(d,o){function u(m,k,b,R){var E=I(d[m],d,k);if(E.type!=="throw"){var W=E.arg,X=W.value;return X&&j(X)=="object"&&s.call(X,"__await")?o.resolve(X.__await).then(function(on){u("next",on,b,R)},function(on){u("throw",on,b,R)}):o.resolve(X).then(function(on){W.value=on,b(W)},function(on){return u("throw",on,b,R)})}R(E.arg)}var w;r(this,"_invoke",{value:function(k,b){function R(){return new o(function(E,W){u(k,b,E,W)})}return w=w?w.then(R,R):R()}})}function en(d,o,u){var w="suspendedStart";return function(m,k){if(w==="executing")throw new Error("Generator is already running");if(w==="completed"){if(m==="throw")throw k;return jn()}for(u.method=m,u.arg=k;;){var b=u.delegate;if(b){var R=tn(b,u);if(R){if(R===T)continue;return R}}if(u.method==="next")u.sent=u._sent=u.arg;else if(u.method==="throw"){if(w==="suspendedStart")throw w="completed",u.arg;u.dispatchException(u.arg)}else u.method==="return"&&u.abrupt("return",u.arg);w="executing";var E=I(d,o,u);if(E.type==="normal"){if(w=u.done?"completed":"suspendedYield",E.arg===T)continue;return{value:E.arg,done:u.done}}E.type==="throw"&&(w="completed",u.method="throw",u.arg=E.arg)}}}function tn(d,o){var u=d.iterator[o.method];if(u===void 0){if(o.delegate=null,o.method==="throw"){if(d.iterator.return&&(o.method="return",o.arg=void 0,tn(d,o),o.method==="throw"))return T;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var w=I(u,d.iterator,o.arg);if(w.type==="throw")return o.method="throw",o.arg=w.arg,o.delegate=null,T;var m=w.arg;return m?m.done?(o[d.resultName]=m.value,o.next=d.nextLoc,o.method!=="return"&&(o.method="next",o.arg=void 0),o.delegate=null,T):m:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,T)}function nn(d){var o={tryLoc:d[0]};1 in d&&(o.catchLoc=d[1]),2 in d&&(o.finallyLoc=d[2],o.afterLoc=d[3]),this.tryEntries.push(o)}function Cn(d){var o=d.completion||{};o.type="normal",delete o.arg,d.completion=o}function Un(d){this.tryEntries=[{tryLoc:"root"}],d.forEach(nn,this),this.reset(!0)}function bn(d){if(d){var o=d[g];if(o)return o.call(d);if(typeof d.next=="function")return d;if(!isNaN(d.length)){var u=-1,w=function m(){for(;++u<d.length;)if(s.call(d,u))return m.value=d[u],m.done=!1,m;return m.value=void 0,m.done=!0,m};return w.next=w}}return{next:jn}}function jn(){return{value:void 0,done:!0}}return cn.prototype=K,r(an,"constructor",{value:K,configurable:!0}),r(K,"constructor",{value:cn,configurable:!0}),cn.displayName=C(K,v,"GeneratorFunction"),e.isGeneratorFunction=function(d){var o=typeof d=="function"&&d.constructor;return!!o&&(o===cn||(o.displayName||o.name)==="GeneratorFunction")},e.mark=function(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,K):(d.__proto__=K,C(d,v,"GeneratorFunction")),d.prototype=Object.create(an),d},e.awrap=function(d){return{__await:d}},rn(Y.prototype),C(Y.prototype,h,function(){return this}),e.AsyncIterator=Y,e.async=function(d,o,u,w,m){m===void 0&&(m=Promise);var k=new Y(D(d,o,u,w),m);return e.isGeneratorFunction(o)?k:k.next().then(function(b){return b.done?b.value:k.next()})},rn(an),C(an,v,"Generator"),C(an,g,function(){return this}),C(an,"toString",function(){return"[object Generator]"}),e.keys=function(d){var o=Object(d),u=[];for(var w in o)u.push(w);return u.reverse(),function m(){for(;u.length;){var k=u.pop();if(k in o)return m.value=k,m.done=!1,m}return m.done=!0,m}},e.values=bn,Un.prototype={constructor:Un,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Cn),!o)for(var u in this)u.charAt(0)==="t"&&s.call(this,u)&&!isNaN(+u.slice(1))&&(this[u]=void 0)},stop:function(){this.done=!0;var o=this.tryEntries[0].completion;if(o.type==="throw")throw o.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var u=this;function w(W,X){return b.type="throw",b.arg=o,u.next=W,X&&(u.method="next",u.arg=void 0),!!X}for(var m=this.tryEntries.length-1;m>=0;--m){var k=this.tryEntries[m],b=k.completion;if(k.tryLoc==="root")return w("end");if(k.tryLoc<=this.prev){var R=s.call(k,"catchLoc"),E=s.call(k,"finallyLoc");if(R&&E){if(this.prev<k.catchLoc)return w(k.catchLoc,!0);if(this.prev<k.finallyLoc)return w(k.finallyLoc)}else if(R){if(this.prev<k.catchLoc)return w(k.catchLoc,!0)}else{if(!E)throw new Error("try statement without catch or finally");if(this.prev<k.finallyLoc)return w(k.finallyLoc)}}}},abrupt:function(o,u){for(var w=this.tryEntries.length-1;w>=0;--w){var m=this.tryEntries[w];if(m.tryLoc<=this.prev&&s.call(m,"finallyLoc")&&this.prev<m.finallyLoc){var k=m;break}}k&&(o==="break"||o==="continue")&&k.tryLoc<=u&&u<=k.finallyLoc&&(k=null);var b=k?k.completion:{};return b.type=o,b.arg=u,k?(this.method="next",this.next=k.finallyLoc,T):this.complete(b)},complete:function(o,u){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&u&&(this.next=u),T},finish:function(o){for(var u=this.tryEntries.length-1;u>=0;--u){var w=this.tryEntries[u];if(w.finallyLoc===o)return this.complete(w.completion,w.afterLoc),Cn(w),T}},catch:function(o){for(var u=this.tryEntries.length-1;u>=0;--u){var w=this.tryEntries[u];if(w.tryLoc===o){var m=w.completion;if(m.type==="throw"){var k=m.arg;Cn(w)}return k}}throw new Error("illegal catch attempt")},delegateYield:function(o,u,w){return this.delegate={iterator:bn(o),resultName:u,nextLoc:w},this.method==="next"&&(this.arg=void 0),T}},e}function x(e,a,s,r,l,g,h){try{var v=e[g](h),C=v.value}catch(D){s(D);return}v.done?a(C):Promise.resolve(C).then(r,l)}function M(e){return function(){var a=this,s=arguments;return new Promise(function(r,l){var g=e.apply(a,s);function h(C){x(g,r,l,h,v,"next",C)}function v(C){x(g,r,l,h,v,"throw",C)}h(void 0)})}}function H(e,a){return fn(e)||un(e,a)||yn(e,a)||sn()}function sn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yn(e,a){if(!!e){if(typeof e=="string")return Q(e,a);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Q(e,a)}}function Q(e,a){(a==null||a>e.length)&&(a=e.length);for(var s=0,r=new Array(a);s<a;s++)r[s]=e[s];return r}function un(e,a){var s=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var r=[],l=!0,g=!1,h,v;try{for(s=s.call(e);!(l=(h=s.next()).done)&&(r.push(h.value),!(a&&r.length===a));l=!0);}catch(C){g=!0,v=C}finally{try{!l&&s.return!=null&&s.return()}finally{if(g)throw v}}return r}}function fn(e){if(Array.isArray(e))return e}var mn=function(a){return new Promise(function(s,r){var l=new FileReader;l.readAsDataURL(a),l.onload=function(){return s(l.result)},l.onerror=function(g){return r(g)}})},B=function(){var a=(0,S.useState)(!1),s=H(a,2),r=s[0],l=s[1],g=(0,S.useState)(""),h=H(g,2),v=h[0],C=h[1],D=(0,S.useState)(""),I=H(D,2),T=I[0],V=I[1],cn=(0,S.useState)([{uid:"-1",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-2",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-3",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-4",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-xxx",percent:50,name:"image.png",status:"uploading",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-5",name:"image.png",status:"error"}]),K=H(cn,2),kn=K[0],wn=K[1],hn=function(){return l(!1)},an=function(){var en=M(z().mark(function tn(nn){return z().wrap(function(Un){for(;;)switch(Un.prev=Un.next){case 0:if(!(!nn.url&&!nn.preview)){Un.next=4;break}return Un.next=3,mn(nn.originFileObj);case 3:nn.preview=Un.sent;case 4:C(nn.url||nn.preview),l(!0),V(nn.name||nn.url.substring(nn.url.lastIndexOf("/")+1));case 7:case"end":return Un.stop()}},tn)}));return function(nn){return en.apply(this,arguments)}}(),rn=function(tn){var nn=tn.fileList;return wn(nn)},Y=S.default.createElement("div",null,S.default.createElement(A.PlusOutlined,null),S.default.createElement("div",{style:{marginTop:8}},"Upload"));return S.default.createElement(S.default.Fragment,null,S.default.createElement(L.Upload,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",fileList:kn,onPreview:an,onChange:rn},kn.length>=8?null:Y),S.default.createElement(L.Modal,{open:r,title:T,footer:null,onCancel:hn},S.default.createElement("img",{alt:"example",style:{width:"100%"},src:v})))},$=B;return Z.createElement($)}}},4808:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u4E0A\u4F20\u6587\u4EF6\u4E3A\u56FE\u7247\uFF0C\u53EF\u5C55\u793A\u672C\u5730\u7F29\u7565\u56FE\u3002",["code","IE8/9"]," \u4E0D\u652F\u6301\u6D4F\u89C8\u5668\u672C\u5730\u7F29\u7565\u56FE\u5C55\u793A\uFF08",["a",{title:null,href:"https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL"},"Ref"],"\uFF09\uFF0C\u53EF\u4EE5\u5199 ",["code","thumbUrl"]," \u5C5E\u6027\u6765\u4EE3\u66FF\u3002"]],"en-US":[["p","If uploaded file is a picture, the thumbnail can be shown. ",["code","IE8/9"]," do not support local thumbnail show. Please use ",["code","thumbUrl"]," instead."]]},meta:{order:8,title:{"zh-CN":"\u56FE\u7247\u5217\u8868\u6837\u5F0F","en-US":"Pictures with list style"},filename:"components/upload/demo/picture-style.md",id:"components-upload-demo-picture-style"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadFile } from <span class="token string">'antd/es/upload/interface'</span><span class="token comment" spellcheck="true">;</span>
import React from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> fileList<span class="token punctuation">:</span> UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  {
    uid<span class="token punctuation">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token string">'xxx.png'</span><span class="token punctuation">,</span>
    status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
    url<span class="token punctuation">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    thumbUrl<span class="token punctuation">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
  }<span class="token punctuation">,</span>
  {
    uid<span class="token punctuation">:</span> <span class="token string">'-2'</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token string">'yyy.png'</span><span class="token punctuation">,</span>
    status<span class="token punctuation">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
  }<span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;></span>
    <span class="token operator">&lt;</span>Upload
      action<span class="token operator">=</span><span class="token string">"https://www.mocky.io/v2/5cc8019d300000980a055e76"</span>
      listType<span class="token operator">=</span><span class="token string">"picture"</span>
      defaultFileList<span class="token operator">=</span>{<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>fileList<span class="token punctuation">]</span>}
    <span class="token operator">></span>
      <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Upload<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
    <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>Upload
      action<span class="token operator">=</span><span class="token string">"https://www.mocky.io/v2/5cc8019d300000980a055e76"</span>
      listType<span class="token operator">=</span><span class="token string">"picture"</span>
      defaultFileList<span class="token operator">=</span>{<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>fileList<span class="token punctuation">]</span>}
      className<span class="token operator">=</span><span class="token string">"upload-list-inline"</span>
    <span class="token operator">></span>
      <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Upload<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>
<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd/es/upload/interface'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fileList<span class="token operator">:</span> UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    uid<span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'xxx.png'</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    thumbUrl<span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    uid<span class="token operator">:</span> <span class="token string">'-2'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'yyy.png'</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
      <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
      <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span>
      <span class="token attr-name">defaultFileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token operator">...</span>fileList<span class="token punctuation">]</span><span class="token punctuation">}</span></span>
    <span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
      <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
      <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span>
      <span class="token attr-name">defaultFileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token operator">...</span>fileList<span class="token punctuation">]</span><span class="token punctuation">}</span></span>
      <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upload-list-inline<span class="token punctuation">"</span></span>
    <span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fileList <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'xxx.png'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">thumbUrl</span><span class="token operator">:</span> <span class="token string">'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'-2'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'yyy.png'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
      <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
      <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span>
      <span class="token attr-name">defaultFileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token operator">...</span>fileList<span class="token punctuation">]</span><span class="token punctuation">}</span></span>
    <span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span>
      <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mocky.io/v2/5cc8019d300000980a055e76<span class="token punctuation">"</span></span>
      <span class="token attr-name">listType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>picture<span class="token punctuation">"</span></span>
      <span class="token attr-name">defaultFileList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token operator">...</span>fileList<span class="token punctuation">]</span><span class="token punctuation">}</span></span>
      <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upload-list-inline<span class="token punctuation">"</span></span>
    <span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51),j=y(61),A=y(12),L=S(y(0));function S(x){return x&&x.__esModule?x:{default:x}}var F=[{uid:"-1",name:"xxx.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png",thumbUrl:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-2",name:"yyy.png",status:"error"}],G=function(){return L.default.createElement(L.default.Fragment,null,L.default.createElement(A.Upload,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",defaultFileList:[].concat(F)},L.default.createElement(A.Button,{icon:L.default.createElement(j.UploadOutlined,null)},"Upload")),L.default.createElement("br",null),L.default.createElement("br",null),L.default.createElement(A.Upload,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",defaultFileList:[].concat(F),className:"upload-list-inline"},L.default.createElement(A.Button,{icon:L.default.createElement(j.UploadOutlined,null)},"Upload")))},z=G;return Z.createElement(z)},style:`/* tile uploaded pictures */
.upload-list-inline .ant-upload-list-item {
  float: left;
  width: 200px;
  margin-right: 8px;
}

.upload-list-inline [class*='-upload-list-rtl'] .ant-upload-list-item {
  float: right;
}`,highlightedStyle:`<span class="token comment" spellcheck="true">/* tile uploaded pictures */</span>
<span class="token selector"><span class="token class">.upload-list-inline</span> <span class="token class">.ant-upload-list-item</span> </span><span class="token punctuation">{</span>
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>
  <span class="token property">margin-right</span><span class="token punctuation">:</span> <span class="token number">8</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.upload-list-inline</span> <span class="token attribute">[class*='-upload-list-rtl']</span> <span class="token class">.ant-upload-list-item</span> </span><span class="token punctuation">{</span>
  <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
<span class="token punctuation">}</span>`}},4809:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u81EA\u5B9A\u4E49\u672C\u5730\u9884\u89C8\uFF0C\u7528\u4E8E\u5904\u7406\u975E\u56FE\u7247\u683C\u5F0F\u6587\u4EF6\uFF08\u4F8B\u5982\u89C6\u9891\u6587\u4EF6\uFF09\u3002"]],"en-US":[["p","Customize local preview. Can handle with non-image format files such as video."]]},meta:{order:9,title:{"zh-CN":"\u81EA\u5B9A\u4E49\u9884\u89C8","en-US":"Customize preview file"},filename:"components/upload/demo/preview-file.md",id:"components-upload-demo-preview-file"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadProps } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import React from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> props<span class="token punctuation">:</span> UploadProps <span class="token operator">=</span> {
  action<span class="token punctuation">:</span> <span class="token string">'//jsonplaceholder.typicode.com/posts/'</span><span class="token punctuation">,</span>
  listType<span class="token punctuation">:</span> <span class="token string">'picture'</span><span class="token punctuation">,</span>
  <span class="token function">previewFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> {
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Your upload file:'</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    <span class="token operator">/</span><span class="token operator">/</span> Your process logic<span class="token punctuation">.</span> Here we just mock <span class="token keyword">to</span> the same file
    return <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://next.json-generator.com/api/json/get/4ytyBoLK8'</span><span class="token punctuation">,</span> {
      method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
      body<span class="token punctuation">:</span> file<span class="token punctuation">,</span>
    }<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>{ thumbnail }<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> thumbnail<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token punctuation">,</span>
}<span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Upload {<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>props}<span class="token operator">></span>
    <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Upload<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> props<span class="token operator">:</span> UploadProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  action<span class="token operator">:</span> <span class="token string">'//jsonplaceholder.typicode.com/posts/'</span><span class="token punctuation">,</span>
  listType<span class="token operator">:</span> <span class="token string">'picture'</span><span class="token punctuation">,</span>
  <span class="token function">previewFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Your upload file:'</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Your process logic. Here we just mock to the same file</span>
    <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://next.json-generator.com/api/json/get/4ytyBoLK8'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span> file<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> thumbnail <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> thumbnail<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'//jsonplaceholder.typicode.com/posts/'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">listType</span><span class="token operator">:</span> <span class="token string">'picture'</span><span class="token punctuation">,</span>
  <span class="token function">previewFile</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Your upload file:'</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Your process logic. Here we just mock to the same file</span>
    <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://next.json-generator.com/api/json/get/4ytyBoLK8'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">body</span><span class="token operator">:</span> file<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> thumbnail <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> thumbnail<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51),j=y(61),A=y(12),L=S(y(0));function S(x){return x&&x.__esModule?x:{default:x}}var F={action:"//jsonplaceholder.typicode.com/posts/",listType:"picture",previewFile:function(M){return console.log("Your upload file:",M),fetch("https://next.json-generator.com/api/json/get/4ytyBoLK8",{method:"POST",body:M}).then(function(H){return H.json()}).then(function(H){var sn=H.thumbnail;return sn})}},G=function(){return L.default.createElement(A.Upload,F,L.default.createElement(A.Button,{icon:L.default.createElement(j.UploadOutlined,null)},"Upload"))},z=G;return Z.createElement(z)}}},4810:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u4F7F\u7528 ",["code","beforeUpload"]," \u8F6C\u6362\u4E0A\u4F20\u7684\u6587\u4EF6\uFF08\u4F8B\u5982\u6DFB\u52A0\u6C34\u5370\uFF09\u3002"]],"en-US":[["p","Use ",["code","beforeUpload"]," for transform file before request such as add a watermark."]]},meta:{order:10,title:{"zh-CN":"\u4E0A\u4F20\u524D\u8F6C\u6362\u6587\u4EF6","en-US":"Transform file before request"},filename:"components/upload/demo/transform-file.md",id:"components-upload-demo-transform-file"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadProps } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import React from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> props<span class="token punctuation">:</span> UploadProps <span class="token operator">=</span> {
  action<span class="token punctuation">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  listType<span class="token punctuation">:</span> <span class="token string">'picture'</span><span class="token punctuation">,</span>
  <span class="token function">beforeUpload</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> {
    return new <span class="token function">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=</span><span class="token operator">></span> {
      <span class="token keyword">const</span> reader <span class="token operator">=</span> new <span class="token function">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
      reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
      reader<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
        <span class="token keyword">const</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        img<span class="token punctuation">.</span>src <span class="token operator">=</span> reader<span class="token punctuation">.</span>result as string<span class="token comment" spellcheck="true">;</span>
        img<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
          <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
          canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> img<span class="token punctuation">.</span>naturalWidth<span class="token comment" spellcheck="true">;</span>
          canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> img<span class="token punctuation">.</span>naturalHeight<span class="token comment" spellcheck="true">;</span>
          <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>!<span class="token comment" spellcheck="true">;</span>
          ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
          ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'red'</span><span class="token comment" spellcheck="true">;</span>
          ctx<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'middle'</span><span class="token comment" spellcheck="true">;</span>
          ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">'33px Arial'</span><span class="token comment" spellcheck="true">;</span>
          ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">'Ant Design'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
          canvas<span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span>result <span class="token operator">=</span><span class="token operator">></span> <span class="token function">resolve</span><span class="token punctuation">(</span>result as any<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        }<span class="token comment" spellcheck="true">;</span>
      }<span class="token comment" spellcheck="true">;</span>
    }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token punctuation">,</span>
}<span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Upload {<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>props}<span class="token operator">></span>
    <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Upload<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> props<span class="token operator">:</span> UploadProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  action<span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  listType<span class="token operator">:</span> <span class="token string">'picture'</span><span class="token punctuation">,</span>
  <span class="token function">beforeUpload</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
      reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        img<span class="token punctuation">.</span>src <span class="token operator">=</span> reader<span class="token punctuation">.</span>result <span class="token keyword">as</span> string<span class="token punctuation">;</span>
        img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> img<span class="token punctuation">.</span>naturalWidth<span class="token punctuation">;</span>
          canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> img<span class="token punctuation">.</span>naturalHeight<span class="token punctuation">;</span>
          <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">;</span>
          ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
          ctx<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'middle'</span><span class="token punctuation">;</span>
          ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">'33px Arial'</span><span class="token punctuation">;</span>
          ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">'Ant Design'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          canvas<span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span>result <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>result <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">listType</span><span class="token operator">:</span> <span class="token string">'picture'</span><span class="token punctuation">,</span>
  <span class="token function">beforeUpload</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
      reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        img<span class="token punctuation">.</span>src <span class="token operator">=</span> reader<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
        img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> img<span class="token punctuation">.</span>naturalWidth<span class="token punctuation">;</span>
          canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> img<span class="token punctuation">.</span>naturalHeight<span class="token punctuation">;</span>
          <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
          ctx<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'middle'</span><span class="token punctuation">;</span>
          ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">'33px Arial'</span><span class="token punctuation">;</span>
          ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">'Ant Design'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          canvas<span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51),j=y(61),A=y(12),L=S(y(0));function S(x){return x&&x.__esModule?x:{default:x}}var F={action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture",beforeUpload:function(M){return new Promise(function(H){var sn=new FileReader;sn.readAsDataURL(M),sn.onload=function(){var yn=document.createElement("img");yn.src=sn.result,yn.onload=function(){var Q=document.createElement("canvas");Q.width=yn.naturalWidth,Q.height=yn.naturalHeight;var un=Q.getContext("2d");un.drawImage(yn,0,0),un.fillStyle="red",un.textBaseline="middle",un.font="33px Arial",un.fillText("Ant Design",20,20),Q.toBlob(function(fn){return H(fn)})}}})}},G=function(){return L.default.createElement(A.Upload,F,L.default.createElement(A.Button,{icon:L.default.createElement(j.UploadOutlined,null)},"Upload"))},z=G;return Z.createElement(z)}}},4811:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u4F7F\u7528 ",["code","showUploadList"]," \u8BBE\u7F6E\u5217\u8868\u4EA4\u4E92\u56FE\u6807\u3002"]],"en-US":[["p","Use ",["code","showUploadList"]," for custom action icons of files."]]},meta:{order:12,title:{"zh-CN":"\u81EA\u5B9A\u4E49\u4EA4\u4E92\u56FE\u6807","en-US":"custom action icon"},filename:"components/upload/demo/upload-custom-action-icon.md",id:"components-upload-demo-upload-custom-action-icon"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { StarOutlined<span class="token punctuation">,</span> UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadProps } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import React from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> props<span class="token punctuation">:</span> UploadProps <span class="token operator">=</span> {
  action<span class="token punctuation">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span>{ file<span class="token punctuation">,</span> fileList }<span class="token punctuation">)</span> {
    <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>status !<span class="token operator">==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> {
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> fileList<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
  }<span class="token punctuation">,</span>
  defaultFileList<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'xxx.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      response<span class="token punctuation">:</span> <span class="token string">'Server Error 500'</span><span class="token punctuation">,</span> <span class="token operator">/</span><span class="token operator">/</span> custom error message <span class="token keyword">to</span> show
      url<span class="token punctuation">:</span> <span class="token string">'http://www.baidu.com/xxx.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'yyy.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token string">'http://www.baidu.com/yyy.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    {
      uid<span class="token punctuation">:</span> <span class="token string">'3'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'zzz.png'</span><span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
      response<span class="token punctuation">:</span> <span class="token string">'Server Error 500'</span><span class="token punctuation">,</span> <span class="token operator">/</span><span class="token operator">/</span> custom error message <span class="token keyword">to</span> show
      url<span class="token punctuation">:</span> <span class="token string">'http://www.baidu.com/zzz.png'</span><span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  showUploadList<span class="token punctuation">:</span> {
    showDownloadIcon<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    downloadIcon<span class="token punctuation">:</span> <span class="token string">'Download'</span><span class="token punctuation">,</span>
    showRemoveIcon<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    removeIcon<span class="token punctuation">:</span> <span class="token operator">&lt;</span>StarOutlined onClick<span class="token operator">=</span>{e <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">'custom removeIcon event'</span><span class="token punctuation">)</span>} <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>
  }<span class="token punctuation">,</span>
}<span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Upload {<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>props}<span class="token operator">></span>
    <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Upload<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> StarOutlined<span class="token punctuation">,</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> props<span class="token operator">:</span> UploadProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  action<span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">{</span> file<span class="token punctuation">,</span> fileList <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  defaultFileList<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'xxx.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      response<span class="token operator">:</span> <span class="token string">'Server Error 500'</span><span class="token punctuation">,</span> <span class="token comment">// custom error message to show</span>
      url<span class="token operator">:</span> <span class="token string">'http://www.baidu.com/xxx.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'yyy.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'http://www.baidu.com/yyy.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      uid<span class="token operator">:</span> <span class="token string">'3'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'zzz.png'</span><span class="token punctuation">,</span>
      status<span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
      response<span class="token operator">:</span> <span class="token string">'Server Error 500'</span><span class="token punctuation">,</span> <span class="token comment">// custom error message to show</span>
      url<span class="token operator">:</span> <span class="token string">'http://www.baidu.com/zzz.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  showUploadList<span class="token operator">:</span> <span class="token punctuation">{</span>
    showDownloadIcon<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    downloadIcon<span class="token operator">:</span> <span class="token string">'Download'</span><span class="token punctuation">,</span>
    showRemoveIcon<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    removeIcon<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">StarOutlined</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>e <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">'custom removeIcon event'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> StarOutlined<span class="token punctuation">,</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
  <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> file<span class="token punctuation">,</span> fileList <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">defaultFileList</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'xxx.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">response</span><span class="token operator">:</span> <span class="token string">'Server Error 500'</span><span class="token punctuation">,</span>
      <span class="token comment">// custom error message to show</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://www.baidu.com/xxx.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'yyy.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'done'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://www.baidu.com/yyy.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token string">'3'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zzz.png'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">response</span><span class="token operator">:</span> <span class="token string">'Server Error 500'</span><span class="token punctuation">,</span>
      <span class="token comment">// custom error message to show</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://www.baidu.com/zzz.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">showUploadList</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">showDownloadIcon</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">downloadIcon</span><span class="token operator">:</span> <span class="token string">'Download'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">showRemoveIcon</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">removeIcon</span><span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">StarOutlined</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">'custom removeIcon event'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51),j=y(61),A=y(12),L=S(y(0));function S(x){return x&&x.__esModule?x:{default:x}}var F={action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",onChange:function(M){var H=M.file,sn=M.fileList;H.status!=="uploading"&&console.log(H,sn)},defaultFileList:[{uid:"1",name:"xxx.png",status:"done",response:"Server Error 500",url:"http://www.baidu.com/xxx.png"},{uid:"2",name:"yyy.png",status:"done",url:"http://www.baidu.com/yyy.png"},{uid:"3",name:"zzz.png",status:"error",response:"Server Error 500",url:"http://www.baidu.com/zzz.png"}],showUploadList:{showDownloadIcon:!0,downloadIcon:"Download",showRemoveIcon:!0,removeIcon:L.default.createElement(j.StarOutlined,{onClick:function(M){return console.log(M,"custom removeIcon event")}})}},G=function(){return L.default.createElement(A.Upload,F,L.default.createElement(A.Button,{icon:L.default.createElement(j.UploadOutlined,null)},"Upload"))},z=G;return Z.createElement(z)}}},4812:function(J,ln,y){J.exports={content:{"zh-CN":[["p",["code","beforeUpload"]," \u8FD4\u56DE ",["code","false"]," \u540E\uFF0C\u624B\u52A8\u4E0A\u4F20\u6587\u4EF6\u3002"]],"en-US":[["p","Upload files manually after ",["code","beforeUpload"]," returns ",["code","false"],"."]]},meta:{order:7,title:{"zh-CN":"\u624B\u52A8\u4E0A\u4F20","en-US":"Upload manually"},filename:"components/upload/demo/upload-manually.md",id:"components-upload-demo-upload-manually"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import type { RcFile<span class="token punctuation">,</span> UploadFile<span class="token punctuation">,</span> UploadProps } from <span class="token string">'antd/es/upload/interface'</span><span class="token comment" spellcheck="true">;</span>
import React<span class="token punctuation">,</span> { useState } from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>uploading<span class="token punctuation">,</span> setUploading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> handleUpload <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    <span class="token keyword">const</span> formData <span class="token operator">=</span> new <span class="token function">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    fileList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>file <span class="token operator">=</span><span class="token operator">></span> {
      formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'files[]'</span><span class="token punctuation">,</span> file as RcFile<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    <span class="token function">setUploading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    <span class="token operator">/</span><span class="token operator">/</span> You can use any AJAX library you like
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span> {
      method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
      body<span class="token punctuation">:</span> formData<span class="token punctuation">,</span>
    }<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
        <span class="token function">setFileList</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
        message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'upload successfully.'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
      }<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
        message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'upload failed.'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
      }<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
        <span class="token function">setUploading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
      }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> props<span class="token punctuation">:</span> UploadProps <span class="token operator">=</span> {
    onRemove<span class="token punctuation">:</span> file <span class="token operator">=</span><span class="token operator">></span> {
      <span class="token keyword">const</span> index <span class="token operator">=</span> fileList<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
      <span class="token keyword">const</span> newFileList <span class="token operator">=</span> fileList<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
      newFileList<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
      <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }<span class="token punctuation">,</span>
    beforeUpload<span class="token punctuation">:</span> file <span class="token operator">=</span><span class="token operator">></span> {
      <span class="token function">setFileList</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>fileList<span class="token punctuation">,</span> file<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

      return <span class="token boolean">false</span><span class="token comment" spellcheck="true">;</span>
    }<span class="token punctuation">,</span>
    fileList<span class="token punctuation">,</span>
  }<span class="token comment" spellcheck="true">;</span>

  return <span class="token punctuation">(</span>
    <span class="token operator">&lt;></span>
      <span class="token operator">&lt;</span>Upload {<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>props}<span class="token operator">></span>
        <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span><span class="token keyword">Select</span> File<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
      <span class="token operator">&lt;</span>Button
        type<span class="token operator">=</span><span class="token string">"primary"</span>
        onClick<span class="token operator">=</span>{handleUpload}
        disabled<span class="token operator">=</span>{fileList<span class="token punctuation">.</span>length <span class="token operator">==</span><span class="token operator">=</span> <span class="token number">0</span>}
        loading<span class="token operator">=</span>{uploading}
        style<span class="token operator">=</span>{{ marginTop<span class="token punctuation">:</span> <span class="token number">16</span> }}
      <span class="token operator">></span>
        {uploading <span class="token operator">?</span> <span class="token string">'Uploading'</span> <span class="token punctuation">:</span> <span class="token string">'Start Upload'</span>}
      <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
}<span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> RcFile<span class="token punctuation">,</span> UploadFile<span class="token punctuation">,</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd/es/upload/interface'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>uploading<span class="token punctuation">,</span> setUploading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleUpload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fileList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>file <span class="token operator">=></span> <span class="token punctuation">{</span>
      formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'files[]'</span><span class="token punctuation">,</span> file <span class="token keyword">as</span> RcFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setUploading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// You can use any AJAX library you like</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
      body<span class="token operator">:</span> formData<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setFileList</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'upload successfully.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'upload failed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setUploading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> props<span class="token operator">:</span> UploadProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">onRemove</span><span class="token operator">:</span> file <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> index <span class="token operator">=</span> fileList<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> newFileList <span class="token operator">=</span> fileList<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      newFileList<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">beforeUpload</span><span class="token operator">:</span> file <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setFileList</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>fileList<span class="token punctuation">,</span> file<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    fileList<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Select File<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span>
        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleUpload<span class="token punctuation">}</span></span>
        <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileList<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">loading</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>uploading<span class="token punctuation">}</span></span>
        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginTop<span class="token operator">:</span> <span class="token number">16</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span>
        <span class="token punctuation">{</span>uploading <span class="token operator">?</span> <span class="token string">'Uploading'</span> <span class="token operator">:</span> <span class="token string">'Start Upload'</span><span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>fileList<span class="token punctuation">,</span> setFileList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>uploading<span class="token punctuation">,</span> setUploading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleUpload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fileList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'files[]'</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setUploading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// You can use any AJAX library you like</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">body</span><span class="token operator">:</span> formData<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setFileList</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'upload successfully.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'upload failed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setUploading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">onRemove</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> index <span class="token operator">=</span> fileList<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> newFileList <span class="token operator">=</span> fileList<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      newFileList<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setFileList</span><span class="token punctuation">(</span>newFileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">beforeUpload</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setFileList</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>fileList<span class="token punctuation">,</span> file<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    fileList<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Select File<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span>
        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleUpload<span class="token punctuation">}</span></span>
        <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fileList<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">loading</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>uploading<span class="token punctuation">}</span></span>
        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span>
        <span class="token punctuation">{</span>uploading <span class="token operator">?</span> <span class="token string">'Uploading'</span> <span class="token operator">:</span> <span class="token string">'Start Upload'</span><span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51);function j(e){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},j(e)}var A=y(61),L=y(12),S=G(y(0));function F(e){if(typeof WeakMap!="function")return null;var a=new WeakMap,s=new WeakMap;return(F=function(l){return l?s:a})(e)}function G(e,a){if(!a&&e&&e.__esModule)return e;if(e===null||j(e)!=="object"&&typeof e!="function")return{default:e};var s=F(a);if(s&&s.has(e))return s.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in e)if(g!=="default"&&Object.prototype.hasOwnProperty.call(e,g)){var h=l?Object.getOwnPropertyDescriptor(e,g):null;h&&(h.get||h.set)?Object.defineProperty(r,g,h):r[g]=e[g]}return r.default=e,s&&s.set(e,r),r}function z(e){return H(e)||M(e)||Q(e)||x()}function x(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function H(e){if(Array.isArray(e))return un(e)}function sn(e,a){return mn(e)||fn(e,a)||Q(e,a)||yn()}function yn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q(e,a){if(!!e){if(typeof e=="string")return un(e,a);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return un(e,a)}}function un(e,a){(a==null||a>e.length)&&(a=e.length);for(var s=0,r=new Array(a);s<a;s++)r[s]=e[s];return r}function fn(e,a){var s=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var r=[],l=!0,g=!1,h,v;try{for(s=s.call(e);!(l=(h=s.next()).done)&&(r.push(h.value),!(a&&r.length===a));l=!0);}catch(C){g=!0,v=C}finally{try{!l&&s.return!=null&&s.return()}finally{if(g)throw v}}return r}}function mn(e){if(Array.isArray(e))return e}var B=function(){var a=(0,S.useState)([]),s=sn(a,2),r=s[0],l=s[1],g=(0,S.useState)(!1),h=sn(g,2),v=h[0],C=h[1],D=function(){var V=new FormData;r.forEach(function(cn){V.append("files[]",cn)}),C(!0),fetch("https://www.mocky.io/v2/5cc8019d300000980a055e76",{method:"POST",body:V}).then(function(cn){return cn.json()}).then(function(){l([]),L.message.success("upload successfully.")}).catch(function(){L.message.error("upload failed.")}).finally(function(){C(!1)})},I={onRemove:function(V){var cn=r.indexOf(V),K=r.slice();K.splice(cn,1),l(K)},beforeUpload:function(V){return l([].concat(z(r),[V])),!1},fileList:r};return S.default.createElement(S.default.Fragment,null,S.default.createElement(L.Upload,I,S.default.createElement(L.Button,{icon:S.default.createElement(A.UploadOutlined,null)},"Select File")),S.default.createElement(L.Button,{type:"primary",onClick:D,disabled:r.length===0,loading:v,style:{marginTop:16}},v?"Uploading":"Start Upload"))},$=B;return Z.createElement($)}}},4813:function(J,ln,y){J.exports={content:{"zh-CN":[["p",["code","beforeUpload"]," \u8FD4\u56DE ",["code","false"]," \u6216 ",["code","Promise.reject"]," \u65F6\uFF0C\u53EA\u7528\u4E8E\u62E6\u622A\u4E0A\u4F20\u884C\u4E3A\uFF0C\u4E0D\u4F1A\u963B\u6B62\u6587\u4EF6\u8FDB\u5165\u4E0A\u4F20\u5217\u8868\uFF08",["a",{title:null,href:"https://github.com/ant-design/ant-design/issues/15561#issuecomment-475108235"},"\u539F\u56E0"],"\uFF09\u3002\u5982\u679C\u9700\u8981\u963B\u6B62\u5217\u8868\u5C55\u73B0\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8FD4\u56DE ",["code","Upload.LIST_IGNORE"]," \u5B9E\u73B0\u3002"]],"en-US":[["p",["code","beforeUpload"]," only prevent upload behavior when return false or reject promise, the prevented file would still show in file list. Here is the example you can keep prevented files out of list by return ",["code","UPLOAD.LIST_IGNORE"],"."]]},meta:{order:7.1,title:{"zh-CN":"\u53EA\u4E0A\u4F20 png \u56FE\u7247","en-US":"Upload png file only"},filename:"components/upload/demo/upload-png-only.md",id:"components-upload-demo-upload-png-only"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadProps } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import React from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> props<span class="token punctuation">:</span> UploadProps <span class="token operator">=</span> {
  beforeUpload<span class="token punctuation">:</span> file <span class="token operator">=</span><span class="token operator">></span> {
    <span class="token keyword">const</span> isPNG <span class="token operator">=</span> file<span class="token punctuation">.</span>type <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'image/png'</span><span class="token comment" spellcheck="true">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>!isPNG<span class="token punctuation">)</span> {
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>\`\${file<span class="token punctuation">.</span>name} is <span class="token operator">not</span> a png file\`<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
    return isPNG || Upload<span class="token punctuation">.</span>LIST_IGNORE<span class="token comment" spellcheck="true">;</span>
  }<span class="token punctuation">,</span>
  onChange<span class="token punctuation">:</span> info <span class="token operator">=</span><span class="token operator">></span> {
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>fileList<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token punctuation">,</span>
}<span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Upload {<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>props}<span class="token operator">></span>
    <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Upload png only<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> props<span class="token operator">:</span> UploadProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">beforeUpload</span><span class="token operator">:</span> file <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isPNG <span class="token operator">=</span> file<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'image/png'</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isPNG<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is not a png file</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> isPNG <span class="token operator">||</span> Upload<span class="token punctuation">.</span><span class="token constant">LIST_IGNORE</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onChange</span><span class="token operator">:</span> info <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload png only<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">beforeUpload</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isPNG <span class="token operator">=</span> file<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'image/png'</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isPNG<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>file<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is not a png file</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> isPNG <span class="token operator">||</span> Upload<span class="token punctuation">.</span><span class="token constant">LIST_IGNORE</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Upload png only<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51),j=y(61),A=y(12),L=S(y(0));function S(x){return x&&x.__esModule?x:{default:x}}var F={beforeUpload:function(M){var H=M.type==="image/png";return H||A.message.error("".concat(M.name," is not a png file")),H||A.Upload.LIST_IGNORE},onChange:function(M){console.log(M.fileList)}},G=function(){return L.default.createElement(A.Upload,F,L.default.createElement(A.Button,{icon:L.default.createElement(j.UploadOutlined,null)},"Upload png only"))},z=G;return Z.createElement(z)}}},4814:function(J,ln,y){J.exports={content:{"zh-CN":[["p","\u4F7F\u7528\u963F\u91CC\u4E91 OSS \u4E0A\u4F20\u793A\u4F8B."]],"en-US":[["p","Use Aliyun OSS upload example."]]},meta:{order:11,title:{"zh-CN":"\u963F\u91CC\u4E91 OSS","en-US":"Aliyun OSS"},filename:"components/upload/demo/upload-with-aliyun-oss.md",id:"components-upload-demo-upload-with-aliyun-oss"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#zh-CN",title:"zh-CN"},"zh-CN"]],["li",["a",{className:"bisheng-toc-h2",href:"#en-US",title:"en-US"},"en-US"]]],highlightedCode:["pre",{lang:"tsx",highlighted:`import { UploadOutlined } from <span class="token string">'@ant-design/icons'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadProps } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import { Button<span class="token punctuation">,</span> Form<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload } from <span class="token string">'antd'</span><span class="token comment" spellcheck="true">;</span>
import type { UploadFile } from <span class="token string">'antd/es/upload/interface'</span><span class="token comment" spellcheck="true">;</span>
import React<span class="token punctuation">,</span> { useEffect<span class="token punctuation">,</span> useState } from <span class="token string">'react'</span><span class="token comment" spellcheck="true">;</span>

interface OSSDataType {
  dir<span class="token punctuation">:</span> string<span class="token comment" spellcheck="true">;</span>
  expire<span class="token punctuation">:</span> string<span class="token comment" spellcheck="true">;</span>
  host<span class="token punctuation">:</span> string<span class="token comment" spellcheck="true">;</span>
  accessId<span class="token punctuation">:</span> string<span class="token comment" spellcheck="true">;</span>
  policy<span class="token punctuation">:</span> string<span class="token comment" spellcheck="true">;</span>
  signature<span class="token punctuation">:</span> string<span class="token comment" spellcheck="true">;</span>
}

interface AliyunOSSUploadProps {
  value<span class="token operator">?</span><span class="token punctuation">:</span> UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">;</span>
  onChange<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>fileList<span class="token punctuation">:</span> UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> void<span class="token comment" spellcheck="true">;</span>
}

<span class="token keyword">const</span> AliyunOSSUpload <span class="token operator">=</span> <span class="token punctuation">(</span>{ value<span class="token punctuation">,</span> onChange }<span class="token punctuation">:</span> AliyunOSSUploadProps<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
  <span class="token keyword">const</span> <span class="token punctuation">[</span>OSSData<span class="token punctuation">,</span> setOSSData<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>OSSDataType<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token operator">/</span><span class="token operator">/</span> Mock get OSS api
  <span class="token operator">/</span><span class="token operator">/</span> https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>help<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>document_detail<span class="token operator">/</span><span class="token number">31988</span><span class="token punctuation">.</span>html
  <span class="token keyword">const</span> mockGetOSSData <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>{
    dir<span class="token punctuation">:</span> <span class="token string">'user-dir/'</span><span class="token punctuation">,</span>
    expire<span class="token punctuation">:</span> <span class="token string">'1577811661'</span><span class="token punctuation">,</span>
    host<span class="token punctuation">:</span> <span class="token string">'//www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
    accessId<span class="token punctuation">:</span> <span class="token string">'c2hhb2RhaG9uZw=='</span><span class="token punctuation">,</span>
    policy<span class="token punctuation">:</span> <span class="token string">'eGl4aWhhaGFrdWt1ZGFkYQ=='</span><span class="token punctuation">,</span>
    signature<span class="token punctuation">:</span> <span class="token string">'ZGFob25nc2hhbw=='</span><span class="token punctuation">,</span>
  }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> init <span class="token operator">=</span> async <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    try {
      <span class="token keyword">const</span> result <span class="token operator">=</span> await <span class="token function">mockGetOSSData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
      <span class="token function">setOSSData</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    } catch <span class="token punctuation">(</span>error<span class="token punctuation">)</span> {
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
  }<span class="token comment" spellcheck="true">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> handleChange<span class="token punctuation">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>{ fileList }<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Aliyun OSS:'</span><span class="token punctuation">,</span> fileList<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    onChange<span class="token operator">?</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>fileList<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
  }<span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> onRemove <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token punctuation">:</span> UploadFile<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {
    <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token punctuation">(</span>value || <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>v <span class="token operator">=</span><span class="token operator">></span> v<span class="token punctuation">.</span>url !<span class="token operator">==</span> file<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>onChange<span class="token punctuation">)</span> {
      <span class="token function">onChange</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }
  }<span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> getExtraData<span class="token punctuation">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span> <span class="token operator">=</span> file <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>{
    key<span class="token punctuation">:</span> file<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
    OSSAccessKeyId<span class="token punctuation">:</span> OSSData<span class="token operator">?</span><span class="token punctuation">.</span>accessId<span class="token punctuation">,</span>
    policy<span class="token punctuation">:</span> OSSData<span class="token operator">?</span><span class="token punctuation">.</span>policy<span class="token punctuation">,</span>
    Signature<span class="token punctuation">:</span> OSSData<span class="token operator">?</span><span class="token punctuation">.</span>signature<span class="token punctuation">,</span>
  }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> beforeUpload<span class="token punctuation">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'beforeUpload'</span><span class="token punctuation">]</span> <span class="token operator">=</span> async file <span class="token operator">=</span><span class="token operator">></span> {
    <span class="token keyword">if</span> <span class="token punctuation">(</span>!OSSData<span class="token punctuation">)</span> return <span class="token boolean">false</span><span class="token comment" spellcheck="true">;</span>

    <span class="token keyword">const</span> expire <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>OSSData<span class="token punctuation">.</span>expire<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token comment" spellcheck="true">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>expire <span class="token operator">&lt;</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> {
      await <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    }

    <span class="token keyword">const</span> suffix <span class="token operator">=</span> file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
    <span class="token keyword">const</span> filename <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> suffix<span class="token comment" spellcheck="true">;</span>
    <span class="token operator">/</span><span class="token operator">/</span> <span class="token variable">@ts</span><span class="token operator">-</span>ignore
    file<span class="token punctuation">.</span>url <span class="token operator">=</span> OSSData<span class="token punctuation">.</span>dir <span class="token operator">+</span> filename<span class="token comment" spellcheck="true">;</span>

    return file<span class="token comment" spellcheck="true">;</span>
  }<span class="token comment" spellcheck="true">;</span>

  <span class="token keyword">const</span> uploadProps<span class="token punctuation">:</span> UploadProps <span class="token operator">=</span> {
    name<span class="token punctuation">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
    fileList<span class="token punctuation">:</span> value<span class="token punctuation">,</span>
    action<span class="token punctuation">:</span> OSSData<span class="token operator">?</span><span class="token punctuation">.</span>host<span class="token punctuation">,</span>
    onChange<span class="token punctuation">:</span> handleChange<span class="token punctuation">,</span>
    onRemove<span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> getExtraData<span class="token punctuation">,</span>
    beforeUpload<span class="token punctuation">,</span>
  }<span class="token comment" spellcheck="true">;</span>

  return <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Upload {<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>uploadProps}<span class="token operator">></span>
      <span class="token operator">&lt;</span>Button icon<span class="token operator">=</span>{<span class="token operator">&lt;</span>UploadOutlined <span class="token operator">/</span><span class="token operator">></span>}<span class="token operator">></span>Click <span class="token keyword">to</span> Upload<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
}<span class="token comment" spellcheck="true">;</span>

<span class="token keyword">const</span> App<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Form labelCol<span class="token operator">=</span>{{ span<span class="token punctuation">:</span> <span class="token number">4</span> }}<span class="token operator">></span>
    <span class="token operator">&lt;</span>Form<span class="token punctuation">.</span>Item label<span class="token operator">=</span><span class="token string">"Photos"</span> name<span class="token operator">=</span><span class="token string">"photos"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>AliyunOSSUpload <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token punctuation">.</span>Item<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>

export <span class="token keyword">default</span> App<span class="token comment" spellcheck="true">;</span>`}],highlightedCodes:{tsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Form<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> UploadFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd/es/upload/interface'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">OSSDataType</span> <span class="token punctuation">{</span>
  dir<span class="token operator">:</span> string<span class="token punctuation">;</span>
  expire<span class="token operator">:</span> string<span class="token punctuation">;</span>
  host<span class="token operator">:</span> string<span class="token punctuation">;</span>
  accessId<span class="token operator">:</span> string<span class="token punctuation">;</span>
  policy<span class="token operator">:</span> string<span class="token punctuation">;</span>
  signature<span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">AliyunOSSUploadProps</span> <span class="token punctuation">{</span>
  value<span class="token operator">?</span><span class="token operator">:</span> UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  onChange<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>fileList<span class="token operator">:</span> UploadFile<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">AliyunOSSUpload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> value<span class="token punctuation">,</span> onChange <span class="token punctuation">}</span><span class="token operator">:</span> AliyunOSSUploadProps<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>OSSData<span class="token punctuation">,</span> setOSSData<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>OSSDataType<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Mock get OSS api</span>
  <span class="token comment">// https://help.aliyun.com/document_detail/31988.html</span>
  <span class="token keyword">const</span> <span class="token function-variable function">mockGetOSSData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    dir<span class="token operator">:</span> <span class="token string">'user-dir/'</span><span class="token punctuation">,</span>
    expire<span class="token operator">:</span> <span class="token string">'1577811661'</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span> <span class="token string">'//www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
    accessId<span class="token operator">:</span> <span class="token string">'c2hhb2RhaG9uZw=='</span><span class="token punctuation">,</span>
    policy<span class="token operator">:</span> <span class="token string">'eGl4aWhhaGFrdWt1ZGFkYQ=='</span><span class="token punctuation">,</span>
    signature<span class="token operator">:</span> <span class="token string">'ZGFob25nc2hhbw=='</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">mockGetOSSData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setOSSData</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> handleChange<span class="token operator">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'onChange'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> fileList <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Aliyun OSS:'</span><span class="token punctuation">,</span> fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    onChange<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>fileList<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onRemove</span> <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token operator">:</span> UploadFile<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token punctuation">(</span>value <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>v <span class="token operator">=></span> v<span class="token punctuation">.</span>url <span class="token operator">!==</span> file<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>onChange<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">onChange</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> getExtraData<span class="token operator">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span> <span class="token operator">=</span> file <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    key<span class="token operator">:</span> file<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
    OSSAccessKeyId<span class="token operator">:</span> OSSData<span class="token operator">?.</span>accessId<span class="token punctuation">,</span>
    policy<span class="token operator">:</span> OSSData<span class="token operator">?.</span>policy<span class="token punctuation">,</span>
    Signature<span class="token operator">:</span> OSSData<span class="token operator">?.</span>signature<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> beforeUpload<span class="token operator">:</span> UploadProps<span class="token punctuation">[</span><span class="token string">'beforeUpload'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">async</span> file <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>OSSData<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> expire <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>OSSData<span class="token punctuation">.</span>expire<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>expire <span class="token operator">&lt;</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> suffix <span class="token operator">=</span> file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> filename <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> suffix<span class="token punctuation">;</span>
    <span class="token comment">// @ts-ignore</span>
    file<span class="token punctuation">.</span>url <span class="token operator">=</span> OSSData<span class="token punctuation">.</span>dir <span class="token operator">+</span> filename<span class="token punctuation">;</span>

    <span class="token keyword">return</span> file<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> uploadProps<span class="token operator">:</span> UploadProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
    fileList<span class="token operator">:</span> value<span class="token punctuation">,</span>
    action<span class="token operator">:</span> OSSData<span class="token operator">?.</span>host<span class="token punctuation">,</span>
    onChange<span class="token operator">:</span> handleChange<span class="token punctuation">,</span>
    onRemove<span class="token punctuation">,</span>
    data<span class="token operator">:</span> getExtraData<span class="token punctuation">,</span>
    beforeUpload<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>uploadProps<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Click to Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span> <span class="token attr-name">labelCol</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> span<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Photos<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>photos<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AliyunOSSUpload</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>`,jsx:`<span class="token keyword">import</span> <span class="token punctuation">{</span> UploadOutlined <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ant-design/icons'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Form<span class="token punctuation">,</span> message<span class="token punctuation">,</span> Upload <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">AliyunOSSUpload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> value<span class="token punctuation">,</span> onChange <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>OSSData<span class="token punctuation">,</span> setOSSData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Mock get OSS api</span>
  <span class="token comment">// https://help.aliyun.com/document_detail/31988.html</span>
  <span class="token keyword">const</span> <span class="token function-variable function">mockGetOSSData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">dir</span><span class="token operator">:</span> <span class="token string">'user-dir/'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">expire</span><span class="token operator">:</span> <span class="token string">'1577811661'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'//www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">accessId</span><span class="token operator">:</span> <span class="token string">'c2hhb2RhaG9uZw=='</span><span class="token punctuation">,</span>
    <span class="token literal-property property">policy</span><span class="token operator">:</span> <span class="token string">'eGl4aWhhaGFrdWt1ZGFkYQ=='</span><span class="token punctuation">,</span>
    <span class="token literal-property property">signature</span><span class="token operator">:</span> <span class="token string">'ZGFob25nc2hhbw=='</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">mockGetOSSData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setOSSData</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> fileList <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Aliyun OSS:'</span><span class="token punctuation">,</span> fileList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    onChange<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>fileList<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onRemove</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> files <span class="token operator">=</span> <span class="token punctuation">(</span>value <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=></span> v<span class="token punctuation">.</span>url <span class="token operator">!==</span> file<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>onChange<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">onChange</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getExtraData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span> file<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
    <span class="token literal-property property">OSSAccessKeyId</span><span class="token operator">:</span> OSSData<span class="token operator">?.</span>accessId<span class="token punctuation">,</span>
    <span class="token literal-property property">policy</span><span class="token operator">:</span> OSSData<span class="token operator">?.</span>policy<span class="token punctuation">,</span>
    <span class="token literal-property property">Signature</span><span class="token operator">:</span> OSSData<span class="token operator">?.</span>signature<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">beforeUpload</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>OSSData<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> expire <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>OSSData<span class="token punctuation">.</span>expire<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>expire <span class="token operator">&lt;</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> suffix <span class="token operator">=</span> file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> filename <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> suffix<span class="token punctuation">;</span>
    <span class="token comment">// @ts-ignore</span>
    file<span class="token punctuation">.</span>url <span class="token operator">=</span> OSSData<span class="token punctuation">.</span>dir <span class="token operator">+</span> filename<span class="token punctuation">;</span>
    <span class="token keyword">return</span> file<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> uploadProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fileList</span><span class="token operator">:</span> value<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> OSSData<span class="token operator">?.</span>host<span class="token punctuation">,</span>
    <span class="token literal-property property">onChange</span><span class="token operator">:</span> handleChange<span class="token punctuation">,</span>
    onRemove<span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> getExtraData<span class="token punctuation">,</span>
    beforeUpload<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upload</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>uploadProps<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">icon</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UploadOutlined</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Click to Upload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Upload</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span>
    <span class="token attr-name">labelCol</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
      <span class="token literal-property property">span</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Photos<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>photos<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AliyunOSSUpload</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
`},preview:function(){var Z=y(0),gn=y(51);function j(l){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},j(l)}var A=y(61),L=y(12),S=G(y(0));function F(l){if(typeof WeakMap!="function")return null;var g=new WeakMap,h=new WeakMap;return(F=function(C){return C?h:g})(l)}function G(l,g){if(!g&&l&&l.__esModule)return l;if(l===null||j(l)!=="object"&&typeof l!="function")return{default:l};var h=F(g);if(h&&h.has(l))return h.get(l);var v={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in l)if(D!=="default"&&Object.prototype.hasOwnProperty.call(l,D)){var I=C?Object.getOwnPropertyDescriptor(l,D):null;I&&(I.get||I.set)?Object.defineProperty(v,D,I):v[D]=l[D]}return v.default=l,h&&h.set(l,v),v}function z(l){return H(l)||M(l)||mn(l)||x()}function x(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M(l){if(typeof Symbol!="undefined"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function H(l){if(Array.isArray(l))return B(l)}function sn(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */sn=function(){return l};var l={},g=Object.prototype,h=g.hasOwnProperty,v=Object.defineProperty||function(m,k,b){m[k]=b.value},C=typeof Symbol=="function"?Symbol:{},D=C.iterator||"@@iterator",I=C.asyncIterator||"@@asyncIterator",T=C.toStringTag||"@@toStringTag";function V(m,k,b){return Object.defineProperty(m,k,{value:b,enumerable:!0,configurable:!0,writable:!0}),m[k]}try{V({},"")}catch(m){V=function(b,R,E){return b[R]=E}}function cn(m,k,b,R){var E=k&&k.prototype instanceof wn?k:wn,W=Object.create(E.prototype),X=new o(R||[]);return v(W,"_invoke",{value:Un(m,b,X)}),W}function K(m,k,b){try{return{type:"normal",arg:m.call(k,b)}}catch(R){return{type:"throw",arg:R}}}l.wrap=cn;var kn={};function wn(){}function hn(){}function an(){}var rn={};V(rn,D,function(){return this});var Y=Object.getPrototypeOf,en=Y&&Y(Y(u([])));en&&en!==g&&h.call(en,D)&&(rn=en);var tn=an.prototype=wn.prototype=Object.create(rn);function nn(m){["next","throw","return"].forEach(function(k){V(m,k,function(b){return this._invoke(k,b)})})}function Cn(m,k){function b(E,W,X,on){var Rn=K(m[E],m,W);if(Rn.type!=="throw"){var Zn=Rn.arg,In=Zn.value;return In&&j(In)=="object"&&h.call(In,"__await")?k.resolve(In.__await).then(function(Gn){b("next",Gn,X,on)},function(Gn){b("throw",Gn,X,on)}):k.resolve(In).then(function(Gn){Zn.value=Gn,X(Zn)},function(Gn){return b("throw",Gn,X,on)})}on(Rn.arg)}var R;v(this,"_invoke",{value:function(W,X){function on(){return new k(function(Rn,Zn){b(W,X,Rn,Zn)})}return R=R?R.then(on,on):on()}})}function Un(m,k,b){var R="suspendedStart";return function(E,W){if(R==="executing")throw new Error("Generator is already running");if(R==="completed"){if(E==="throw")throw W;return w()}for(b.method=E,b.arg=W;;){var X=b.delegate;if(X){var on=bn(X,b);if(on){if(on===kn)continue;return on}}if(b.method==="next")b.sent=b._sent=b.arg;else if(b.method==="throw"){if(R==="suspendedStart")throw R="completed",b.arg;b.dispatchException(b.arg)}else b.method==="return"&&b.abrupt("return",b.arg);R="executing";var Rn=K(m,k,b);if(Rn.type==="normal"){if(R=b.done?"completed":"suspendedYield",Rn.arg===kn)continue;return{value:Rn.arg,done:b.done}}Rn.type==="throw"&&(R="completed",b.method="throw",b.arg=Rn.arg)}}}function bn(m,k){var b=m.iterator[k.method];if(b===void 0){if(k.delegate=null,k.method==="throw"){if(m.iterator.return&&(k.method="return",k.arg=void 0,bn(m,k),k.method==="throw"))return kn;k.method="throw",k.arg=new TypeError("The iterator does not provide a 'throw' method")}return kn}var R=K(b,m.iterator,k.arg);if(R.type==="throw")return k.method="throw",k.arg=R.arg,k.delegate=null,kn;var E=R.arg;return E?E.done?(k[m.resultName]=E.value,k.next=m.nextLoc,k.method!=="return"&&(k.method="next",k.arg=void 0),k.delegate=null,kn):E:(k.method="throw",k.arg=new TypeError("iterator result is not an object"),k.delegate=null,kn)}function jn(m){var k={tryLoc:m[0]};1 in m&&(k.catchLoc=m[1]),2 in m&&(k.finallyLoc=m[2],k.afterLoc=m[3]),this.tryEntries.push(k)}function d(m){var k=m.completion||{};k.type="normal",delete k.arg,m.completion=k}function o(m){this.tryEntries=[{tryLoc:"root"}],m.forEach(jn,this),this.reset(!0)}function u(m){if(m){var k=m[D];if(k)return k.call(m);if(typeof m.next=="function")return m;if(!isNaN(m.length)){var b=-1,R=function E(){for(;++b<m.length;)if(h.call(m,b))return E.value=m[b],E.done=!1,E;return E.value=void 0,E.done=!0,E};return R.next=R}}return{next:w}}function w(){return{value:void 0,done:!0}}return hn.prototype=an,v(tn,"constructor",{value:an,configurable:!0}),v(an,"constructor",{value:hn,configurable:!0}),hn.displayName=V(an,T,"GeneratorFunction"),l.isGeneratorFunction=function(m){var k=typeof m=="function"&&m.constructor;return!!k&&(k===hn||(k.displayName||k.name)==="GeneratorFunction")},l.mark=function(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,an):(m.__proto__=an,V(m,T,"GeneratorFunction")),m.prototype=Object.create(tn),m},l.awrap=function(m){return{__await:m}},nn(Cn.prototype),V(Cn.prototype,I,function(){return this}),l.AsyncIterator=Cn,l.async=function(m,k,b,R,E){E===void 0&&(E=Promise);var W=new Cn(cn(m,k,b,R),E);return l.isGeneratorFunction(k)?W:W.next().then(function(X){return X.done?X.value:W.next()})},nn(tn),V(tn,T,"Generator"),V(tn,D,function(){return this}),V(tn,"toString",function(){return"[object Generator]"}),l.keys=function(m){var k=Object(m),b=[];for(var R in k)b.push(R);return b.reverse(),function E(){for(;b.length;){var W=b.pop();if(W in k)return E.value=W,E.done=!1,E}return E.done=!0,E}},l.values=u,o.prototype={constructor:o,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(d),!k)for(var b in this)b.charAt(0)==="t"&&h.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var b=this;function R(Zn,In){return X.type="throw",X.arg=k,b.next=Zn,In&&(b.method="next",b.arg=void 0),!!In}for(var E=this.tryEntries.length-1;E>=0;--E){var W=this.tryEntries[E],X=W.completion;if(W.tryLoc==="root")return R("end");if(W.tryLoc<=this.prev){var on=h.call(W,"catchLoc"),Rn=h.call(W,"finallyLoc");if(on&&Rn){if(this.prev<W.catchLoc)return R(W.catchLoc,!0);if(this.prev<W.finallyLoc)return R(W.finallyLoc)}else if(on){if(this.prev<W.catchLoc)return R(W.catchLoc,!0)}else{if(!Rn)throw new Error("try statement without catch or finally");if(this.prev<W.finallyLoc)return R(W.finallyLoc)}}}},abrupt:function(k,b){for(var R=this.tryEntries.length-1;R>=0;--R){var E=this.tryEntries[R];if(E.tryLoc<=this.prev&&h.call(E,"finallyLoc")&&this.prev<E.finallyLoc){var W=E;break}}W&&(k==="break"||k==="continue")&&W.tryLoc<=b&&b<=W.finallyLoc&&(W=null);var X=W?W.completion:{};return X.type=k,X.arg=b,W?(this.method="next",this.next=W.finallyLoc,kn):this.complete(X)},complete:function(k,b){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&b&&(this.next=b),kn},finish:function(k){for(var b=this.tryEntries.length-1;b>=0;--b){var R=this.tryEntries[b];if(R.finallyLoc===k)return this.complete(R.completion,R.afterLoc),d(R),kn}},catch:function(k){for(var b=this.tryEntries.length-1;b>=0;--b){var R=this.tryEntries[b];if(R.tryLoc===k){var E=R.completion;if(E.type==="throw"){var W=E.arg;d(R)}return W}}throw new Error("illegal catch attempt")},delegateYield:function(k,b,R){return this.delegate={iterator:u(k),resultName:b,nextLoc:R},this.method==="next"&&(this.arg=void 0),kn}},l}function yn(l,g,h,v,C,D,I){try{var T=l[D](I),V=T.value}catch(cn){h(cn);return}T.done?g(V):Promise.resolve(V).then(v,C)}function Q(l){return function(){var g=this,h=arguments;return new Promise(function(v,C){var D=l.apply(g,h);function I(V){yn(D,v,C,I,T,"next",V)}function T(V){yn(D,v,C,I,T,"throw",V)}I(void 0)})}}function un(l,g){return e(l)||$(l,g)||mn(l,g)||fn()}function fn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mn(l,g){if(!!l){if(typeof l=="string")return B(l,g);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return B(l,g)}}function B(l,g){(g==null||g>l.length)&&(g=l.length);for(var h=0,v=new Array(g);h<g;h++)v[h]=l[h];return v}function $(l,g){var h=l==null?null:typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(h!=null){var v=[],C=!0,D=!1,I,T;try{for(h=h.call(l);!(C=(I=h.next()).done)&&(v.push(I.value),!(g&&v.length===g));C=!0);}catch(V){D=!0,T=V}finally{try{!C&&h.return!=null&&h.return()}finally{if(D)throw T}}return v}}function e(l){if(Array.isArray(l))return l}var a=function(g){var h=g.value,v=g.onChange,C=(0,S.useState)(),D=un(C,2),I=D[0],T=D[1],V=function(){return{dir:"user-dir/",expire:"1577811661",host:"//www.mocky.io/v2/5cc8019d300000980a055e76",accessId:"c2hhb2RhaG9uZw==",policy:"eGl4aWhhaGFrdWt1ZGFkYQ==",signature:"ZGFob25nc2hhbw=="}},cn=function(){var rn=Q(sn().mark(function Y(){var en;return sn().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:return nn.prev=0,nn.next=3,V();case 3:en=nn.sent,T(en),nn.next=10;break;case 7:nn.prev=7,nn.t0=nn.catch(0),L.message.error(nn.t0);case 10:case"end":return nn.stop()}},Y,null,[[0,7]])}));return function(){return rn.apply(this,arguments)}}();(0,S.useEffect)(function(){cn()},[]);var K=function(Y){var en=Y.fileList;console.log("Aliyun OSS:",en),v==null||v(z(en))},kn=function(Y){var en=(h||[]).filter(function(tn){return tn.url!==Y.url});v&&v(en)},wn=function(Y){return{key:Y.url,OSSAccessKeyId:I==null?void 0:I.accessId,policy:I==null?void 0:I.policy,Signature:I==null?void 0:I.signature}},hn=function(){var rn=Q(sn().mark(function Y(en){var tn,nn,Cn;return sn().wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:if(I){bn.next=2;break}return bn.abrupt("return",!1);case 2:if(tn=Number(I.expire)*1e3,!(tn<Date.now())){bn.next=6;break}return bn.next=6,cn();case 6:return nn=en.name.slice(en.name.lastIndexOf(".")),Cn=Date.now()+nn,en.url=I.dir+Cn,bn.abrupt("return",en);case 10:case"end":return bn.stop()}},Y)}));return function(en){return rn.apply(this,arguments)}}(),an={name:"file",fileList:h,action:I==null?void 0:I.host,onChange:K,onRemove:kn,data:wn,beforeUpload:hn};return S.default.createElement(L.Upload,an,S.default.createElement(L.Button,{icon:S.default.createElement(A.UploadOutlined,null)},"Click to Upload"))},s=function(){return S.default.createElement(L.Form,{labelCol:{span:4}},S.default.createElement(L.Form.Item,{label:"Photos",name:"photos"},S.default.createElement(a,null)))},r=s;return Z.createElement(r)}}},4861:function(J,ln,y){"use strict";y.r(ln),y.d(ln,"default",function(){return na});var pn=function(t,c){return pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,p){n.__proto__=p}||function(n,p){for(var f in p)Object.prototype.hasOwnProperty.call(p,f)&&(n[f]=p[f])},pn(t,c)};function Z(t,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");pn(t,c);function n(){this.constructor=t}t.prototype=c===null?Object.create(c):(n.prototype=c.prototype,new n)}var gn=function(){return gn=Object.assign||function(c){for(var n,p=1,f=arguments.length;p<f;p++){n=arguments[p];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(c[i]=n[i])}return c},gn.apply(this,arguments)};function j(t,c){var n={};for(var p in t)Object.prototype.hasOwnProperty.call(t,p)&&c.indexOf(p)<0&&(n[p]=t[p]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,p=Object.getOwnPropertySymbols(t);f<p.length;f++)c.indexOf(p[f])<0&&Object.prototype.propertyIsEnumerable.call(t,p[f])&&(n[p[f]]=t[p[f]]);return n}function A(t,c,n,p){var f=arguments.length,i=f<3?c:p===null?p=Object.getOwnPropertyDescriptor(c,n):p,U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,c,n,p);else for(var P=t.length-1;P>=0;P--)(U=t[P])&&(i=(f<3?U(i):f>3?U(c,n,i):U(c,n))||i);return f>3&&i&&Object.defineProperty(c,n,i),i}function L(t,c){return function(n,p){c(n,p,t)}}function S(t,c){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,c)}function F(t,c,n,p){function f(i){return i instanceof n?i:new n(function(U){U(i)})}return new(n||(n=Promise))(function(i,U){function P(_){try{O(p.next(_))}catch(dn){U(dn)}}function N(_){try{O(p.throw(_))}catch(dn){U(dn)}}function O(_){_.done?i(_.value):f(_.value).then(P,N)}O((p=p.apply(t,c||[])).next())})}function G(t,c){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},p,f,i,U;return U={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(U[Symbol.iterator]=function(){return this}),U;function P(O){return function(_){return N([O,_])}}function N(O){if(p)throw new TypeError("Generator is already executing.");for(;U&&(U=0,O[0]&&(n=0)),n;)try{if(p=1,f&&(i=O[0]&2?f.return:O[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,O[1])).done)return i;switch(f=0,i&&(O=[O[0]&2,i.value]),O[0]){case 0:case 1:i=O;break;case 4:return n.label++,{value:O[1],done:!1};case 5:n.label++,f=O[1],O=[0];continue;case 7:O=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(O[0]===6||O[0]===2)){n=0;continue}if(O[0]===3&&(!i||O[1]>i[0]&&O[1]<i[3])){n.label=O[1];break}if(O[0]===6&&n.label<i[1]){n.label=i[1],i=O;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(O);break}i[2]&&n.ops.pop(),n.trys.pop();continue}O=c.call(t,n)}catch(_){O=[6,_],f=0}finally{p=i=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}}var z=Object.create?function(t,c,n,p){p===void 0&&(p=n);var f=Object.getOwnPropertyDescriptor(c,n);(!f||("get"in f?!c.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return c[n]}}),Object.defineProperty(t,p,f)}:function(t,c,n,p){p===void 0&&(p=n),t[p]=c[n]};function x(t,c){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(c,n)&&z(c,t,n)}function M(t){var c=typeof Symbol=="function"&&Symbol.iterator,n=c&&t[c],p=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&p>=t.length&&(t=void 0),{value:t&&t[p++],done:!t}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(t,c){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var p=n.call(t),f,i=[],U;try{for(;(c===void 0||c-- >0)&&!(f=p.next()).done;)i.push(f.value)}catch(P){U={error:P}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(U)throw U.error}}return i}function sn(){for(var t=[],c=0;c<arguments.length;c++)t=t.concat(H(arguments[c]));return t}function yn(){for(var t=0,c=0,n=arguments.length;c<n;c++)t+=arguments[c].length;for(var p=Array(t),f=0,c=0;c<n;c++)for(var i=arguments[c],U=0,P=i.length;U<P;U++,f++)p[f]=i[U];return p}function Q(t,c,n){if(n||arguments.length===2)for(var p=0,f=c.length,i;p<f;p++)(i||!(p in c))&&(i||(i=Array.prototype.slice.call(c,0,p)),i[p]=c[p]);return t.concat(i||Array.prototype.slice.call(c))}function un(t){return this instanceof un?(this.v=t,this):new un(t)}function fn(t,c,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=n.apply(t,c||[]),f,i=[];return f={},U("next"),U("throw"),U("return"),f[Symbol.asyncIterator]=function(){return this},f;function U(q){p[q]&&(f[q]=function(Sn){return new Promise(function(vn,On){i.push([q,Sn,vn,On])>1||P(q,Sn)})})}function P(q,Sn){try{N(p[q](Sn))}catch(vn){dn(i[0][3],vn)}}function N(q){q.value instanceof un?Promise.resolve(q.value.v).then(O,_):dn(i[0][2],q)}function O(q){P("next",q)}function _(q){P("throw",q)}function dn(q,Sn){q(Sn),i.shift(),i.length&&P(i[0][0],i[0][1])}}function mn(t){var c,n;return c={},p("next"),p("throw",function(f){throw f}),p("return"),c[Symbol.iterator]=function(){return this},c;function p(f,i){c[f]=t[f]?function(U){return(n=!n)?{value:un(t[f](U)),done:f==="return"}:i?i(U):U}:i}}function B(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=t[Symbol.asyncIterator],n;return c?c.call(t):(t=typeof M=="function"?M(t):t[Symbol.iterator](),n={},p("next"),p("throw"),p("return"),n[Symbol.asyncIterator]=function(){return this},n);function p(i){n[i]=t[i]&&function(U){return new Promise(function(P,N){U=t[i](U),f(P,N,U.done,U.value)})}}function f(i,U,P,N){Promise.resolve(N).then(function(O){i({value:O,done:P})},U)}}function $(t,c){return Object.defineProperty?Object.defineProperty(t,"raw",{value:c}):t.raw=c,t}var e=Object.create?function(t,c){Object.defineProperty(t,"default",{enumerable:!0,value:c})}:function(t,c){t.default=c};function a(t){if(t&&t.__esModule)return t;var c={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&z(c,t,n);return e(c,t),c}function s(t){return t&&t.__esModule?t:{default:t}}function r(t,c,n,p){if(n==="a"&&!p)throw new TypeError("Private accessor was defined without a getter");if(typeof c=="function"?t!==c||!p:!c.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?p:n==="a"?p.call(t):p?p.value:c.get(t)}function l(t,c,n,p,f){if(p==="m")throw new TypeError("Private method is not writable");if(p==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof c=="function"?t!==c||!f:!c.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return p==="a"?f.call(t,n):f?f.value=n:c.set(t,n),n}function g(t,c){if(c===null||typeof c!="object"&&typeof c!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?c===t:t.has(c)}var h=y(4085),v=y(0),C=y.n(v),D=y(12),I=y(56),T=y(393),V=y(506);const cn=(t,c)=>{const n=an(t),p=an(c),f=n.pop(),i=p.pop(),U=nn(n,p);return U!==0?U:f&&i?nn(f.split("."),i.split(".")):f||i?f?-1:1:0},K=t=>typeof t=="string"&&/^[v\d]/.test(t)&&hn.test(t),kn=(t,c,n)=>{bn(n);const p=cn(t,c);return Cn[n].includes(p)},wn=(t,c)=>{const n=c.match(/^([<>=~^]+)/),p=n?n[1]:"=";if(p!=="^"&&p!=="~")return kn(t,c,p);const[f,i,U]=an(t),[P,N,O]=an(c);return tn(f,P)!==0?!1:p==="^"?nn([i,U],[N,O])>=0:tn(i,N)!==0?!1:tn(U,O)>=0},hn=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,an=t=>{if(typeof t!="string")throw new TypeError("Invalid argument expected string");const c=t.match(hn);if(!c)throw new Error(`Invalid argument not valid semver ('${t}' received)`);return c.shift(),c},rn=t=>t==="*"||t==="x"||t==="X",Y=t=>{const c=parseInt(t,10);return isNaN(c)?t:c},en=(t,c)=>typeof t!=typeof c?[String(t),String(c)]:[t,c],tn=(t,c)=>{if(rn(t)||rn(c))return 0;const[n,p]=en(Y(t),Y(c));return n>p?1:n<p?-1:0},nn=(t,c)=>{for(let n=0;n<Math.max(t.length,c.length);n++){const p=tn(t[n]||"0",c[n]||"0");if(p!==0)return p}return 0},Cn={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]},Un=Object.keys(Cn),bn=t=>{if(typeof t!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof t}`);if(Un.indexOf(t)===-1)throw new Error(`Invalid operator, expected one of ${Un.join("|")}`)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jn=function(t,c){return jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,p){n.__proto__=p}||function(n,p){for(var f in p)Object.prototype.hasOwnProperty.call(p,f)&&(n[f]=p[f])},jn(t,c)};function d(t,c){jn(t,c);function n(){this.constructor=t}t.prototype=c===null?Object.create(c):(n.prototype=c.prototype,new n)}var o=function(){return o=Object.assign||function(c){for(var n,p=1,f=arguments.length;p<f;p++){n=arguments[p];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(c[i]=n[i])}return c},o.apply(this,arguments)};function u(t,c){var n={};for(var p in t)Object.prototype.hasOwnProperty.call(t,p)&&c.indexOf(p)<0&&(n[p]=t[p]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,p=Object.getOwnPropertySymbols(t);f<p.length;f++)c.indexOf(p[f])<0&&Object.prototype.propertyIsEnumerable.call(t,p[f])&&(n[p[f]]=t[p[f]]);return n}function w(t,c,n,p){var f=arguments.length,i=f<3?c:p===null?p=Object.getOwnPropertyDescriptor(c,n):p,U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,c,n,p);else for(var P=t.length-1;P>=0;P--)(U=t[P])&&(i=(f<3?U(i):f>3?U(c,n,i):U(c,n))||i);return f>3&&i&&Object.defineProperty(c,n,i),i}function m(t,c){return function(n,p){c(n,p,t)}}function k(t,c){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,c)}function b(t,c,n,p){function f(i){return i instanceof n?i:new n(function(U){U(i)})}return new(n||(n=Promise))(function(i,U){function P(_){try{O(p.next(_))}catch(dn){U(dn)}}function N(_){try{O(p.throw(_))}catch(dn){U(dn)}}function O(_){_.done?i(_.value):f(_.value).then(P,N)}O((p=p.apply(t,c||[])).next())})}function R(t,c){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},p,f,i,U;return U={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(U[Symbol.iterator]=function(){return this}),U;function P(O){return function(_){return N([O,_])}}function N(O){if(p)throw new TypeError("Generator is already executing.");for(;n;)try{if(p=1,f&&(i=O[0]&2?f.return:O[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,O[1])).done)return i;switch(f=0,i&&(O=[O[0]&2,i.value]),O[0]){case 0:case 1:i=O;break;case 4:return n.label++,{value:O[1],done:!1};case 5:n.label++,f=O[1],O=[0];continue;case 7:O=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(O[0]===6||O[0]===2)){n=0;continue}if(O[0]===3&&(!i||O[1]>i[0]&&O[1]<i[3])){n.label=O[1];break}if(O[0]===6&&n.label<i[1]){n.label=i[1],i=O;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(O);break}i[2]&&n.ops.pop(),n.trys.pop();continue}O=c.call(t,n)}catch(_){O=[6,_],f=0}finally{p=i=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}}var E=Object.create?function(t,c,n,p){p===void 0&&(p=n),Object.defineProperty(t,p,{enumerable:!0,get:function(){return c[n]}})}:function(t,c,n,p){p===void 0&&(p=n),t[p]=c[n]};function W(t,c){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(c,n)&&E(c,t,n)}function X(t){var c=typeof Symbol=="function"&&Symbol.iterator,n=c&&t[c],p=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&p>=t.length&&(t=void 0),{value:t&&t[p++],done:!t}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")}function on(t,c){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var p=n.call(t),f,i=[],U;try{for(;(c===void 0||c-- >0)&&!(f=p.next()).done;)i.push(f.value)}catch(P){U={error:P}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(U)throw U.error}}return i}function Rn(){for(var t=[],c=0;c<arguments.length;c++)t=t.concat(on(arguments[c]));return t}function Zn(){for(var t=0,c=0,n=arguments.length;c<n;c++)t+=arguments[c].length;for(var p=Array(t),f=0,c=0;c<n;c++)for(var i=arguments[c],U=0,P=i.length;U<P;U++,f++)p[f]=i[U];return p}function In(t){return this instanceof In?(this.v=t,this):new In(t)}function Gn(t,c,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=n.apply(t,c||[]),f,i=[];return f={},U("next"),U("throw"),U("return"),f[Symbol.asyncIterator]=function(){return this},f;function U(q){p[q]&&(f[q]=function(Sn){return new Promise(function(vn,On){i.push([q,Sn,vn,On])>1||P(q,Sn)})})}function P(q,Sn){try{N(p[q](Sn))}catch(vn){dn(i[0][3],vn)}}function N(q){q.value instanceof In?Promise.resolve(q.value.v).then(O,_):dn(i[0][2],q)}function O(q){P("next",q)}function _(q){P("throw",q)}function dn(q,Sn){q(Sn),i.shift(),i.length&&P(i[0][0],i[0][1])}}function ua(t){var c,n;return c={},p("next"),p("throw",function(f){throw f}),p("return"),c[Symbol.iterator]=function(){return this},c;function p(f,i){c[f]=t[f]?function(U){return(n=!n)?{value:In(t[f](U)),done:f==="return"}:i?i(U):U}:i}}function ra(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=t[Symbol.asyncIterator],n;return c?c.call(t):(t=typeof X=="function"?X(t):t[Symbol.iterator](),n={},p("next"),p("throw"),p("return"),n[Symbol.asyncIterator]=function(){return this},n);function p(i){n[i]=t[i]&&function(U){return new Promise(function(P,N){U=t[i](U),f(P,N,U.done,U.value)})}}function f(i,U,P,N){Promise.resolve(N).then(function(O){i({value:O,done:P})},U)}}function ia(t,c){return Object.defineProperty?Object.defineProperty(t,"raw",{value:c}):t.raw=c,t}var Is=Object.create?function(t,c){Object.defineProperty(t,"default",{enumerable:!0,value:c})}:function(t,c){t.default=c};function ka(t){if(t&&t.__esModule)return t;var c={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&E(c,t,n);return Is(c,t),c}function da(t){return t&&t.__esModule?t:{default:t}}function fa(t,c){if(!c.has(t))throw new TypeError("attempted to get private field on non-instance");return c.get(t)}function ma(t,c,n){if(!c.has(t))throw new TypeError("attempted to set private field on non-instance");return c.set(t,n),n}var Fs=y(4794),Ts=y.n(Fs);function Ds(t,c,n,p,f,i){i===void 0&&(i=0);var U=Kn(t,c,i),P=U.width,N=U.height,O=Math.min(P,n),_=Math.min(N,p);return O>_*f?{width:_*f,height:_}:{width:O,height:O/f}}function Ns(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function rs(t,c,n,p,f){f===void 0&&(f=0);var i=Kn(c.width,c.height,f),U=i.width,P=i.height;return{x:ws(t.x,U,n.width,p),y:ws(t.y,P,n.height,p)}}function ws(t,c,n,p){var f=c*p/2-n/2;return is(t,-f,f)}function vs(t,c){return Math.sqrt(Math.pow(t.y-c.y,2)+Math.pow(t.x-c.x,2))}function bs(t,c){return Math.atan2(c.y-t.y,c.x-t.x)*180/Math.PI}function zs(t,c,n,p,f,i,U){i===void 0&&(i=0),U===void 0&&(U=!0);var P=U?Bs:Ms,N=Kn(c.width,c.height,i),O=Kn(c.naturalWidth,c.naturalHeight,i),_={x:P(100,((N.width-n.width/f)/2-t.x/f)/N.width*100),y:P(100,((N.height-n.height/f)/2-t.y/f)/N.height*100),width:P(100,n.width/N.width*100/f),height:P(100,n.height/N.height*100/f)},dn=Math.round(P(O.width,_.width*O.width/100)),q=Math.round(P(O.height,_.height*O.height/100)),Sn=O.width>=O.height*p,vn=Sn?{width:Math.round(q*p),height:q}:{width:dn,height:Math.round(dn/p)},On=o(o({},vn),{x:Math.round(P(O.width-vn.width,_.x*O.width/100)),y:Math.round(P(O.height-vn.height,_.y*O.height/100))});return{croppedAreaPercentages:_,croppedAreaPixels:On}}function Bs(t,c){return Math.min(t,Math.max(0,c))}function Ms(t,c){return c}function Ws(t,c,n,p,f,i){var U=Kn(c.width,c.height,n),P=is(p.width/U.width*(100/t.width),f,i),N={x:P*U.width/2-p.width/2-U.width*P*(t.x/100),y:P*U.height/2-p.height/2-U.height*P*(t.y/100)};return{crop:N,zoom:P}}function Zs(t,c,n){var p=Ns(c);return n.height>n.width?n.height/(t.height*p):n.width/(t.width*p)}function Gs(t,c,n,p,f,i){n===void 0&&(n=0);var U=Kn(c.naturalWidth,c.naturalHeight,n),P=is(Zs(t,c,p),f,i),N=p.height>p.width?p.height/t.height:p.width/t.width,O={x:((U.width-t.width)/2-t.x)*N,y:((U.height-t.height)/2-t.y)*N};return{crop:O,zoom:P}}function Us(t,c){return{x:(c.x+t.x)/2,y:(c.y+t.y)/2}}function Vs(t){return t*Math.PI/180}function Kn(t,c,n){var p=Vs(n);return{width:Math.abs(Math.cos(p)*t)+Math.abs(Math.sin(p)*c),height:Math.abs(Math.sin(p)*t)+Math.abs(Math.cos(p)*c)}}function is(t,c,n){return Math.min(Math.max(t,c),n)}function ks(){for(var t=[],c=0;c<arguments.length;c++)t[c]=arguments[c];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var _s=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,$s=1,Js=3,Hs=function(t){d(c,t);function c(){var n=t!==null&&t.apply(this,arguments)||this;return n.imageRef=C.a.createRef(),n.videoRef=C.a.createRef(),n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=document,n.currentWindow=window,n.state={cropSize:null,hasWheelJustStarted:!1},n.preventZoomSafari=function(p){return p.preventDefault()},n.cleanEvents=function(){n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturemove",n.onGestureMove),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd)},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var p=n.computeSizes();p&&(n.emitCropData(),n.setInitialCrop(p)),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(p){if(n.props.initialCroppedAreaPercentages){var f=Ws(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,p,n.props.minZoom,n.props.maxZoom),i=f.crop,U=f.zoom;n.props.onCropChange(i),n.props.onZoomChange&&n.props.onZoomChange(U)}else if(n.props.initialCroppedAreaPixels){var P=Gs(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,p,n.props.minZoom,n.props.maxZoom),i=P.crop,U=P.zoom;n.props.onCropChange(i),n.props.onZoomChange&&n.props.onZoomChange(U)}},n.computeSizes=function(){var p,f,i,U,P,N,O=n.imageRef.current||n.videoRef.current;if(O&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect();var _=n.containerRect.width/n.containerRect.height,dn=((p=n.imageRef.current)===null||p===void 0?void 0:p.naturalWidth)||((f=n.videoRef.current)===null||f===void 0?void 0:f.videoWidth)||0,q=((i=n.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((U=n.videoRef.current)===null||U===void 0?void 0:U.videoHeight)||0,Sn=O.offsetWidth<dn||O.offsetHeight<q,vn=dn/q,On=void 0;if(Sn)switch(n.props.objectFit){default:case"contain":On=_>vn?{width:n.containerRect.height*vn,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/vn};break;case"horizontal-cover":On={width:n.containerRect.width,height:n.containerRect.width/vn};break;case"vertical-cover":On={width:n.containerRect.height*vn,height:n.containerRect.height};break;case"auto-cover":On=dn>q?{width:n.containerRect.width,height:n.containerRect.width/vn}:{width:n.containerRect.height*vn,height:n.containerRect.height};break}else On={width:O.offsetWidth,height:O.offsetHeight};n.mediaSize=o(o({},On),{naturalWidth:dn,naturalHeight:q}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var xn=n.props.cropSize?n.props.cropSize:Ds(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((P=n.state.cropSize)===null||P===void 0?void 0:P.height)!==xn.height||((N=n.state.cropSize)===null||N===void 0?void 0:N.width)!==xn.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(xn),n.setState({cropSize:xn},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(xn),xn}},n.onMouseDown=function(p){p.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.onDragStart(c.getMousePoint(p))},n.onMouseMove=function(p){return n.onDrag(c.getMousePoint(p))},n.onTouchStart=function(p){n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(p))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),p.touches.length===2?n.onPinchStart(p):p.touches.length===1&&n.onDragStart(c.getTouchPoint(p.touches[0])))},n.onTouchMove=function(p){p.preventDefault(),p.touches.length===2?n.onPinchMove(p):p.touches.length===1&&n.onDrag(c.getTouchPoint(p.touches[0]))},n.onGestureStart=function(p){p.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureMove),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation},n.onGestureMove=function(p){if(p.preventDefault(),!n.isTouching){var f=c.getMousePoint(p),i=n.gestureZoomStart-1+p.scale;if(n.setNewZoom(i,f,{shouldUpdatePosition:!0}),n.props.onRotationChange){var U=n.gestureRotationStart+p.rotation;n.props.onRotationChange(U)}}},n.onGestureEnd=function(p){n.cleanEvents()},n.onDragStart=function(p){var f,i,U=p.x,P=p.y;n.dragStartPosition={x:U,y:P},n.dragStartCrop=o({},n.props.crop),(i=(f=n.props).onInteractionStart)===null||i===void 0||i.call(f)},n.onDrag=function(p){var f=p.x,i=p.y;n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(!!n.state.cropSize&&!(f===void 0||i===void 0)){var U=f-n.dragStartPosition.x,P=i-n.dragStartPosition.y,N={x:n.dragStartCrop.x+U,y:n.dragStartCrop.y+P},O=n.props.restrictPosition?rs(N,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):N;n.props.onCropChange(O)}})},n.onDragStopped=function(){var p,f;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(f=(p=n.props).onInteractionEnd)===null||f===void 0||f.call(p)},n.onWheel=function(p){if(!(n.props.onWheelRequest&&!n.props.onWheelRequest(p))){p.preventDefault();var f=c.getMousePoint(p),i=Ts()(p).pixelY,U=n.props.zoom-i*n.props.zoomSpeed/200;n.setNewZoom(U,f,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var P,N;return(N=(P=n.props).onInteractionStart)===null||N===void 0?void 0:N.call(P)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var P,N;return(N=(P=n.props).onInteractionEnd)===null||N===void 0?void 0:N.call(P)})},250)}},n.getPointOnContainer=function(p){var f=p.x,i=p.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(f-n.containerRect.left),y:n.containerRect.height/2-(i-n.containerRect.top)}},n.getPointOnMedia=function(p){var f=p.x,i=p.y,U=n.props,P=U.crop,N=U.zoom;return{x:(f+P.x)/N,y:(i+P.y)/N}},n.setNewZoom=function(p,f,i){var U=(i===void 0?{}:i).shouldUpdatePosition,P=U===void 0?!0:U;if(!(!n.state.cropSize||!n.props.onZoomChange)){var N=is(p,n.props.minZoom,n.props.maxZoom);if(P){var O=n.getPointOnContainer(f),_=n.getPointOnMedia(O),dn={x:_.x*N-O.x,y:_.y*N-O.y},q=n.props.restrictPosition?rs(dn,n.mediaSize,n.state.cropSize,N,n.props.rotation):dn;n.props.onCropChange(q)}n.props.onZoomChange(N)}},n.getCropData=function(){if(!n.state.cropSize)return null;var p=n.props.restrictPosition?rs(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return zs(p,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var p=n.getCropData();if(!!p){var f=p.croppedAreaPercentages,i=p.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(f,i),n.props.onCropAreaChange&&n.props.onCropAreaChange(f,i)}},n.emitCropAreaChange=function(){var p=n.getCropData();if(!!p){var f=p.croppedAreaPercentages,i=p.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(f,i)}},n.recomputeCropPosition=function(){if(!!n.state.cropSize){var p=n.props.restrictPosition?rs(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;n.props.onCropChange(p),n.emitCropData()}},n}return c.prototype.componentDidMount=function(){this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=_s,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef)},c.prototype.componentWillUnmount=function(){var n;this.currentWindow.removeEventListener("resize",this.computeSizes),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((n=this.styleRef.parentNode)===null||n===void 0||n.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent()},c.prototype.componentDidUpdate=function(n){var p,f,i,U,P,N,O,_,dn;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((p=n.cropSize)===null||p===void 0?void 0:p.height)!==((f=this.props.cropSize)===null||f===void 0?void 0:f.height)||((i=n.cropSize)===null||i===void 0?void 0:i.width)!==((U=this.props.cropSize)===null||U===void 0?void 0:U.width)?this.computeSizes():(((P=n.crop)===null||P===void 0?void 0:P.x)!==((N=this.props.crop)===null||N===void 0?void 0:N.x)||((O=n.crop)===null||O===void 0?void 0:O.y)!==((_=this.props.crop)===null||_===void 0?void 0:_.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((dn=this.videoRef.current)===null||dn===void 0||dn.load())},c.prototype.getAspect=function(){var n=this.props,p=n.cropSize,f=n.aspect;return p?p.width/p.height:f},c.prototype.onPinchStart=function(n){var p=c.getTouchPoint(n.touches[0]),f=c.getTouchPoint(n.touches[1]);this.lastPinchDistance=vs(p,f),this.lastPinchRotation=bs(p,f),this.onDragStart(Us(p,f))},c.prototype.onPinchMove=function(n){var p=this,f=c.getTouchPoint(n.touches[0]),i=c.getTouchPoint(n.touches[1]),U=Us(f,i);this.onDrag(U),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var P=vs(f,i),N=p.props.zoom*(P/p.lastPinchDistance);p.setNewZoom(N,U,{shouldUpdatePosition:!1}),p.lastPinchDistance=P;var O=bs(f,i),_=p.props.rotation+(O-p.lastPinchRotation);p.props.onRotationChange&&p.props.onRotationChange(_),p.lastPinchRotation=O})},c.prototype.render=function(){var n=this,p=this.props,f=p.image,i=p.video,U=p.mediaProps,P=p.transform,N=p.crop,O=N.x,_=N.y,dn=p.rotation,q=p.zoom,Sn=p.cropShape,vn=p.showGrid,On=p.style,xn=On.containerStyle,Bn=On.cropAreaStyle,Dn=On.mediaStyle,Nn=p.classes,Qn=Nn.containerClassName,os=Nn.cropAreaClassName,ns=Nn.mediaClassName,Ln=p.objectFit;return C.a.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(Hn){return n.containerRef=Hn},"data-testid":"container",style:xn,className:ks("reactEasyCrop_Container",Qn)},f?C.a.createElement("img",o({alt:"",className:ks("reactEasyCrop_Image",Ln==="contain"&&"reactEasyCrop_Contain",Ln==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Ln==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Ln==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),ns)},U,{src:f,ref:this.imageRef,style:o(o({},Dn),{transform:P||"translate("+O+"px, "+_+"px) rotate("+dn+"deg) scale("+q+")"}),onLoad:this.onMediaLoad})):i&&C.a.createElement("video",o({autoPlay:!0,loop:!0,muted:!0,className:ks("reactEasyCrop_Video",Ln==="contain"&&"reactEasyCrop_Contain",Ln==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Ln==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Ln==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),ns)},U,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:o(o({},Dn),{transform:P||"translate("+O+"px, "+_+"px) rotate("+dn+"deg) scale("+q+")"}),controls:!1}),(Array.isArray(i)?i:[{src:i}]).map(function(Pn){return C.a.createElement("source",o({key:Pn.src},Pn))})),this.state.cropSize&&C.a.createElement("div",{style:o(o({},Bn),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:ks("reactEasyCrop_CropArea",Sn==="round"&&"reactEasyCrop_CropAreaRound",vn&&"reactEasyCrop_CropAreaGrid",os)}))},c.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:Js,minZoom:$s,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},c.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},c.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},c}(C.a.Component),Ys=Hs,Ss=y(507);function Xs(t){if(!!t&&typeof window!="undefined"){var c=document.createElement("style");return c.setAttribute("media","screen"),c.innerHTML=t,document.head.appendChild(c),t}}const Vn="img-crop",Cs=1,ps=.1,ms=0,gs=1,Os=-180,Ps=180,qs=Object(v.forwardRef)((t,c)=>{const{cropperRef:n,image:p,aspect:f,shape:i,grid:U,zoom:P,rotate:N,minZoom:O,maxZoom:_,cropperProps:dn}=t,[q,Sn]=Object(v.useState)({x:0,y:0}),[vn,On]=Object(v.useState)({width:0,height:0}),[xn,Bn]=Object(v.useState)(Cs),[Dn,Nn]=Object(v.useState)(ms),Qn=Object(v.useRef)({width:0,height:0,x:0,y:0}),os=Object(v.useCallback)(Ln=>{const{width:Pn,height:Hn}=Ln,es=Hn*f;Pn>es?On({width:es,height:Hn}):On({width:Pn,height:Pn/f})},[f]),ns=Object(v.useCallback)((Ln,Pn)=>{Qn.current=Pn},[]);return Object(v.useImperativeHandle)(c,()=>({rotateVal:Dn,setZoomVal:Bn,setRotateVal:Nn,cropPixelsRef:Qn})),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Ys,Object.assign({},dn,{ref:n,image:p,crop:q,cropSize:vn,onCropChange:Sn,aspect:f,cropShape:i,showGrid:U,zoomWithScroll:P,zoom:xn,rotation:Dn,onZoomChange:Bn,onRotationChange:Nn,minZoom:O,maxZoom:_,onMediaLoaded:os,onCropComplete:ns,classes:{containerClassName:`${Vn}-container`,mediaClassName:`${Vn}-media`}})),P&&Object(h.jsxs)("section",Object.assign({className:`${Vn}-control ${Vn}-control-zoom`},{children:[Object(h.jsx)("button",Object.assign({onClick:()=>Bn(xn-ps),disabled:xn-ps<O},{children:"\uFF0D"})),Object(h.jsx)(Ss.a,{min:O,max:_,step:ps,value:xn,onChange:Bn}),Object(h.jsx)("button",Object.assign({onClick:()=>Bn(xn+ps),disabled:xn+ps>_},{children:"\uFF0B"}))]})),N&&Object(h.jsxs)("section",Object.assign({className:`${Vn}-control ${Vn}-control-rotate`},{children:[Object(h.jsx)("button",Object.assign({onClick:()=>Nn(Dn-gs),disabled:Dn===Os},{children:"\u21BA"})),Object(h.jsx)(Ss.a,{min:Os,max:Ps,step:gs,value:Dn,onChange:Nn}),Object(h.jsx)("button",Object.assign({onClick:()=>Nn(Dn+gs),disabled:Dn===Ps},{children:"\u21BB"}))]}))]})});var Ks=Object(v.memo)(qs);Xs(`.img-crop-modal .img-crop-container {
  position: relative;
  width: 100%;
  height: 40vh;
}
.img-crop-modal .img-crop-control {
  display: flex;
  align-items: center;
  width: 60%;
  margin-left: auto;
  margin-right: auto;
}
.img-crop-modal .img-crop-control:first-of-type {
  margin-top: 16px;
}
.img-crop-modal .img-crop-control:last-of-type {
  margin-bottom: -8px;
}
.img-crop-modal .img-crop-control button {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 34px;
  height: 34px;
  padding: 0;
  font-style: normal;
  background: transparent;
  border: 0;
  outline: 0;
  cursor: pointer;
}
.img-crop-modal .img-crop-control button[disabled] {
  cursor: default;
}
.img-crop-modal .img-crop-control button + div:only-of-type {
  flex: 1;
  margin: 0 8px;
}
.img-crop-modal .img-crop-control-zoom button {
  font-size: 18px;
}
.img-crop-modal .img-crop-control-rotate button {
  font-size: 16px;
}
.img-crop-modal .img-crop-control-rotate button:first-of-type {
  transform: rotate(-20deg);
}
.img-crop-modal .img-crop-control-rotate button:last-of-type {
  transform: rotate(20deg);
}
`);const Qs=cn(D.version,"4.23.0")===-1?{visible:!0}:{open:!0},na=Object(v.forwardRef)((t,c)=>{const{aspect:n=1,shape:p="rect",grid:f=!1,quality:i=.4,fillColor:U="white",zoom:P=!0,rotate:N=!1,minZoom:O=1,maxZoom:_=3,modalTitle:dn,modalWidth:q,modalOk:Sn,modalCancel:vn,modalMaskTransitionName:On,modalTransitionName:xn,modalClassName:Bn,onModalOk:Dn,onModalCancel:Nn,beforeCrop:Qn,onUploadFail:os,cropperProps:ns,children:Ln}=t,Pn=Object(v.useRef)({});Pn.current.onModalOk=Dn,Pn.current.onModalCancel=Nn,Pn.current.beforeCrop=Qn,Pn.current.onUploadFail=os;const[Hn,es]=Object(v.useState)(""),xs=Object(v.useRef)({}),hs=Object(v.useRef)(),ds=Object(v.useRef)(()=>{}),ys=Object(v.useRef)(()=>{}),sa=Object(v.useMemo)(()=>{const En=Array.isArray(Ln)?Ln[0]:Ln,An=En.props,{beforeUpload:Fn,accept:Tn}=An,as=j(An,["beforeUpload","accept"]);return hs.current=Fn,Object.assign(Object.assign({},En),{props:Object.assign(Object.assign({},as),{accept:Tn||"image/*",beforeUpload:(fs,cs)=>new Promise((Yn,_n)=>F(void 0,void 0,void 0,function*(){if(Pn.current.beforeCrop&&!(yield Pn.current.beforeCrop(fs,cs)))return _n();xs.current=fs,ds.current=$n=>{var Jn,Mn;(Mn=(Jn=Pn.current).onModalOk)===null||Mn===void 0||Mn.call(Jn,$n),Yn($n)},ys.current=$n=>{var Jn,Mn;(Mn=(Jn=Pn.current).onUploadFail)===null||Mn===void 0||Mn.call(Jn,$n),_n()};const Xn=new FileReader;Xn.addEventListener("load",()=>{typeof Xn.result=="string"&&es(Xn.result)}),Xn.readAsDataURL(fs)}))})})},[Ln]),ss=Object(v.useRef)({}),aa=Object(v.useMemo)(()=>{const En={width:q,okText:Sn,cancelText:vn,maskTransitionName:On,transitionName:xn};return Object.keys(En).forEach(An=>{const Fn=An;En[Fn]===void 0&&delete En[Fn]}),En},[vn,On,Sn,xn,q]),Ls=()=>{es(""),ss.current.setZoomVal(Cs),ss.current.setRotateVal(ms)},ta=Object(v.useCallback)(()=>{var En,An;(An=(En=Pn.current).onModalCancel)===null||An===void 0||An.call(En),Ls()},[]),pa=Object(v.useCallback)(En=>F(void 0,void 0,void 0,function*(){var An;Ls();const Fn=document.createElement("canvas"),Tn=Fn.getContext("2d"),as=En.target,cs=(((An=as==null?void 0:as.getRootNode)===null||An===void 0?void 0:An.call(as))||document).querySelector(`.${Vn}-media`),{width:Yn,height:_n,x:Xn,y:$n}=ss.current.cropPixelsRef.current;if(N&&ss.current.rotateVal!==ms){const{naturalWidth:qn,naturalHeight:zn}=cs,ts=ss.current.rotateVal*(Math.PI/180),Wn=Math.abs(Math.sin(ts)),Es=Math.abs(Math.cos(ts)),ls=qn*Es+zn*Wn,us=zn*Es+qn*Wn;Fn.width=ls,Fn.height=us,Tn.fillStyle=U,Tn.fillRect(0,0,ls,us);const js=ls/2,As=us/2;Tn.translate(js,As),Tn.rotate(ts),Tn.translate(-js,-As);const ea=(ls-qn)/2,ca=(us-zn)/2;Tn.drawImage(cs,0,0,qn,zn,ea,ca,qn,zn);const la=Tn.getImageData(0,0,ls,us);Fn.width=Yn,Fn.height=_n,Tn.putImageData(la,-Xn,-$n)}else Fn.width=Yn,Fn.height=_n,Tn.fillStyle=U,Tn.fillRect(0,0,Yn,_n),Tn.drawImage(cs,Xn,$n,Yn,_n,0,0,Yn,_n);const{type:Jn,name:Mn,uid:oa}=xs.current;Fn.toBlob(qn=>F(void 0,void 0,void 0,function*(){const zn=Object.assign(new File([qn],Mn,{type:Jn}),{uid:oa});if(!hs.current)return ds.current(zn);const ts=zn,Wn=yield hs.current(ts,[ts]);if(Wn===!0)return ds.current(zn);if(Wn===!1)return ys.current(new Error("beforeUpload return false"));if(delete zn[V.a.LIST_IGNORE],Wn===V.a.LIST_IGNORE)return Object.defineProperty(zn,V.a.LIST_IGNORE,{value:!0,configurable:!0}),ys.current(new Error("beforeUpload return LIST_IGNORE"));if(typeof Wn=="object"&&Wn!==null)return ds.current(Wn)}),Jn,i)}),[U,i,N]),Rs=En=>Object(h.jsxs)(h.Fragment,{children:[sa,Hn&&Object(h.jsx)(T.default,Object.assign({},Qs,{wrapClassName:`${Vn}-modal ${Bn||""}`,title:En,onOk:pa,onCancel:ta,maskClosable:!1,destroyOnClose:!0},aa,{children:Object(h.jsx)(Ks,{ref:ss,cropperRef:c,image:Hn,aspect:n,shape:p,grid:f,zoom:P,rotate:N,minZoom:O,maxZoom:_,cropperProps:ns})}))]});return dn?Rs(dn):Object(h.jsx)(I.a,{children:(En,An)=>Rs(An==="zh-cn"?"\u7F16\u8F91\u56FE\u7247":"Edit image")})})}}]);
